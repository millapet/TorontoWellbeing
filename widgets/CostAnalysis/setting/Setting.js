// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/CostAnalysis/setting/GeneralSettings":function(){define("dojo/_base/declare jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!./GeneralSettings.html dojo/_base/lang dojo/_base/array dojo/on ../utils dojo/dom-attr dojo/dom-class ./ReportSettings dijit/form/CheckBox".split(" "),function(v,r,w,q,g,k,l,m,n,f,e){return v([r,w],{templateString:q,configuredReportSettings:null,baseClass:"jimu-widget-cost-analysis-general-settings",constructor:function(b){g.mixin(this,b)},postMixInProperties:function(){this.nls.common=
{};g.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this._init()},_init:function(){this._setConfig();this._attachNodeEvents();this.currencyInputNode.validator=g.hitch(this,this._currencyValidator);this.bufferDistanceInputNode.validator=g.hitch(this,this._bufferDistanceValidator);this.own(l(this.currencyInputNode,"change",g.hitch(this,function(){this.currencyInputNode.isValid()&&this._onUnitChange()})));this.own(l(this.editReportSettings,"click",g.hitch(this,
function(){this._createReportSettingsDialog(!1)})));this.configuredReportSettings||this._createReportSettingsDialog(!0)},_setConfig:function(){this.measurementUnitInputNode.set("value",this.config.generalSettings.measurementUnit);this.currencyInputNode.set("value",this.config.generalSettings.currency);this.roundCostInputNode.set("value",this.config.generalSettings.roundCostType);this.projectAreaTypeInputNode.set("value",this.config.generalSettings.projectAreaType);this.bufferDistanceInputNode.set("value",
this.config.generalSettings.bufferDistance);this.config.generalSettings.hasOwnProperty("canExportProject")&&this.exportCSVCheckBox.set("checked",this.config.generalSettings.canExportProject,!1);this.configuredReportSettings=this.config.generalSettings.CSVReportSettings},validate:function(){var b;b=this.projectAreaTypeInputNode.get("value");return this.currencyInputNode.validate()?"buffer"!==b||this.bufferDistanceInputNode.validate()?{isValid:!0}:{isValid:!1,errorMessage:this.nls.generalSettings.errorMessages.bufferDistance}:
{isValid:!1,errorMessage:this.nls.generalSettings.errorMessages.currency}},getConfig:function(){return{measurementUnit:this.measurementUnitInputNode.get("value"),currency:this.currencyInputNode.get("value"),roundCostType:this.roundCostInputNode.get("value"),projectAreaType:this.projectAreaTypeInputNode.get("value"),bufferDistance:this.bufferDistanceInputNode.get("value"),canExportProject:this.exportCSVCheckBox.checked,CSVReportSettings:this.configuredReportSettings}},_attachNodeEvents:function(){this.own(l(this.measurementUnitInputNode,
"change",g.hitch(this,function(b){n.set(this.bufferDistanceUnit,"innerHTML",this.nls.units[b].label);this._onUnitChange()})));this.own(l(this.projectAreaTypeInputNode,"change",g.hitch(this,function(b){"outline"===b?(this.bufferDistanceInputNode.textbox.value="5",this.bufferDistanceInputNode.set("disabled",!0),f.add(this.projectSettingsOutputRightContainerNode,"esriCTHidden")):(this.bufferDistanceInputNode.set("disabled",!1),f.remove(this.projectSettingsOutputRightContainerNode,"esriCTHidden"))})))},
_onUnitChange:function(){var b,a;a=this.measurementUnitInputNode.get("value");this.configuredReportSettings&&k.forEach(this.configuredReportSettings.reportSettings,g.hitch(this,function(c){-1<c.columnTitle.indexOf("Length")?(b=m.units[a].lengthAbbr,c.columnTitle="Length ("+b+")"):-1<c.columnTitle.indexOf("Area")?(b=m.units[a].areaAbbr,c.columnTitle="Area ("+b+")"):-1<c.columnTitle.indexOf("Cost")&&(b=this.currencyInputNode.get("value"),c.columnTitle="Cost ("+b+")")}))},_currencyValidator:function(b){return b.match(/^([^0-9]+)$/)?
!0:(this.currencyInputNode.invalidMessage=this.nls.generalSettings.errorMessages.currency,!1)},_bufferDistanceValidator:function(b){return 0>b?(this.bufferDistanceInputNode.invalidMessage=this.nls.generalSettings.errorMessages.outOfRangebufferDistance,!1):b.match(/^([0-9]*[1-9][0-9]*([\.\,][0-9]+)*([\.\,][0-9]+)?|[0]+\.[0-9]*[1-9][0-9]*)$/)?!0:(this.bufferDistanceInputNode.invalidMessage=this.nls.generalSettings.errorMessages.bufferDistance,!1)},_createReportSettingsDialog:function(b){this._reportSettings=
new e({nls:this.nls,previousReportSettings:this.configuredReportSettings,isLoad:b,config:this.config});l(this._reportSettings,"okButtonClicked",g.hitch(this,function(a){this.configuredReportSettings=a}));l(this._reportSettings,"onInitialLoad",g.hitch(this,function(a){this.configuredReportSettings=a}));this._reportSettings.startup()}})})},"widgets/CostAnalysis/utils":function(){define("esri/request esri/geometry/geometryEngine dojo/Deferred dojo/_base/lang jimu/dijit/Message dojo/_base/array jimu/utils dijit/focus".split(" "),
function(v,r,w,q,g,k,l,m){var n={};n.units={feet:{lengthUnit:"feet",areaUnit:"square-feet",bufferUnit:"UNIT_FOOT",lengthAbbr:window.jimuNls.units.feetAbbr,areaAbbr:window.jimuNls.units.squareFeetAbbr},meters:{lengthUnit:"meters",areaUnit:"square-meters",bufferUnit:"UNIT_METER",lengthAbbr:window.jimuNls.units.metersAbbr,areaAbbr:window.jimuNls.units.squareMetersAbbr},miles:{lengthUnit:"miles",areaUnit:"square-miles",bufferUnit:"UNIT_STATUTE_MILE",lengthAbbr:window.jimuNls.units.milesAbbr,areaAbbr:window.jimuNls.units.squareMilesAbbr},
yards:{lengthUnit:"yards",areaUnit:"square-yards",bufferUnit:"UNIT_SURVEY_YARD",lengthAbbr:window.jimuNls.units.yardsAbbr,areaAbbr:window.jimuNls.units.squareYardsAbbr},kilometers:{lengthUnit:"kilometers",areaUnit:"square-kilometers",bufferUnit:"UNIT_KILOMETER",lengthAbbr:window.jimuNls.units.kilometersAbbr,areaAbbr:window.jimuNls.units.squareKilometerAbbr}};n.switchToTab=function(f,e){f.selectTab(e)};n.removeNegativeExponents=function(f){return 1<f.toString().toLowerCase().split("e-").length?0:f};
n.applyRounding=function(f,e){var b;if(isNaN(e)||null===e)e=2;b=Math.pow(10,e);f=Math.round(f*b)/b;return f=f.toFixed(e)};n.getLengthOfGeometry=function(f,e){var b,a;b=0;(a=r.simplify(f))&&(b=f.spatialReference.isWebMercator()||4326===f.spatialReference.wkid?r.geodesicLength(a,e):r.planarLength(a,e));return b};n.getAreaOfGeometry=function(f,e){var b,a;a=r.simplify(f);b=0;a&&(b=f.spatialReference.isWebMercator()||4326===f.spatialReference.wkid?r.geodesicArea(a,e):r.planarArea(a,e));return b};n.deleteFeatures=
function(f,e){var b=new w;v({url:f+"/deleteFeatures",content:{where:e,f:"json"}},{usePost:!0}).then(q.hitch(this,function(a){b.resolve(a)}),function(){b.reject(!1)});return b.promise};n.getUnitsAbbreviation=function(f,e){var b="";if("esriGeometryPolygon"===f||"polygon"===f)b=n.units[e].areaAbbr;else if("esriGeometryPolyline"===f||"polyline"===f)b=n.units[e].lengthAbbr;return b};n.roundProjectCostValue=function(f,e){var b=0;e=parseFloat(e);switch(f){case "nearestWholeNumber":b=e.toFixed();break;case "nearestTen":b=
eval(e.toFixed())/10;b=10*eval(b.toFixed());break;case "nearestHundred":b=eval(e.toFixed())/100;b=100*eval(b.toFixed());break;case "nearestThousand":b=eval(e.toFixed())/1E3;b=1E3*eval(b.toFixed());break;case "nearestTenThousands":b=eval(e.toFixed())/1E4;b=1E4*eval(b.toFixed());break;default:b=e.toFixed(2)}return b};n.getPrjAssetTableFields=function(f){var e={};k.forEach(f.fields,q.hitch(this,function(b){"ASSETGUID"===b.name.toUpperCase()?e.ASSETGUID=b.name:"COSTEQUATION"===b.name.toUpperCase()?e.COSTEQUATION=
b.name:"SCENARIO"===b.name.toUpperCase()?e.SCENARIO=b.name:"TEMPLATENAME"===b.name.toUpperCase()?e.TEMPLATENAME=b.name:"GEOGRAPHYGUID"===b.name.toUpperCase()?e.GEOGRAPHYGUID=b.name:"PROJECTGUID"===b.name.toUpperCase()&&(e.PROJECTGUID=b.name)}));e.OBJECTID=f.objectIdField;return e};n.getPrjLayerFields=function(f){var e={};k.forEach(f.fields,q.hitch(this,function(b){"PROJECTNAME"===b.name.toUpperCase()?e.PROJECTNAME=b.name:"DESCRIPTION"===b.name.toUpperCase()?e.DESCRIPTION=b.name:"TOTALASSETCOST"===
b.name.toUpperCase()?e.TOTALASSETCOST=b.name:"GROSSPROJECTCOST"===b.name.toUpperCase()?e.GROSSPROJECTCOST=b.name:"GLOBALID"===b.name.toUpperCase()&&(e.GLOBALID=b.name)}));return e};n.getPrjMultiplierFields=function(f){var e={};k.forEach(f.fields,q.hitch(this,function(b){"DESCRIPTION"===b.name.toUpperCase()?e.DESCRIPTION=b.name:"TYPE"===b.name.toUpperCase()?e.TYPE=b.name:"VALUE"===b.name.toUpperCase()?e.VALUE=b.name:"COSTINDEX"===b.name.toUpperCase()?e.COSTINDEX=b.name:"PROJECTGUID"===b.name.toUpperCase()&&
(e.PROJECTGUID=b.name)}));e.OBJECTID=f.objectIdField;return e};n.showMessage=function(f){var e=new g({message:f});e.message=f;return e};n.evaluate=function(f){return(new Function("return "+f))()};n.validateEquation=function(f){var e;if(""===f||-1<f.indexOf("\x26")||-1<f.indexOf("|")||-1<f.indexOf(","))return!1;f=f.replace(/{measure}/ig,1);f=f.replace(/{totalmeasure}/ig,1);f=f.replace(/{totalcount}/ig,1);if(-1!==f.indexOf("{")||-1!==f.indexOf("}"))return!1;try{return e=n.evaluate(f),isFinite(e)?!0:
!1}catch(b){return!1}};n.setFirstAndLastWBFocusNode=function(f,e,b){l.initFirstFocusNode(f,e);m.focus(e);l.initLastFocusNode(f,b)};return n})},"widgets/CostAnalysis/setting/ReportSettings":function(){define("dojo/_base/declare jimu/dijit/Popup jimu/dijit/SimpleTable dijit/_WidgetBase dojo/Evented dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ReportSettings.html ../utils dojo/_base/array dojo/_base/lang jimu/dijit/Message dijit/form/TextBox".split(" "),function(v,r,w,q,g,k,l,m,n,
f,e,b,a){return v([q,k,g,l],{templateString:m,popup:null,_reportSettingsTable:null,_tableTitleFields:{Layer:"layerName","Feature Template":"TEMPLATENAME",Geography:"GEOGRAPHY",Scenario:"SCENARIO",Count:"count",Length:"Length",Area:"Area",Equation:"COSTEQUATION",Cost:"cost"},baseClass:"jimu-widget-cost-analysis-report-settings",constructor:function(a){e.mixin(this,a)},startup:function(){this._init()},postCreate:function(){this.popup=null;this.inherited(arguments)},_init:function(){this.isLoad?(this._addAbbreviationForTitle(),
this._createDataForInitialLoad(),this.emit("onInitialLoad",this.previousReportSettings)):(this.previousReportSettings||(this._addAbbreviationForTitle(),this._createDataForInitialLoad()),this._createReportSettingsTable(),this._createReportSettingsPopup())},_addAbbreviationForTitle:function(){var a,d;for(d in this._tableTitleFields)"Length"===d?(a=n.units[this.config.generalSettings.measurementUnit].lengthAbbr,this._tableTitleFields[d+" ("+a+")"]=this._tableTitleFields[d],delete this._tableTitleFields[d]):
"Area"===d?(a=n.units[this.config.generalSettings.measurementUnit].areaAbbr,this._tableTitleFields[d+" ("+a+")"]=this._tableTitleFields[d],delete this._tableTitleFields[d]):"Cost"===d&&(a=this.config.generalSettings.currency,this._tableTitleFields[d+" ("+a+")"]=this._tableTitleFields[d],delete this._tableTitleFields[d])},_createReportSettingsTable:function(){this.popup=new r({titleLabel:this.nls.generalSettings.reportSettings.reportSettingsPopupTitle,content:this.domNode,width:800,height:500,autoHeight:!0,
"class":this.baseClass,buttons:[{label:this.nls.common.ok,onClick:e.hitch(this,function(){this.onOkButtonClicked()})},{label:this.nls.common.cancel}]})},onOkButtonClicked:function(){var a=this._getReportSettings(),d,h=[];f.forEach(a.reportSettings,function(a){""!==a.columnLabel&&h.push(a.columnLabel)});d=h.filter(e.hitch(this,function(a,c,d){return d.indexOf(a)!==c}));0<d.length?new b({message:this.nls.generalSettings.reportSettings.duplicateMsg+":"+d[0]}):(this.emit("okButtonClicked",a),this.popup.close())},
_createReportSettingsPopup:function(){this._reportSettingsTable=new w({fields:[{name:"showColumn",title:this.nls.generalSettings.reportSettings.checkboxLabel,type:"checkbox",editable:!1,width:"15%"},{name:"columnTitle",title:this.nls.generalSettings.reportSettings.layerTitle,type:"text",editable:!1,width:"35%"},{name:"columnLabel",title:this.nls.generalSettings.reportSettings.columnLabel,width:"35%",type:"empty"},{name:"actions",title:this.nls.common.actions,width:"15%",type:"actions",actions:["up",
"down"]}],selectable:!1});this._reportSettingsTable.placeAt(this.reportSettingsTableNode);this._reportSettingsTable.startup();this.previousReportSettings.hasOwnProperty("reportName")&&this.reportNameNode.set("value",this.previousReportSettings.reportName);this._populateReportSettings()},_createDataForInitialLoad:function(){this.previousReportSettings={};this.previousReportSettings.reportSettings=[];for(var a in this._tableTitleFields)this.previousReportSettings.reportSettings.push({isVisible:!0,columnTitle:a,
columnLabel:"",fieldToMap:this._tableTitleFields[a]});this.previousReportSettings.reportName=""},_populateReportSettings:function(){f.forEach(this.previousReportSettings.reportSettings,e.hitch(this,function(a){this._addNewRow(a)}))},_addNewRow:function(a){this._createRow(a)},_createRow:function(c){var d;d=this._reportSettingsTable.addRow({showColumn:c.isVisible,columnTitle:c.columnTitle});d.tr.labelTextBox=new a;d.tr.labelTextBox.set("value",c.columnLabel);d.tr.labelTextBox.placeAt(d.tr.cells[2])},
_getReportSettings:function(){var a={},d,b;b=this._reportSettingsTable.getData();d=this._reportSettingsTable.getRows();a.reportSettings=[];f.forEach(b,e.hitch(this,function(c,b){var h={};h.isVisible=c.showColumn;h.columnTitle=c.columnTitle;h.columnLabel=d[b].labelTextBox.get("value");h.fieldToMap=this._getFieldTitleAbbr(c.columnTitle);a.reportSettings.push(h)}));a.reportName=this.reportNameNode.get("value");return a},_getFieldTitleAbbr:function(a){return-1<a.indexOf("Length")?"Length":-1<a.indexOf("Area")?
"Area":-1<a.indexOf("Cost")?"cost":this._tableTitleFields[a]}})})},"widgets/CostAnalysis/setting/ProjectSettings":function(){define("dojo/_base/declare jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!./ProjectSettings.html dojo/_base/lang dojo/on dojo/_base/array dojo/Evented dojo/string esri/layers/FeatureLayer dojo/promise/all dojo/Deferred jimu/dijit/CheckBox".split(" "),function(v,r,w,q,g,k,l,m,n,f,e,b){return v([r,w,m],{baseClass:"jimu-widget-cost-analysis-project-settings",templateString:q,
_configuredFieldsTable:null,_prevCostingGeometryLayerValue:"",_prevProjectLayerValue:"",_prevPointLayerCentroidValue:"",_prevProjectAssetsTableValue:"",_prevProjectMultiplierTableValue:"",_defaultSelectOption:{},_assetsTableRequiredFields:{},_multiplierTableRequiredFields:{},constructor:function(a){g.mixin(this,a)},postMixInProperties:function(){this.nls.common={};g.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._configuredFieldsTable=null;this._prevProjectMultiplierTableValue=
this._prevProjectAssetsTableValue=this._prevPointLayerCentroidValue=this._prevProjectLayerValue=this._prevCostingGeometryLayerValue="";this.own(k(this.costingGeometryHelp,"click",g.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.costingGeometryHelp)})));this.own(k(this.fieldToLabelGeographyHelp,"click",g.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.fieldToLabelGeographyHelp)})));this.own(k(this.projectAssetsTableHelp,"click",g.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectAssetsTableHelp)})));
this.own(k(this.projectMultiplierTableHelp,"click",g.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectMultiplierTableHelp)})));this.own(k(this.projectLayerHelp,"click",g.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectLayerHelp)})));this.own(k(this.pointLayerCentroidHelp,"click",g.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.pointLayerHintText)})));this._assetsTableRequiredFields={ASSETGUID:["esriFieldTypeGUID"],
COSTEQUATION:["esriFieldTypeString"],SCENARIO:["esriFieldTypeString"],TEMPLATENAME:["esriFieldTypeString"],GEOGRAPHYGUID:["esriFieldTypeGUID"],PROJECTGUID:["esriFieldTypeGUID"]};this._multiplierTableRequiredFields={DESCRIPTION:["esriFieldTypeString"],TYPE:["esriFieldTypeString"],VALUE:["esriFieldTypeDouble","esriFieldTypeSingle"],COSTINDEX:["esriFieldTypeSmallInteger","esriFieldTypeInteger"],PROJECTGUID:["esriFieldTypeGUID"]};this._defaultSelectOption={value:"",label:this.nls.projectSettings.selectLabel};
this.inherited(arguments);this._init()},getConfig:function(){return{costingGeometryLayer:this._prevCostingGeometryLayerValue,geographyField:this.fieldToLabelGeography.value,assetTable:this._prevProjectAssetsTableValue,multiplierAdditionalCostTable:this._prevProjectMultiplierTableValue,projectLayer:this._prevProjectLayerValue,pointLayerCentroid:this._prevPointLayerCentroidValue}},validate:function(){var a,c;a=!0;c="";""===this._prevProjectAssetsTableValue&&""===this._prevProjectMultiplierTableValue&&
""===this._prevProjectLayerValue||""!==this._prevProjectAssetsTableValue&&""!==this._prevProjectMultiplierTableValue&&""!==this._prevProjectLayerValue||(c=[],""===this._prevProjectAssetsTableValue&&c.push(this.nls.projectSettings.projectAssetsTableLabel),""===this._prevProjectMultiplierTableValue&&c.push(this.nls.projectSettings.projectMultiplierTableLabel),""===this._prevProjectLayerValue&&c.push(this.nls.projectSettings.projectLayerLabel),c=c.join(" and "),a=!1,c=n.substitute(this.nls.projectSettings.errorMessages.invalidConfiguration,
{fieldsString:g.trim(c)}));return{isValid:a,errorMessage:c}},_init:function(){var a,c,d;a=[];c=[];d=[];this.map&&this.map.itemInfo&&this.map.itemInfo.itemData&&(this.map.itemInfo.itemData.operationalLayers&&0<this.map.itemInfo.itemData.operationalLayers.length&&(a=this.map.itemInfo.itemData.operationalLayers),this.map.itemInfo.itemData.tables&&0<this.map.itemInfo.itemData.tables.length&&(c=this.map.itemInfo.itemData.tables));this._filterValidLayersForDropDown(a);this._populatePointLayerDropdown(a);
l.forEach(c,g.hitch(this,function(a){var c=new b;d.push(c);a=new f(a.url);k(a,"load",g.hitch(this,function(a){l.forEach(this.map.itemInfo.itemData.tables,g.hitch(this,function(c){if(c.url===a.layer.url)return a.layer.id=c.id,a.layer.title=c.title,!0}));c.resolve(a.layer)}));k(a,"error",g.hitch(this,function(){c.resolve(null)}))}));e(d).then(g.hitch(this,function(a){this._populateTablesForDropDown(a)}));k(this.fieldToLabelGeography,"change",g.hitch(this,function(a){this.emit("onGeographyFieldChange",
a,this.costingGeometryLayerDropDown.getValue())}));this._attachingEvents();this._setConfig()},_filterValidLayersForDropDown:function(a){var c,d;c=[this._defaultSelectOption];d=[this._defaultSelectOption];this._costingGeometryLayerFieldOptions={defaultSelectOption:{options:[this._defaultSelectOption]}};a=a&&0<a.length?this._getLayerOptions(a,c,d):{costingGeometryLayerOptions:c,projectLayerOptions:d};this.costingGeometryLayerDropDown.set("options",g.clone(a.costingGeometryLayerOptions));this.projectLayerDropDown.set("options",
g.clone(a.projectLayerOptions))},_getLayerOptions:function(a,c,d){var b;l.forEach(a,g.hitch(this,function(a){if(a.layerObject&&a.layerObject.capabilities)b=a.layerObject.capabilities;else return!0;"esriGeometryPolygon"===a.layerObject.geometryType&&-1<b.indexOf("Query")&&this._hasGlobalIDField(a)&&(c.push({value:a.id,label:a.title}),"ArcGISFeatureLayer"===a.layerType&&(-1<b.indexOf("Editing")||-1<b.indexOf("Update"))&&-1<b.indexOf("Create")&&-1<b.indexOf("Delete")&&this._isValidProjectLayer(a)&&d.push({value:a.id,
label:a.title}))}));return{costingGeometryLayerOptions:c,projectLayerOptions:d}},_isValidProjectLayer:function(a){var c,d,b,p,e;p=["esriFieldTypeDouble","esriFieldTypeSingle"];a=a.layerObject.fields;b=[];for(c in a)e=a[c].type,d=a[c].name.toUpperCase(),("PROJECTNAME"===d&&"esriFieldTypeString"===e||"DESCRIPTION"===d&&"esriFieldTypeString"===e||"TOTALASSETCOST"===d&&-1<p.indexOf(e)||"GROSSPROJECTCOST"===d&&-1<p.indexOf(e)||"esriFieldTypeGlobalID"===e)&&b.push(d);return 5===b.length?!0:!1},_hasGlobalIDField:function(a){var c;
c=!1;(a=a.layerObject.fields||a.fields)&&0<a.length&&l.some(a,g.hitch(this,function(a){if("esriFieldTypeGlobalID"===a.type)return c=!0}));return c},_populateTablesForDropDown:function(a){var c,b;c=[this._defaultSelectOption];b=[this._defaultSelectOption];a&&0<a.length&&l.forEach(a,g.hitch(this,function(a){a&&this._isValidTable(a,"projectAssets")&&c.push({value:a.id||a.name,label:a.title||a.name});a&&this._isValidTable(a,"projectMultiplier")&&b.push({value:a.id||a.name,label:a.title||a.name})}));this.projectAssetsTable.addOption(g.clone(c));
this.projectMultiplierTable.addOption(g.clone(b));this._setSelectedValuesInTables()},_isValidTable:function(a,c){var b,h,p=[];b=!1;(a=a.fields)&&0<a.length&&l.some(a,g.hitch(this,function(a){h=a.name.toUpperCase();if("projectAssets"===c&&this._assetsTableRequiredFields[h]&&-1<this._assetsTableRequiredFields[h].indexOf(a.type)&&!a.domain){if(p.push(a.name),p.length===Object.keys(this._assetsTableRequiredFields).length)return b=!0}else if("projectMultiplier"===c&&this._multiplierTableRequiredFields[h]&&
-1<this._multiplierTableRequiredFields[h].indexOf(a.type)&&!a.domain&&(p.push(a.name),p.length===Object.keys(this._multiplierTableRequiredFields).length))return b=!0}));return b},_setSelectedValuesInTables:function(){var a;this.config.assetTable?(a=this.layerInfosObj.getTableInfoById(this.config.assetTable))&&a.layerObject?(this.projectAssetsTable.set("value",this.config.assetTable),this._prevProjectAssetsTableValue=this.config.assetTable):(this.projectAssetsTable.set("value",""),this._prevProjectAssetsTableValue=
""):(this.projectAssetsTable.set("value",""),this._prevProjectAssetsTableValue="");this.config.multiplierAdditionalCostTable?(a=this.layerInfosObj.getTableInfoById(this.config.multiplierAdditionalCostTable))&&a.layerObject?(this.projectMultiplierTable.set("value",this.config.multiplierAdditionalCostTable),this._prevProjectMultiplierTableValue=this.config.multiplierAdditionalCostTable):(this.projectMultiplierTable.set("value",""),this._prevProjectMultiplierTableValue=""):(this.projectMultiplierTable.set("value",
""),this._prevProjectMultiplierTableValue="")},_setConfig:function(){var a;this.config.costingGeometryLayer&&this.layerInfosObj.getLayerInfoById(this.config.costingGeometryLayer)&&(a=this.layerInfosObj.getLayerInfoById(this.config.costingGeometryLayer).layerObject);a?(this.costingGeometryLayerDropDown.set("value",this.config.costingGeometryLayer),this._prevCostingGeometryLayerValue=this.config.costingGeometryLayer,this._createCostingGeometryLayerFieldOptions(a,this._costingGeometryLayerFieldOptions),
this.fieldToLabelGeography.options=[],this.fieldToLabelGeography.options.length=0,this.config.geographyField?(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions[this.config.costingGeometryLayer].options),this.fieldToLabelGeography.set("disabled",!1)):(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",!0))):(this.costingGeometryLayerDropDown.set("value",""),this._prevCostingGeometryLayerValue=
"",this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",!0),this.fieldToLabelGeography.set("value",""));this.config.projectLayer&&this.projectLayerDropDown&&1<this.projectLayerDropDown.options.length?(this.projectLayerDropDown.set("value",this.config.projectLayer),this._prevProjectLayerValue=this.config.projectLayer):(this.projectLayerDropDown.set("value",""),this._prevProjectLayerValue="");this.config.pointLayerCentroid&&
this.pointLayerCentroidDropDown&&1<this.pointLayerCentroidDropDown.options.length?(this.pointLayerCentroidDropDown.set("value",this.config.pointLayerCentroid),this._prevPointLayerCentroidValue=this.config.pointLayerCentroid):(this.pointLayerCentroidDropDown.set("value",""),this._prevPointLayerCentroidValue="")},_attachingEvents:function(){this.own(k(this.costingGeometryLayerDropDown,"change",g.hitch(this,function(a){a!==this.costingGeometryLayerDropDown.value&&this.costingGeometryLayerDropDown.set("value",
a);""===a||this._costingGeometryLayerFieldOptions[a]||(a=this.layerInfosObj.getLayerInfoById(a))&&a.layerObject&&(a=a.layerObject,this._createCostingGeometryLayerFieldOptions(a,this._costingGeometryLayerFieldOptions));this._onDropdownChange(this.costingGeometryLayerDropDown,"costingGeometryLayer","layer")})));this.own(k(this.projectLayerDropDown,"change",g.hitch(this,function(){this._onDropdownChange(this.projectLayerDropDown,"projectLayer","layer");this._enableOrDisablePointLayerDropdown()})));this.own(k(this.projectAssetsTable,
"change",g.hitch(this,function(){this._onDropdownChange(this.projectAssetsTable,"projectAssets","table")})));this.own(k(this.projectMultiplierTable,"change",g.hitch(this,function(){this._onDropdownChange(this.projectMultiplierTable,"projectMultiplier","table")})));this.own(k(this.pointLayerCentroidDropDown,"change",g.hitch(this,function(){this._onDropdownChange(this.pointLayerCentroidDropDown,"pointLayerCentroidDropdown","layer")})))},_onDropdownChange:function(a,b,d){("layer"===d?this._validateDuplicateSelection(a,
this.projectLayerDropDown,this.costingGeometryLayerDropDown):this._validateDuplicateSelection(a,this.projectAssetsTable,this.projectMultiplierTable))?this._setNewDropdownValue(a,b):this._restorePreviousDropdownValue(a,b)},_validateDuplicateSelection:function(a,b,d){return a.value&&b.value===d.value?(a=n.substitute(this.nls.projectSettings.errorMessages.duplicateLayerSelection,{layerName:g.trim(a.tableNode.innerText)}),this.emit("onDuplicateLayerSelect",a),!1):!0},_setNewDropdownValue:function(a,b){switch(b){case "costingGeometryLayer":this._onCostingGeometryLayerDropDownChange();
this._prevCostingGeometryLayerValue!==a.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevCostingGeometryLayerValue,currentSelectedLayerId:a.value}),this.emit("onGeographyFieldChange",this.fieldToLabelGeography.get("value"),this.costingGeometryLayerDropDown.get("value")),this._prevCostingGeometryLayerValue=a.value);break;case "projectLayer":this._onProjectLayerDropDownChange();this._prevProjectLayerValue!==a.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevProjectLayerValue,
currentSelectedLayerId:a.value}),this._prevProjectLayerValue=a.value);break;case "pointLayerCentroidDropdown":this._prevPointLayerCentroidValue!==a.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevPointLayerCentroidValue,currentSelectedLayerId:a.value}),this._prevPointLayerCentroidValue=a.value);break;case "projectAssets":this._prevProjectAssetsTableValue=a.value;break;case "projectMultiplier":this._prevProjectMultiplierTableValue=a.value}},_restorePreviousDropdownValue:function(a,b){switch(b){case "costingGeometryLayer":a.set("value",
this._prevCostingGeometryLayerValue);break;case "projectLayer":a.set("value",this._prevProjectLayerValue);break;case "projectAssets":a.set("value",this._prevProjectAssetsTableValue);break;case "projectMultiplier":a.set("value",this._prevProjectMultiplierTableValue);break;case "pointLayerCentroidDropdown":a.set("value",this._prevPointLayerCentroidValue)}},_createCostingGeometryLayerFieldOptions:function(a,b){var c;c=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble",
"esriFieldTypeString"];a&&a.fields&&0<a.fields.length?(b[a.id]||(b[a.id]={},b[a.id].options=[]),l.forEach(a.fields,g.hitch(this,function(d){-1<c.indexOf(d.type)&&b[a.id].options.push({value:d.name,label:d.alias?d.alias:d.name})}))):b[a.id].options.push([this._defaultSelectOption])},_onCostingGeometryLayerDropDownChange:function(){var a;this.fieldToLabelGeography.options=[];this.fieldToLabelGeography.options.length=0;a=this.costingGeometryLayerDropDown.value;""!==a?(this.fieldToLabelGeography.set("options",
this._costingGeometryLayerFieldOptions[a].options),this.fieldToLabelGeography.set("disabled",!1)):(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",!0));this.config.geographyField?this.fieldToLabelGeography.set("value",this.config.geographyField,!1):this.fieldToLabelGeography.set("value","",!1)},_onProjectLayerDropDownChange:function(){var a,b;a={idFieldOptions:[this._defaultSelectOption],stringFieldOptions:[this._defaultSelectOption],
costFieldOptions:[this._defaultSelectOption]};this.projectLayerDropDown.value&&(b=this.layerInfosObj.getLayerInfoById(this.projectLayerDropDown.value))&&b.layerObject&&(b=b.layerObject,a=this._getTableDropdownOptions(b.fields,a));this.emit("onProjectLayerSelected",this.projectLayerDropDown.value)},_getTableDropdownOptions:function(a,b){var d,c,p;d=["esriFieldTypeOID","esriFieldTypeGlobalID"];c=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];l.forEach(a,
g.hitch(this,function(a){p={value:a.name,label:a.alias?a.alias:a.name};-1<d.indexOf(a.type)?b.idFieldOptions.push(p):-1<c.indexOf(a.type)?b.costFieldOptions.push(p):"esriFieldTypeString"===a.type&&b.stringFieldOptions.push(p)}));return b},_isValidFieldType:function(a){var b,d=!1;l.some(a.fields,g.hitch(this,function(a){b=a.name.toUpperCase();if("PROJECTID"===b&&"esriFieldTypeGUID"===a.type)return d=!0;d=!1}));return d},_isEditable:function(a){a=a.capabilities;return(-1<a.indexOf("Editing")||-1<a.indexOf("Update"))&&
-1<a.indexOf("Create")&&-1<a.indexOf("Delete")?!0:!1},_populatePointLayerDropdown:function(a){var b=[];b.push(this._defaultSelectOption);this._getValidPointLayersOptions(b,a);this.pointLayerCentroidDropDown.set("options",g.clone(b));this._prevPointLayerCentroidValue=this.projectLayerDropDown.getValue();this._enableOrDisablePointLayerDropdown()},_getValidPointLayersOptions:function(a,b){l.forEach(b,g.hitch(this,function(b){b.hasOwnProperty("layerObject")&&(b=b.layerObject,b.hasOwnProperty("geometryType")&&
"esriGeometryPoint"===b.geometryType&&this._isEditable(b)&&this._isValidFieldType(b)&&"Feature Layer"===b.type&&a.push({value:b.id,label:b.title||b.name}))}))},_enableOrDisablePointLayerDropdown:function(){var a;a=this.projectLayerDropDown.getValue();""!==a&&null!==a&&void 0!==a?this.pointLayerCentroidDropDown.set("disabled",!1):(this.pointLayerCentroidDropDown.set("disabled",!0),this.pointLayerCentroidDropDown.set("value",""))}})})},"widgets/CostAnalysis/setting/LayerSettings":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented jimu/dijit/Message dijit/_WidgetsInTemplateMixin dojo/text!./LayerSettings.html dojo/_base/lang jimu/dijit/SimpleTable jimu/dijit/Popup dojo/_base/array dojo/query dijit/registry dojo/dom-class dojo/dom-construct dojo/_base/html dojo/on dojo/dom-attr ./AttributeSettings".split(" "),
function(v,r,w,q,g,k,l,m,n,f,e,b,a,c,d,h,p,A){return v([r,w,g],{templateString:k,attributeSettingPopup:null,baseClass:"jimu-widget-cost-analysis-layer-settings",_layerSettingsTable:null,constructor:function(a){l.mixin(this,a)},postMixInProperties:function(){this.nls.common={};l.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.attributeSettingPopup=this._layerSettingsTable=null},setConfig:function(){this._filterLayers()},getConfig:function(){return this._getUpdateLayerSettings()},
_getUpdateLayerSettings:function(){var a;if(this._layerSettingsTable)return a=this._layerSettingsTable.getData(),a=this._getSelectedFields(a)},_createlayerSettingsGrid:function(){this._layerSettingsTable=new m({fields:[{name:"editable",title:this.nls.layerSettings.EditableLayerHeaderTitle,type:"checkbox",editable:!1,width:"16%"},{name:"title",title:this.nls.layerSettings.layerNameHeaderTitle,type:"text",editable:!1,width:"64%"},{name:"fieldPicker",title:this.nls.layerSettings.fieldPickerHeaderTitle,
type:"empty",editable:!1,hidden:!0,width:"0%"},{name:"selectable",title:"",type:"checkbox",editable:!1,hidden:!0,width:"0%"},{name:"id",title:"",type:"text",editable:!1,hidden:!0,width:"0%"},{name:"url",title:"",type:"text",editable:!1,hidden:!0,width:"0%"},{name:"attributeSetting",title:this.nls.layerSettings.attributeSettingHeaderTitle,type:"empty",editable:!1,width:"20%"}],selectable:!0});this._layerSettingsTable.placeAt(this.layerSettingsTableNode);d.setStyle(this._layerSettingsTable.domNode,
{height:"100%"});this._layerSettingsTable.startup()},onLayerSettingChange:function(a){var b={};if(a=this._layerSettingsTable.getRowData(a))b.layerId=a.id,b.editable=null===a.editable?!1:a.editable;this.emit("onLayerSettingUpdate",b)},_filterLayers:function(){var b,c,d=[];b=this.map.itemInfo.itemData.operationalLayers;0===b.length?a.remove(this.noAssetLayersAvailable,"esriCTHidden"):(a.add(this.noAssetLayersAvailable,"esriCTDisabled"),this._createlayerSettingsGrid(),this._setTableHeadTooltip(),d=[this.config.projectSettings.costingGeometryLayer||
"",this.config.projectSettings.projectLayer||"",this.config.projectSettings.pointLayerCentroid||""],this.config&&0<this.config.layerSettings.length&&f.forEach(this.config.layerSettings,l.hitch(this,function(a){(c=this.map.getLayer(a.id))&&(!c.errors||0>=c.errors.length)&&(d.push(a.id),c.editable=this._checkEditCapabilities(c),this._createFieldsRows(a,c.editable))})),f.forEach(b,l.hitch(this,function(a){a.errors&&!(0>=a.errors.length)||"ArcGISFeatureLayer"!==a.layerType||a.hasOwnProperty("featureCollection")||
-1!==d.indexOf(a.id)||(a.selectable=!0,a.editable=this._checkEditCapabilities(a.layerObject),this._createFieldsRows(a,a.editable))})));this.updateAttributeButtonState(this.config.projectSettings.projectLayer)},_checkEditCapabilities:function(a){return a&&a.capabilities&&-1!==a.capabilities.indexOf("Delete")&&-1!==a.capabilities.indexOf("Create")&&-1!==a.capabilities.indexOf("Update")&&a.globalIdField?!0:!1},_getInvalidLayersMsg:function(a){var b,c=[];b="";a=this.layerInfosObj.getLayerInfoById(a).layerObject;
a.capabilities?(-1===a.capabilities.indexOf("Create")&&c.push("Create"),-1===a.capabilities.indexOf("Update")&&c.push("Update"),-1===a.capabilities.indexOf("Delete")&&c.push("deleteColumnLabel")):c=["Create","Update","deleteColumnLabel"];0<c.length&&(b=this.nls.layerSettings.missingCapabilitiesMsg,b+="\x3cbr/\x3e",f.forEach(c,l.hitch(this,function(a){b="deleteColumnLabel"===a?b+("\x3cli\x3e"+this.nls.layerSettings[a]+"\x3c/li\x3e"):b+("\x3cli\x3e"+this.nls.layerSettings[a.toLowerCase()]+"\x3c/li\x3e")})));
a.globalIdField||(b+="\x3cbr/\x3e",b+=this.nls.layerSettings.missingGlobalIdMsg);return b},_enableDisableEditableCheckbox:function(d,f,g){var u,z;u=e(".simple-table-cell ",d)[0];u.children[0]&&(z=b.byNode(u.children[0]));g?z.setStatus(!0):(p.set(z.domNode,"title",this.nls.layerSettings.disableEditableCheckboxTooltip),z.setValue(!1),z.setStatus(!1),a.add(z.domNode,"jimu-float-leading"),d.errorDiv||(f=this._getInvalidLayersMsg(f.id),d.errorDiv=c.create("div",{"class":"esriCTFieldError"},u),p.set(d.errorDiv,
"errorMessage",f),d.errorSpan=c.create("span",{"class":"jimu-icon jimu-icon-error"},d.errorDiv),this.own(h(d.errorDiv,"click",l.hitch(this,function(a){a=p.get(a.currentTarget,"errorMessage");q({message:a})})))))},_createFieldsRows:function(a,c){var d,u,p;a.editable&&(a.selectable=a.editable);d=this._layerSettingsTable.addRow({title:a.title?a.title:a.name,editable:this._existingInLayerSettings(a.id)?a.editable:!1,selectable:a.selectable,id:a.id,url:a.url});d.tr.layerInfo=this.map._layers[a.id];d.tr.attributeSettingFields=
a.attributeSetting;p=e(".jimu-checkbox",d.tr.children[3]);u=e(".jimu-checkbox",d.tr.children[0]);a.editable&&this._setCheckBoxState(u[0],p[0]);setTimeout(l.hitch(this,function(){this._setHeaderCheckBoxState()}),200);b.byNode(u[0]).set("checked",this._existingInLayerSettings(a.id)?a.editable:!1);this.own(h(b.byNode(u[0]),"change",l.hitch(this,function(b){this._setCheckBoxState(u[0],p[0]);this._setHeaderCheckBoxState();this.onLayerSettingChange(u[0].parentElement.parentElement);this._addAttributeSettingIcon(d.tr,
a,b)})));this._enableDisableEditableCheckbox(d.tr,a,c);this._addAttributeSettingIcon(d.tr,a,c)},_addAttributeSettingIcon:function(b,d,p){var u;u=e(".simple-table-cell",b)[6];c.empty(u);u&&(p?(b.attributeSetting=c.create("div",{"class":"esriCTAttributeSettingIcon"},u),this.projectLayer&&""!==this.projectLayer||a.add(b.attributeSetting,"esriCTAttributeSettingDisableIcon"),this.own(h(b.attributeSetting,"click",l.hitch(this,function(c){a.contains(c.currentTarget,"esriCTAttributeSettingDisableIcon")||
(c=b.layerInfo,this._curRow=b,c||(c={selectedFields:null},b.layerInfo=c),c.layerLabel="",c.layer=this.layerInfosObj.getLayerInfoById(d.id),this._createAttributeSettingsPopup({nls:this.nls,featureLayer:c.layer.layerObject,selectedFields:b.attributeSettingFields,layerGridInfo:c,config:this.config,projectLayer:this.projectLayer}))})))):b.attributeSetting=c.create("div",{"class":"esriCTAttributeSettingDisableIcon"},u))},updateAttributeButtonState:function(b){var c=!1,d=e(".esriCTAttributeSettingIcon",
this.domNode);b&&""!==b||(c=!0);d&&0<d.length&&f.forEach(d,l.hitch(this,function(b){c?a.add(b,"esriCTAttributeSettingDisableIcon"):a.remove(b,"esriCTAttributeSettingDisableIcon")}))},_createAttributeSettingsPopup:function(a){var b,d,p;a.map=this.map;d=c.create("button",{title:this.nls.common.ok});d.label=this.nls.common.ok;p=c.create("button",{title:this.nls.common.cancel});p.label=this.nls.common.cancel;this._attributeSettings=new A(a);this._attributeSettings.startup();b=new n({titleLabel:this.nls.layerSettings.attributeSettingsPopupTitle,
content:this._attributeSettings,width:830,height:500,autoHeight:!0,buttons:[d,p]});d.onClick=l.hitch(this,function(){this._curRow.attributeSettingFields=this._attributeSettings.okButtonClicked();this._attributeSettings.destroy();this._attributeSettings=null;b.close()});p.onClick=l.hitch(this,function(){this._attributeSettings.destroy();this._attributeSettings=null;b.close()})},_setCheckBoxState:function(d,c){d=b.byNode(d);c=b.byNode(c);d.checked?(c.set("checked",!0),c.set("status",!1),c.set("disable",
!0),a.add(c.domNode,"jimu-state-disabled")):(c.set("checked",!0),c.set("status",!0),c.set("disable",!1),a.remove(c.domNode,"jimu-state-disabled"));a.add(c.domNode.children[0],"checked")},_setHeaderCheckBoxState:function(){var c,d,p=!0,u;c=e(".simple-table-title .checkbox",this.domNode)[1];u=e(".simple-table-title .jimu-checkbox",this.domNode)[1];f.some(this._layerSettingsTable.getRows(),l.hitch(this,function(a){d=e("td.selectable .checked",a);if(0===d.length)return p=!1,!0}));p?(a.add(c,"checked"),
b.byNode(u).set("checked",!0)):(a.remove(c,"checked"),b.byNode(u).set("checked",!1))},updateLayerSettingsTable:function(a){var b=this._layerSettingsTable.getData(),c;a.lastSelectedId&&(c=this.layerInfosObj.getLayerInfoById(a.lastSelectedId))&&c.layerObject&&(c=c.layerObject,c.editable=!1,c.selectable=!0,this._createFieldsRows(c,this._checkEditCapabilities(c)));a.currentSelectedLayerId&&f.some(b,l.hitch(this,function(b,c){if(b.id===a.currentSelectedLayerId)return this._layerSettingsTable.deleteRow(this._layerSettingsTable.tbody.rows[c]),
!0}))},_getFieldsOptionsObj:function(a){var b=[],c,d;d=a.fields;c=["esriFieldTypeString"];b.push({label:this.nls.layerSettings.selectLabel,value:""});f.forEach(d,l.hitch(this,function(d){d.editable&&!d.domain&&-1<c.indexOf(d.type)&&37<d.length&&d.name!==a.typeIdField&&b.push({label:d.alias||d.name,value:d.name})}));return b},_getSelectedFields:function(a){var b;b=this._layerSettingsTable.getRows();f.forEach(b,l.hitch(this,function(b,c){null===a[c].editable&&(a[c].editable=!1);a[c].attributeSetting=
b.attributeSettingFields;delete a[c].fieldPicker}));return a},_setTableHeadTooltip:function(){var a;a=e(".simple-table-thead th",this.domNode);a.length&&(p.set(a[0],"title",this.nls.layerSettings.EditableLayerHeaderTooltip),p.set(a[1],"title",this.nls.layerSettings.fieldPickerHeaderTooltip),p.set(a[2],"title",this.nls.layerSettings.layerNameHeaderTooltip),p.set(a[3],"title",this.nls.layerSettings.SelectableLayerHeaderTooltip))},_existingInLayerSettings:function(a){var b=!1;0<this.config.layerSettings.length&&
this.config.layerSettings.filter(l.hitch(this,function(c){c.id===a&&(b=!0)}));return b}})})},"widgets/CostAnalysis/setting/AttributeSettings":function(){define("dojo/_base/declare jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dojo/_base/lang dojo/dom-class dijit/_WidgetsInTemplateMixin dojo/text!./AttributeSettings.html dojo/on dojo/query dijit/form/Select dojo/_base/array".split(" "),function(v,r,w,q,g,k,l,m,n,f,e,b){return v([w,q,l],{templateString:m,attributeSettingPopup:null,baseClass:"jimu-widget-cost-analysis-attribute-settings",
_layerSettingsTable:null,_projectLayer:"",_entireFieldsArr:[],_selectedFieldsArr:[],_entireFieldObj:[],_projectFieldTypes:[],validFieldTypes:"esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeGUID".split(" "),constructor:function(a){g.mixin(this,a)},postMixInProperties:function(){this.nls.common={};g.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._entireFieldsArr=[];this._selectedFieldsArr=
[];this._entireFieldObj=[];this._projectFieldTypes=[];this._layerSettingsTable=this.attributeSettingPopup=null;this._projectLayer=this.config.projectSettings.projectLayer||this.projectLayer||"";this._projectLayerAttributeStore="";this.inherited(arguments);this._init()},_init:function(){this._clearData();this._fetchProjectLayerFieldTypes();this._addValidFields();this._createAttributeSettingsFieldsTable();this._attachEventsToElement();this._displayPreviousConfiguredFields()},_clearData:function(){this._entireFieldsArr=
[];this._selectedFieldsArr=[];this._projectFieldTypes=[]},_fetchProjectLayerFieldTypes:function(){var a;a=this.map.getLayer(this._projectLayer).fields;b.forEach(a,g.hitch(this,function(a){-1<this.validFieldTypes.indexOf(a.type)&&-1===this._projectFieldTypes.indexOf(a.type)&&this._projectFieldTypes.push(a.type)}))},_displayPreviousConfiguredFields:function(){this.selectedFields&&0<this.selectedFields.length&&(b.forEach(this.selectedFields,g.hitch(this,function(a){this._configuredField=a;this.attributeSettingsAddFields.click()})),
this._configuredField=null)},_addValidFields:function(){b.forEach(this.featureLayer.fields,g.hitch(this,function(a){this._entireFieldObj[a.name]=a;"esriFieldTypeGUID"===a.type?(this._entireFieldsArr.push(a.name),this._entireFieldObj[a.name]=g.clone(a),this.selectedFields&&this.selectedFields[a.name]&&(this._entireFieldObj[a.name].label=this.selectedFields[a.name].label)):-1<this.validFieldTypes.indexOf(a.type)&&-1<this._projectFieldTypes.indexOf(a.type)&&a.editable&&(this._entireFieldsArr.push(a.name),
this._entireFieldObj[a.name]=g.clone(a),this.selectedFields&&this.selectedFields[a.name]&&(this._entireFieldObj[a.name].label=this.selectedFields[a.name].label))}));0===this._entireFieldsArr.length&&this._disableAddFieldButton()},_disableAddFieldButton:function(){this._selectedFieldsArr.length===this._entireFieldsArr.length&&k.add(this.attributeSettingsAddFields,"esriCTDisabled")},_addFieldsRow:function(a){var b,d,h;b=this._attributeSettingsTable.addRow({});b.success&&b.tr&&(b=b.tr,h=f(".simple-table-cell",
b),d=h[0],h=h[1],this._addFieldDropdown(a,d,b),this._addProjectFieldDropdown(h,b))},_deleteFieldRow:function(a){var b;k.remove(this.attributeSettingsAddFields,"esriCTDisabled");b=this._selectedFieldsArr.indexOf(a.fieldDropdownInstance.value);-1<b&&this._selectedFieldsArr.splice(b,1);this._addSelectedFieldInOtherDropdown(a.fieldDropdownInstance.value,null)},_addFieldDropdown:function(a,b,d){a=this._getDistinctFieldsOptionsObj(a);a=new e({"class":"esriCTFieldChooserDropdown",options:a});a.placeAt(b);
a.startup();this._configuredField&&a.set("value",this._configuredField.layerField,!1);d.fieldDropdownInstance=a;this.own(n(a,"change",g.hitch(this,function(a){var b;b=this._selectedFieldsArr[d.rowIndex];this._selectedFieldsArr[d.rowIndex]=a;this._addSelectedFieldInOtherDropdown(b,a);this._removeSelectedFieldFromOtherDropdown(a);d.projectFieldDropdownInstance.set("options",this._getProjectLayerFields(d));d.projectFieldDropdownInstance.set("value",d.projectFieldDropdownInstance.options[0])})));this._selectedFieldsArr.push(a.value);
this._removeSelectedFieldFromOtherDropdown(a.value);this._disableAddFieldButton()},_addProjectFieldDropdown:function(a,b){var d;d=this._getProjectLayerFields(b);d=new e({"class":"esriCTFieldChooserDropdown",options:d});d.placeAt(a);d.startup();this._configuredField&&d.set("value",this._configuredField.projectField,!1);b.projectFieldDropdownInstance=d;this.own(n(d,"change",g.hitch(this,function(){})))},_getProjectLayerFields:function(a){var c=[],d;a=a.fieldDropdownInstance.getValue();d=this._getFieldType(a);
this._projectLayer&&""!==this._projectLayer&&(a=this.map.getLayer(this._projectLayer).fields,c=[],b.forEach(a,g.hitch(this,function(a){d===a.type?c.push({label:a.alias||a.name,value:a.name}):"esriFieldTypeString"===d&&"esriFieldTypeGlobalID"===a.type?c.push({label:a.alias||a.name,value:a.name}):"esriFieldTypeGUID"!==d||"esriFieldTypeGlobalID"!==a.type&&"esriFieldTypeGUID"!==a.type||c.push({label:a.alias||a.name,value:a.name})})));return c},_getFieldType:function(a){return this.featureLayer.getField(a).type},
_getDistinctFieldsOptionsObj:function(a){var c=[];b.forEach(a,g.hitch(this,function(a){c.push({label:this._entireFieldObj[a].alias||this._entireFieldObj[a].name,value:a})}));return c},_removeSelectedFieldFromOtherDropdown:function(a){var c;c=this._attributeSettingsTable.getRows();b.forEach(c,g.hitch(this,function(b){a!==b.fieldDropdownInstance.value&&b.fieldDropdownInstance.removeOption(a)}))},_addSelectedFieldInOtherDropdown:function(a,c){var d;d=this._attributeSettingsTable.getRows();b.forEach(d,
g.hitch(this,function(b){c!==b.fieldDropdownInstance.value&&b.fieldDropdownInstance.addOption({label:this._entireFieldObj[a].alias||this._entireFieldObj[a].name,value:a})}))},okButtonClicked:function(){var a,c;c=[];a=this._attributeSettingsTable.getRows();0===a.length?this.selectedFields=null:(b.forEach(a,g.hitch(this,function(a){c.push({layerField:a.fieldDropdownInstance.value,projectField:a.projectFieldDropdownInstance.value})})),this.selectedFields=c);return this.selectedFields},_getDistinctFields:function(a,
b){return a.filter(function(a){return 0>b.indexOf(a)})},_attachEventsToElement:function(){this.own(n(this.attributeSettingsAddFields,"click",g.hitch(this,function(){var a;k.contains(this.attributeSettingsAddFields,"esriCTDisabled")||(a=this._getDistinctFields(this._entireFieldsArr,this._selectedFieldsArr),this._addFieldsRow(a))})));this.own(n(this._attributeSettingsTable,"row-delete",g.hitch(this,function(a){this._deleteFieldRow(a)})))},onOkButtonClicked:function(){this.parentNode.attributeSettingPopup=
this.attributeSettingPopup;this.attributeSettingPopup.hide()},onCancelButtonClicked:function(){this.attributeSettingPopup.hide()},_createAttributeSettingsFieldsTable:function(){this._attributeSettingsTable=new r({fields:[{name:"layerAttributes",title:this.nls.layerSettings.layerAttributesHeaderTitle,type:"empty",editable:!1,width:"40%"},{name:"projectLayerAttributes",title:this.nls.layerSettings.projectLayerAttributesHeaderTitle,type:"empty",editable:!1,width:"40%"},{name:"Delete",title:this.nls.layerSettings.deleteColumnLabel,
type:"actions",actions:["delete"],width:"20%"}],selectable:!0});this._attributeSettingsTable.placeAt(this.attributeSettingsTableNode);this._attributeSettingsTable.startup()}})})},"widgets/CostAnalysis/setting/CostingInfo":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./CostingInfo.html dojo/on dojo/dom-construct dojo/_base/lang dojo/_base/array ./ManageScenarios ./CostingTemplate esri/tasks/query esri/tasks/QueryTask dojo/Deferred dojo/string dojo/dom-class dijit/form/CheckBox".split(" "),
function(v,r,w,q,g,k,l,m,n,f,e,b,a,c,d,h){return v([r,w,q],{templateString:g,_manageScenario:null,totalScenariosCollection:[],costingTemplate:{},_scenarioOptions:[],_geographyOptions:[],costingInfoData:{},_configuredLayers:[],baseClass:"jimu-widget-cost-analysis-costing-info",constructor:function(a){m.mixin(this,a)},postMixInProperties:function(){this.nls.common={};m.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.costingTemplate={};this._manageScenario=null;this.totalScenariosCollection=
[];this._scenarioOptions=[];this._geographyOptions=[];this.costingInfoData={};this._configuredLayers=[];this.inherited(arguments);this._setUpdateEquationCheckBoxState();for(var a in this.config.layerSettings)this.config.layerSettings[a].editable&&this._configuredLayers.push(this.config.layerSettings[a].id);this._init();this.own(k(this.btnManageScenarios,"click",m.hitch(this,this._manageScenariosBtnClicked)))},_setUpdateEquationCheckBoxState:function(){this.config&&this.config.hasOwnProperty("updateCostEquationCheckBoxStatus")&&
this.updateCostEquationCheckBox.set("checked",this.config.updateCostEquationCheckBoxStatus)},validate:function(){var a=this._validateCostingInfoTabData();return a.isValid?{isValid:!0}:{isValid:!1,errorMessage:a.errorMessage}},getConfig:function(){return{costingInfoData:this.costingInfoData,scenarios:this.totalScenariosCollection,updateCostEquationCheckBoxStatus:this.updateCostEquationCheckBox.get("checked")}},_init:function(){this._geographyOptions=[{label:this.nls.costingInfo.noneValue,value:""}];
this.config.projectSettings&&""!==this.config.projectSettings.costingGeometryLayer&&void 0!==this.config.projectSettings.costingGeometryLayer?this.getGeographyOptions().then(m.hitch(this,function(){this._createCostingTemplate()})):this.config.layerSettings&&this.config.layerSettings.length&&this._createCostingTemplate()},_createCostingTemplate:function(){var a,b;this._getScenarioOptions(this.config.scenarios);a=this.map.itemInfo.itemData.operationalLayers;this._showHideNoLayerMessage(a.length);if(0<
Object.keys(this.config.costingInfoSettings).length)for(b in this.config.costingInfoSettings)if(-1!==this._configuredLayers.indexOf(b)){var c=this._getOperationalLayer(a,b);c&&(!c.errors||0>=c.errors.length)&&this._createCostingTemplateObj(c)}},_createCostingTemplateObj:function(a){0===this._scenarioOptions.length&&this._scenarioOptions.push({label:this.nls.costingInfo.noneValue,value:""});this.costingTemplate[a.id]=new e({nls:this.nls,map:this.map,config:this.config,layer:a,scenarios:this._scenarioOptions,
geographies:this._geographyOptions},l.create("div",{},this.costingTemplateContainer))},_getOperationalLayer:function(a,b){var c;n.some(a,m.hitch(this,function(a){if(a.id===b)return c=a,!0}));return c},_manageScenariosBtnClicked:function(){this._manageScenario=new f({nls:this.nls,map:this.map,config:this.config,existingScenarios:this.totalScenariosCollection});k(this._manageScenario,"okButtonClicked",m.hitch(this,function(a){this._manageScenario.destroy();this._getScenarioOptions(a)}))},_checkEditCapabilities:function(a){return a&&
a.capabilities&&"string"===typeof a.capabilities&&-1!==a.capabilities.indexOf("Delete")&&-1!==a.capabilities.indexOf("Create")&&-1!==a.capabilities.indexOf("Update")&&a.globalIdField?!0:!1},_getScenarioOptions:function(a){var b,c;this._scenarioOptions=[{label:this.nls.costingInfo.noneValue,value:""}];this.totalScenariosCollection=[];n.forEach(a,m.hitch(this,function(a){b="object"===typeof a?a.field:a;this._scenarioOptions.push({label:b,value:b});this.totalScenariosCollection.push(b)}));for(c in this.costingTemplate)this.costingTemplate[c].updateScenarioOptions(this._scenarioOptions)},
getGeographyOptions:function(d,e){var p,h;p=new c;e||(d=this.config.projectSettings.geographyField,e=this.config.projectSettings.costingGeometryLayer);""!==e&&this.layerInfosObj.getLayerInfoById(e)?(e=this.map._layers[e],e=new a(e.url),h=new b,h.outFields=[d],h.returnDistinctValues=!0,h.returnGeometry=!1,h.where="1\x3d1",e.execute(h,m.hitch(this,function(a){this._geographyQueryTaskComplete(a,d);p.resolve(this._geographyOptions)}),m.hitch(this,function(){this._geographyOptions=[];this._geographyOptions.push({label:this.nls.costingInfo.noneValue,
value:""});p.resolve(this._geographyOptions)}))):(this._geographyOptions=[],this._geographyOptions.push({label:this.nls.costingInfo.noneValue,value:""}),p.resolve(this._geographyOptions));return p.promise},_geographyQueryTaskComplete:function(a,b){this._geographyOptions=[{label:this.nls.costingInfo.noneValue,value:""}];n.forEach(a.features,m.hitch(this,function(a){""!==a.attributes[b]&&null!==a.attributes[b]&&this._geographyOptions.push({label:isNaN(a.attributes[b])?a.attributes[b]:a.attributes[b].toString(),
value:a.attributes[b]})}))},_validateCostingInfoTabData:function(){var a,b,c,e,h,u,f;this.costingInfoData={};for(a in this.costingTemplate)if(u=[],f=[],this.costingTemplate[a]){this.costingInfoData[a]=this.costingTemplate[a].getUpdatedCostingInfo();e=this.costingInfoData[a].length;for(b in this.costingInfoData[a]){h=this.costingInfoData[a][b];-1===f.indexOf(h.featureTemplate)&&f.push(h.featureTemplate);""===h.scenario&&""===h.geography&&-1===u.indexOf(h.featureTemplate)&&u.push(h.featureTemplate);
if(!this.costingTemplate[a].validateCostEquation(h.costEquation))return{isValid:!1,errorMessage:d.substitute(this.nls.costingInfo.requiredCostEquation,{templateName:h.featureTemplate,layerName:this.costingTemplate[a].layer.title})};if(1<e)for(c=parseInt(b,0)+1;c<e;c++){var t;t=this.costingInfoData[a][c];if(h.featureTemplate===t.featureTemplate&&h.scenario===t.scenario&&h.geography===t.geography)return{isValid:!1,errorMessage:d.substitute(this.nls.costingInfo.duplicateTemplateMessage,{layerName:this.costingTemplate[a].layer.title,
templateName:h.featureTemplate})}}}e=0;h=f.length;for(e;e<h;e++)if(-1===u.indexOf(f[e]))return{isValid:!1,errorMessage:d.substitute(this.nls.costingInfo.defaultEquationRequired,{templateName:f[e],layerName:this.costingTemplate[a].layer.title})};if(0===this.costingInfoData[a].length)return{isValid:!1,errorMessage:d.substitute(this.nls.costingInfo.noTemplateAvailable,{layerName:this.costingTemplate[a].layer.title})}}return Object.keys(this.costingInfoData).length?{isValid:!0}:{isValid:!1,errorMessage:d.substitute(this.nls.costingInfo.noLayerMessage,
{tabName:this.nls.costingInfo.tabTitle})}},_updateCostingInfoTable:function(a,b){var c,d;a.layerId?c=a.layerId:(d=a.lastSelectedId,c=a.currentSelectedLayerId);Object.keys(a).length&&(d?(this.costingTemplate[c]&&this._deleteCostingInfoLayer(c),d&&(b||this._addCostingInfoLayer(d))):a.editable?b||this._addCostingInfoLayer(c):this.costingTemplate[c]&&this._deleteCostingInfoLayer(c));this._showHideNoLayerMessage(Object.keys(this.costingTemplate).length)},_showHideNoLayerMessage:function(a){0===a?(h.remove(this.noEditableLayersAvailable,
"esriCTHidden"),h.add(this.updateCostEquationChkContainer,"esriCTHidden"),h.add(this.costingTemplateContainer,"esriCTHidden")):(h.add(this.noEditableLayersAvailable,"esriCTHidden"),h.remove(this.updateCostEquationChkContainer,"esriCTHidden"),h.remove(this.costingTemplateContainer,"esriCTHidden"))},_deleteCostingInfoLayer:function(a){this.costingTemplate[a].destroyRecursive();delete this.costingTemplate[a];delete this.config.costingInfoSettings[a]},_addCostingInfoLayer:function(a){n.some(this.map.itemInfo.itemData.operationalLayers,
m.hitch(this,function(b){if(a===b.id&&this._checkEditCapabilities(b.layerObject))return this._createCostingTemplateObj(b),!0}))},onGeographyFieldUpdate:function(a){for(var b in this.costingTemplate)this.costingTemplate[b].updateGeographyOptions(a)},disableUpdateCostEquationChk:function(a){this.updateCostEquationCheckBox.set("disabled",a);a&&this.updateCostEquationCheckBox.set("value",!1)}})})},"widgets/CostAnalysis/setting/ManageScenarios":function(){define("dojo/_base/declare jimu/dijit/Popup jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./ManageScenarios.html dojo/_base/array dojo/_base/lang dojo/on dojo/query dojo/dom-attr".split(" "),
function(v,r,w,q,g,k,l,m,n,f,e,b){return v([q,g,k],{templateString:l,popup:null,_addScenarioTable:null,baseClass:"jimu-widget-cost-analysis-manage-scenarios",constructor:function(a){n.mixin(this,a)},postMixInProperties:function(){this.nls.common={};n.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._addScenarioTable=this.popup=null;this.inherited(arguments);this._init()},_init:function(){this._createManageScenarioTable();this._createManageScenarioPopup();this.own(f(this.addBtnNode,
"click",n.hitch(this,function(){this.scenarioNameNode.set("value",this.scenarioNameNode.get("value").trim());this.scenarioNameNode.validate()?(this._addNewScenario(this._addScenarioTable.getRows().length+1,this.scenarioNameNode.get("value")),this.scenarioNameNode.set("value"," ")):this.scenarioNameNode.focus()})));this.scenarioNameNode.validator=n.hitch(this,this._scenarioNameValidator);this.scenarioNameNode.focus()},_createManageScenarioPopup:function(){this.popup=new r({titleLabel:this.nls.costingInfo.manageScenarioLabel,
content:this.domNode,width:500,height:400,autoHeight:!0,"class":this.baseClass,buttons:[{label:this.nls.common.ok,onClick:n.hitch(this,"onOkButtonClicked")}]})},onOkButtonClicked:function(){this.emit("okButtonClicked",this._addScenarioTable.getData());this.popup.close()},_createManageScenarioTable:function(){this._addScenarioTable=new w({fields:[{name:"id",title:this.nls.costingInfo.srNoLabel,type:"text",editable:!1,width:"100px"},{name:"field",title:this.nls.costingInfo.scenarioNameLabel,type:"text",
editable:!1,width:"200px"},{name:"actions",title:this.nls.costingInfo.deleteLabel,width:"100px",type:"actions",actions:["delete"]}],selectable:!1});this._addScenarioTable.placeAt(this.addScenarioNameTableNode);this._addScenarioTable.startup();this._populateExistingScenarios();this._addScenarioTable.onBeforeRowDelete=n.hitch(this,function(a){var c,d;this._addScenarioTable.deleteRow(a);a=this._addScenarioTable.getRows();m.forEach(a,function(a,f){c=a.cells[0];d=e("div",c)[0];b.set(d,"innerHTML",f+1);
b.set(d,"title",f+1)})})},_populateExistingScenarios:function(){m.forEach(this.existingScenarios,n.hitch(this,function(a,b){this._addNewScenario(b+1,a)}))},_addNewScenario:function(a,b){this._createRow(a,b)},_createRow:function(a,b){this._addScenarioTable.addRow({id:a,field:b})},_scenarioNameValidator:function(a){return""===a?!1:0<this._addScenarioTable.getRowDataArrayByFieldValue("field",a).length?(this.scenarioNameNode.invalidMessage=this.nls.costingInfo.duplicateScenarioName,!1):!0},getUpdatedManageScenarios:function(){this._addScenarioTable.getRows();
e(".simple-table-row",this._addScenarioTable);return[]}})})},"widgets/CostAnalysis/setting/CostingTemplate":function(){define("dojo/_base/declare jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./CostingTemplate.html dojo/_base/array dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on dojo/query dojo/dom-construct dijit/form/Select dijit/form/ValidationTextBox dijit/registry dijit/TooltipDialog dijit/popup ./EditCostEquation ../utils dojo/dom-style".split(" "),
function(v,r,w,q,g,k,l,m,n,f,e,b,a,c,d,h,p,A,x,y,B){return v([w,q,g],{templateString:k,popup:null,_addScenarioTable:null,_featureLayerTemplateOptions:null,baseClass:"jimu-widget-cost-analysis-costing-template",constructor:function(a){m.mixin(this,a)},postMixInProperties:function(){this.nls.common={};m.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._featureLayerTemplateOptions=this._addScenarioTable=this.popup=null;this.inherited(arguments);f.add(this.domNode,"esriCTLayerTableWrapper");
this._init();this.own(e(this.btnCostingTemplateNode,"click",m.hitch(this,this._addCostingTemplateBtnClicked,!0)))},_init:function(){n.set(this.layerName,"innerHTML",this.layer.title);n.set(this.layerName,"title",this.layer.title);this._createCostingTable()},_createCostingTable:function(){this._addCostingInfoLayerTable=new r({fields:[{name:"field",title:this.nls.costingInfo.featureTemplateTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.costingInfo.costEquationTitle,type:"empty",
editable:!0,width:"22%"},{name:"field",title:this.nls.costingInfo.geographyTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.costingInfo.scenarioTitle,type:"empty",editable:!1,width:"22%"},{name:"actions",title:this.nls.costingInfo.actionTitle,width:"12%",type:"actions",actions:["edit","delete"]}],selectable:!1});this._addCostingInfoLayerTable.placeAt(this.addLayerTableNode);this._addCostingInfoLayerTable.startup();this._addCostingInfoLayerTable.onBeforeRowDelete=m.hitch(this,
function(a){this.config.costingInfoSettings[this.layer.id]&&this.config.costingInfoSettings[this.layer.id].splice(a.rowIndex,1);return!0});this._addHelpIconToHeader();this._createHelpPopups();this._windowEventsPopupClose();this._tableOnBeforeRowEdit();this._populateCostingAssets()},_tableOnBeforeRowEdit:function(){this._addCostingInfoLayerTable.onBeforeRowEdit=m.hitch(this,function(a){var b;b={};b.featureTemplateValue=a.featureTemplateFields.get("value");b.costEquationValue=a.costEquationInput.get("value");
b.geographyValue=a.geographyFields.get("value");b.scenarioValue=a.scenarioFields.get("value");this._editCostEquation=new x({nls:this.nls,map:this.map,config:this.config,layerTitle:this.layer.title,currentRow:a,existingRowValues:b,validateCostEquation:this.validateCostEquation});e(this._editCostEquation,"okButtonClicked",m.hitch(this,function(){this._editCostEquation.destroy()}))})},_createHelpPopups:function(){var b;b=a.create("div",{"class":"esriCTCancelDialogPopup",onclick:function(){A.close(this.costEquationHelpDialog);
return!1}});this.costEquationHelpDialog=new p({"class":this.baseClass,content:b.outerHTML+"\x3cdiv class \x3d 'esriCTDialogText'\x3e"+this.nls.costingInfo.costEquationHelpText+"\x3c/div\x3e",onClick:function(a){f.contains(a.target,"esriCTCancelDialogPopup")||a.stopPropagation()}});this.scenarioHelpDialog=new p({"class":this.baseClass,content:b.outerHTML+"\x3cdiv class \x3d 'esriCTDialogText'\x3e"+this.nls.costingInfo.scenarioHelpText+"\x3c/div\x3e",onClick:function(a){f.contains(a.target,"esriCTCancelDialogPopup")||
a.stopPropagation()}})},_windowEventsPopupClose:function(){e(window.document,"click",m.hitch(this,function(a){f.contains(a.target,"esriCTHelpIcon")||(A.close(this.scenarioHelpDialog),A.close(this.costEquationHelpDialog))}));var a=b(".container-node.jimu-viewstack")[0];a&&e(a,"scroll",m.hitch(this,function(){A.close(this.scenarioHelpDialog);A.close(this.costEquationHelpDialog)}))},_addHelpIconToHeader:function(){var c,d,t,C,h;if(c=b(".simple-table-thead tr",this.domNode)[0])d=c.children[1],t=c.children[3];
C=a.create("div",{"class":"esriCTHelpIcon"},d);h=a.create("div",{"class":"esriCTHelpIcon"},t);e(C,"click",m.hitch(this,function(){this._openHelpPopupDialog(this.costEquationHelpDialog,C)}));e(h,"click",m.hitch(this,function(){this._openHelpPopupDialog(this.scenarioHelpDialog,h)}))},_openHelpPopupDialog:function(a,b){A.open({popup:a,around:b,orient:["above-centered"]})},_addCostingTemplateBtnClicked:function(a){this._addLayerRow(a,null,!0)},_addLayerRow:function(a,c,d){a=a?this._addCostingInfoLayerTable.addRow({}):
this._addCostingInfoLayerTable.addRow({},c.rowIndex+1,!1);if(c=b(".simple-table-cell",a.tr))this._addFeatureTemplateDropdown(c[0],a.tr,d),this._addCostEquationTextBox(c[1],a.tr,d),this._addGeographyDropdown(c[2],a.tr,d),this._addScenarioDropdown(c[3],a.tr,d),this._addCopyRowActionIcon(a.tr)},_addFeatureTemplateDropdown:function(b,d,t){this._featureLayerTemplateOptions||this._getFeatureTemplateOptions();b=a.create("div",{"class":"esriCTDropDownContainer"},b);d.featureTemplateFields=new c({options:m.clone(this._featureLayerTemplateOptions),
"class":"esriCTCostingTemplateFeatureTemplate"});d.featureTemplateFields.placeAt(b);d.featureTemplateFields.startup();b=this.config.costingInfoSettings[this.layer.id];d.featureTemplateFields.set("value",b&&0<b.length&&b[d.rowIndex]&&!t?b[d.rowIndex].featureTemplate:this._featureLayerTemplateOptions[d.rowIndex])},_addGeographyDropdown:function(b,d,t){b=a.create("div",{"class":"esriCTDropDownContainer"},b);d.geographyFields=new c({options:m.clone(this.geographies),"class":"esriCTCostingTemplateGeography"});
d.geographyFields.placeAt(b);d.geographyFields.startup();(b=this.config.costingInfoSettings[this.layer.id])&&0<b.length&&b[d.rowIndex]&&!t?(t=b[d.rowIndex].geography,t=""===t?this.nls.costingInfo.noneValue:t,d.geographyFields.set("value",t)):d.geographyFields.set("value","")},_addScenarioDropdown:function(b,d,t){b=a.create("div",{"class":"esriCTDropDownContainer"},b);d.scenarioFields=new c({options:m.clone(this.scenarios),"class":"esriCTCostingInfoScenarioOptions"});d.scenarioFields.placeAt(b);d.scenarioFields.startup();
(b=this.config.costingInfoSettings[this.layer.id])&&0<b.length&&b[d.rowIndex]&&!t?(t=b[d.rowIndex].scenario,t=""===t?this.nls.costingInfo.noneValue:t,d.scenarioFields.set("value",t)):d.scenarioFields.set("value","")},_addCostEquationTextBox:function(b,c,t){b=a.create("div",{"class":"esriCTTextBoxContainer"},b);c.costEquationInput=new d({"class":"esriCTLayerLabelTextBox esriCTFullWidth",spellcheck:!1});c.costEquationInput.placeAt(b);c.costEquationInput.startup();this._setCostEquation(c.costEquationInput);
c.costEquationInput.validator=m.hitch(this,this.validateCostEquation);(b=this.config.costingInfoSettings[this.layer.id])&&0<b.length&&b[c.rowIndex]&&!t&&(t=b[c.rowIndex].costEquation,c.costEquationInput.set("value",t))},_populateCostingAssets:function(){this.config.costingInfoSettings&&this.config.costingInfoSettings.hasOwnProperty(this.layer.id)?this.layer&&this.layer.layerObject&&l.forEach(this.config.costingInfoSettings[this.layer.id],m.hitch(this,function(){this._addLayerRow(!0)})):0<this.layer.layerObject.templates.length?
l.forEach(this.layer.layerObject.templates,m.hitch(this,function(){this._addLayerRow(!0)})):0<this.layer.layerObject.types.length&&l.forEach(this.layer.layerObject.types,m.hitch(this,function(){this._addLayerRow(!0)}))},_getFeatureTemplateOptions:function(){this._featureLayerTemplateOptions=[];this.layer&&this.layer.layerObject&&(this.layer.layerObject.templates&&0<this.layer.layerObject.templates.length?l.forEach(this.layer.layerObject.templates,m.hitch(this,function(a){this._featureLayerTemplateOptions.push({label:a.name,
value:a.name})})):this.layer.layerObject.types&&0<this.layer.layerObject.types.length&&l.forEach(this.layer.layerObject.types,m.hitch(this,function(a){this._featureLayerTemplateOptions.push({label:a.templates[0].name,value:a.templates[0].name})})))},updateScenarioOptions:function(a){var c;c=b(".esriCTCostingInfoScenarioOptions",this.domNode);l.forEach(c,m.hitch(this,function(b){h.byNode(b).set("options",a)}));this.scenarios=a},_setCostEquation:function(a){var b;this.layer&&this.layer.layerObject&&
this.layer.layerObject.geometryType&&(b=this.layer.layerObject.geometryType,"esriGeometryPolyline"===b||"esriGeometryPolygon"===b?a.set("value","{MEASURE}"):a.set("value","{TOTALCOUNT}"))},validateCostEquation:function(a){return y.validateEquation(a)},getUpdatedCostingInfo:function(){var a,b=[],c={};a=this._addCostingInfoLayerTable.getRows();l.forEach(a,m.hitch(this,function(a){a.featureTemplateFields&&a.costEquationInput&&a.geographyFields&&a.scenarioFields&&(c={},a.featureTemplateFields&&(c.featureTemplate=
a.featureTemplateFields.get("value")),a.costEquationInput&&(c.costEquation=a.costEquationInput.get("value")),a.geographyFields&&(c.geography=a.geographyFields.get("value")),a.scenarioFields&&(c.scenario=a.scenarioFields.get("value")),b.push(c))}));return b},_addCopyRowActionIcon:function(c){var d,t;d=b(".action-item-parent",c)[0];t=b(".jimu-icon-edit",c)[0];setTimeout(function(){b(".action-item-parent",c)[0]&&B.set(b(".action-item-parent",c)[0],"width","60px")},100);d&&(c.copyDiv=a.create("div",{"class":"action-item jimu-float-leading row-edit-div jimu-icon jimu-icon-copy",
title:this.nls.costingInfo.copyRowTitle},d),a.place(c.copyDiv,t,"after"),this.own(e(c.copyDiv,"click",m.hitch(this,this._copyRow,c))))},_copyRow:function(a){this._addLayerRow(!1,a);this._setCopyLayerValues(a)},_setCopyLayerValues:function(a){var b=this._addCostingInfoLayerTable.getRows()[a.rowIndex+1];b.featureTemplateFields.set("value",a.featureTemplateFields.get("value"));b.costEquationInput.set("value",a.costEquationInput.get("value"));b.geographyFields.set("value",a.geographyFields.get("value"));
b.scenarioFields.set("value",a.scenarioFields.get("value"))},updateGeographyOptions:function(a){a&&(this.geographies=a);a=b(".esriCTCostingTemplateGeography",this.domNode);l.forEach(a,m.hitch(this,function(a){h.byNode(a).set("options",m.clone(this.geographies));h.byNode(a).startup()}))}})})},"widgets/CostAnalysis/setting/EditCostEquation":function(){define("dojo/_base/declare jimu/dijit/Popup jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./EditCostEquation.html dojo/_base/lang dojo/on dojo/dom-class dojo/query dojo/dom-attr".split(" "),
function(v,r,w,q,g,k,l,m,n,f,e){return v([w,q,g],{templateString:k,popup:null,baseClass:"jimu-widget-cost-analysis-edit-equation",constructor:function(b){l.mixin(this,b)},postMixInProperties:function(){this.nls.common={};l.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.popup=null;this.inherited(arguments);this._init()},_init:function(){this._createEditLayerRowPopup()},_createEditLayerRowPopup:function(){var b;this.popup=new r({titleLabel:this.layerTitle+": "+this.existingRowValues.featureTemplateValue,
content:this.domNode,width:600,height:515,autoHeight:!0,"class":this.baseClass,buttons:[{label:this.nls.common.ok,onClick:l.hitch(this,"onOkButtonClicked")},{label:this.nls.common.cancel,classNames:["jimu-btn-vacation"],onClick:l.hitch(this,"onCancelButtonClicked")}]});b=f(".title-label",this.popup.domNode)[0];e.set(b,"title",this.layerTitle+": "+this.existingRowValues.featureTemplateValue);this._setRowPopupValues()},onOkButtonClicked:function(){n.contains(this.costEquationValue.domNode,"esriCTCostEquationError")?
alert(this.nls.costingInfo.validCostEquationMessage):(this.currentRow.costEquationInput.set("value",this.costEquationValue.getValue()),this.popup.close())},onCancelButtonClicked:function(){this.popup.close()},_setRowPopupValues:function(){var b,a;b=""===this.existingRowValues.geographyValue?this.nls.costingInfo.noneValue:this.existingRowValues.geographyValue;a=""===this.existingRowValues.scenarioValue?this.nls.costingInfo.noneValue:this.existingRowValues.scenarioValue;this.geographyValue.set("value",
b);this.scenarioValue.set("value",a);this.costEquationValue.set("value",this.existingRowValues.costEquationValue);m(this.costEquationValue,"KeyUp",l.hitch(this,function(a){this._costEquationKeyUp(a)}));this.costEquationHint.innerHTML=this.nls.costingInfo.hintText},_costEquationKeyUp:function(b){var a;a=this.costEquationValue.domNode;n.contains(a,"esriCTCostEquationError")&&n.remove(a,"esriCTCostEquationError");this.validateCostEquation(b.currentTarget.value)||n.add(a,"esriCTCostEquationError")}})})},
"widgets/CostAnalysis/setting/StatisticsSettings":function(){define("dojo/_base/declare jimu/BaseWidget jimu/dijit/SimpleTable dojo/on dojo/_base/array dojo/query dojo/dom-construct jimu/dijit/formSelect dijit/form/ValidationTextBox dijit/_WidgetsInTemplateMixin dojo/text!./StatisticsSettings.html dojo/_base/lang dojo/store/Memory dojo/dom-class dijit/registry dojo/_base/html dojo/dom-style ./ProjectCost dojo/keys dojo/dom-attr dijit/focus jimu/utils dojo/_base/event".split(" "),function(v,r,w,q,
g,k,l,m,n,f,e,b,a,c,d,h,p,A,x,y,B,u,z){return v([r,f],{templateString:e,baseClass:"jimu-widget-cost-analysis-statistics-settings",_layerNameStore:null,_commonStatisticsStoreOption:null,_polygonStatisticsStoreOption:null,_polylineStatisticsStoreOption:null,_pointLayerStatisticsStore:null,_polygonLayerStatisticsStore:null,_polylineLayerStatisticsStore:null,_layerFieldStore:{},_shapeFields:"shape_length shape_area shape__length shape__area shape.len shape.area".split(" "),_editableConfiguredLayers:[],
constructor:function(a){b.mixin(this,a)},postMixInProperties:function(){this.nls.common={};b.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._polylineLayerStatisticsStore=this._polygonLayerStatisticsStore=this._pointLayerStatisticsStore=this._polylineStatisticsStoreOption=this._polygonStatisticsStoreOption=this._commonStatisticsStoreOption=this._layerNameStore=null;this._layerFieldStore={};this._editableConfiguredLayers=[];this.inherited(arguments);this._init();this._handleClickEvent();
this.showActionButtonsInColumn&&this._createProjectCostTable()},_createProjectCostTable:function(){this.additionalProjectCostObj=new A({nls:this.nls,map:this.map,config:this.config},l.create("div",{},this.additionalProjectCostWrapper));this.additionalProjectCostObj.startup()},_handleClickEvent:function(){this._addButtonClick();this._crossButtonClick();this._upButtonClick();this._downButtonClick()},_init:function(){for(var a in this.config.layerSettings)this.config.layerSettings[a].editable&&this._editableConfiguredLayers.push(this.config.layerSettings[a].id);
this._createStatisticsStoreOptions();this._createStatisticsTable();this._layerNameStore||this._createLayerNameStore();this._attachNodeEvents();this._setConfig();this._displayAddStatisticsButtonOrLabel();this._handleActionButtonVisibility();0===this._editableConfiguredLayers.length&&(c.remove(this.noEditableLayersAvailable,"esriCTHidden"),c.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),c.add(this.statisticsLayerTableNode,"esriCTHidden"),c.add(this.additionalProjectCostWrapper,"esriCTHidden"))},
_displayAddStatisticsButtonOrLabel:function(){this.showActionButtonsInColumn?c.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"):c.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden")},_setConfig:function(){this.config&&this.config.statisticsSettings&&0<this.config.statisticsSettings.length&&g.forEach(this.config.statisticsSettings,b.hitch(this,function(a){this._addLayerRow(a)}))},getConfig:function(){var a,c;a=this._statisticsLayerTable.getRows();c=[];g.forEach(a,b.hitch(this,function(a){c.push({id:a.layerNameDropDown.getValue(),
type:a.statisticsTypeDropdown.getValue(),field:a.layerFieldDropdown.getValue(),label:a.statisticsLabelTextBox.getValue()})}));this.additionalProjectCostObj&&this.additionalProjectCostObj.getConfig();return c},_createStatisticsStoreOptions:function(){this._commonStatisticsStoreOption=[{name:this.nls.statisticsType.averageLabel,value:"avg"},{name:this.nls.statisticsType.countLabel,value:"count"},{name:this.nls.statisticsType.maxLabel,value:"max"},{name:this.nls.statisticsType.minLabel,value:"min"},
{name:this.nls.statisticsType.summationLabel,value:"sum"}];this._polygonStatisticsStoreOption=[{name:this.nls.statisticsType.areaLabel,value:"area"}];this._polylineStatisticsStoreOption=[{name:this.nls.statisticsType.lengthLabel,value:"length"}]},_attachNodeEvents:function(){0===this._layerNameStore.data.length?(c.remove(this.noEditableLayersAvailable,"esriCTHidden"),c.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),c.add(this.statisticsLayerTableNode,"esriCTHidden")):(c.add(this.noEditableLayersAvailable,
"esriCTHidden"),c.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),c.remove(this.statisticsLayerTableNode,"esriCTHidden"));this.own(q(this.btnAddStatisticsNode,"click",b.hitch(this,function(){this._layerNameStore.data.length&&(this._addStatisticsBtnClicked(),this.resetAddNewStatisticsDropdown())})));this.own(q(this.btnAddStatisticsNode,"keydown",b.hitch(this,function(a){if(a.keyCode===x.ENTER||a.keyCode===x.SPACE)z.stop(a),this._layerNameStore.data.length&&(this._addStatisticsBtnClicked(),
this.resetAddNewStatisticsDropdown())})))},_createStatisticsTable:function(){var a,b;this._statisticsLayerTable=new w({fields:[{name:"editable",title:this.nls.statisticsSettings.selectDeselectAllTitle,type:"checkbox",editable:!1,width:this.showActionButtonsInRow?"16px":"0%",hidden:!this.showActionButtonsInRow},{name:"field",title:this.nls.common.layer,type:"empty",editable:!1,width:"30%"},{name:"field",title:this.nls.common.type,type:"empty",editable:!0,width:this.showActionButtonsInRow?"19%":"18%"},
{name:"field",title:this.nls.statisticsSettings.fieldNameTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.statisticsSettings.statisticsTitle,type:"empty",editable:!1,width:this.showActionButtonsInRow?"55px":"20%"},{name:"actions",title:this.nls.common.actions,width:"10%",type:"actions",actions:["up","down","delete"],hidden:!this.showActionButtonsInColumn}],selectable:!1});this._statisticsLayerTable.placeAt(this.statisticsLayerTableNode);this._statisticsLayerTable.startup();
a=k(".esriCTAddLayerTableNode th .label")[0];b=k(".esriCTAddLayerTableNode th .jimu-checkbox")[0];k(".esriCTAddLayerTableNode tr .jimu-checkbox");b&&c.add(b,"esriCTStatisticsHeaderCheckBox");a&&c.add(a,"esriCTHidden")},_addButtonClick:function(){!0===this.showActionButtonsInRow?(c.remove(this.btnAddNode,"esriCTHidden"),this.own(q(this.btnAddNode,"click",b.hitch(this,function(){this._addStatisticsButtonClickEvent()}))),this.own(q(this.btnAddNode,"keydown",b.hitch(this,function(a){if(a.keyCode===x.ENTER||
a.keyCode===x.SPACE)z.stop(a),this._addStatisticsButtonClickEvent()})))):c.add(this.btnAddNode,"esriCTHidden")},_addStatisticsButtonClickEvent:function(){if(this._layerNameStore.data.length&&(this._addStatisticsBtnClicked(),this._handleActionButtonVisibility(),this.resetAddNewStatisticsDropdown(),this.widgetDomNode)){var a=this._statisticsLayerTable.getRows();0<=a.length&&(a=k(".jimu-checkbox",a[a.length-1])[0],B.focus(a))}},_crossButtonClick:function(){c.remove(this.btnCrossNode,"esriCTHidden");
this.own(q(this.btnCrossNode,"click",b.hitch(this,this._deleteLayerRow)));this.own(q(this.btnCrossNode,"keydown",b.hitch(this,function(a){if(a.keyCode===x.ENTER||a.keyCode===x.SPACE)z.stop(a),this._deleteLayerRow()})))},_upButtonClick:function(){c.remove(this.btnUpNode,"esriCTHidden");this.own(q(this.btnUpNode,"click",b.hitch(this,function(){this._upButtonClickEvent()})));this.own(q(this.btnUpNode,"keydown",b.hitch(this,function(a){if(a.keyCode===x.ENTER||a.keyCode===x.SPACE)z.stop(a),this._upButtonClickEvent()})))},
_upButtonClickEvent:function(){var a,d;if(!c.contains(this.btnUpNode,"esriCTStatisticsUpIconDisable")){d=this._statisticsLayerTable.getRows();var e=this._statisticsLayerTable.getData();g.forEach(e,b.hitch(this,function(b,c){b.editable&&(a=d[c])}));this._statisticsLayerTable.onBeforeRowUp(a)&&(e=g.indexOf(d,a),0<e&&(e=d[e-1]))&&(h.place(a,e,"before"),this._statisticsLayerTable.updateUI(),this._statisticsLayerTable.emit("row-up",a))}},_downButtonClick:function(){c.remove(this.btnDownNode,"esriCTHidden");
this.own(q(this.btnDownNode,"click",b.hitch(this,function(){this._downButtonClickEvent()})));this.own(q(this.btnDownNode,"keydown",b.hitch(this,function(a){if(a.keyCode===x.ENTER||a.keyCode===x.SPACE)z.stop(a),this._downButtonClickEvent()})))},_downButtonClickEvent:function(){var a,d;if(!c.contains(this.btnDownNode,"esriCTStatisticsDownIconDisable")){d=this._statisticsLayerTable.getRows();var e=this._statisticsLayerTable.getData();g.forEach(e,b.hitch(this,function(b,c){b.editable&&(a=d[c])}));this._statisticsLayerTable.onBeforeRowDown(a)&&
(e=g.indexOf(d,a),e<d.length-1&&(e=d[e+1]))&&(h.place(a,e,"after"),this._statisticsLayerTable.updateUI(),this._statisticsLayerTable.emit("row-down",a))}},_deleteLayerRow:function(){var a=this._statisticsLayerTable.getRows(),d=this._statisticsLayerTable.getData();g.forEach(d,b.hitch(this,function(b,c){b.editable&&this._statisticsLayerTable.deleteRow(a[c])}));0===this._statisticsLayerTable.getRows().length&&(d=k("th .checkbox")[0],c.contains(d,"checked")&&c.remove(d,"checked"));this._handleActionButtonVisibility()},
_checkEditCapabilities:function(a){var b;return(b=a&&a.capabilities?a.capabilities:null)&&-1!==b.indexOf("Delete")&&-1!==b.indexOf("Create")&&-1!==b.indexOf("Update")&&a.globalIdField?!0:!1},_addStatisticsBtnClicked:function(){var a;this._addLayerRow();a=k(".simple-table-title .jimu-checkbox",this.domNode)[0];q(d.byNode(a),"change",b.hitch(this,function(){setTimeout(b.hitch(this,function(){this._handleActionButtonVisibility()}),0)}))},_handleActionButtonVisibility:function(){var a,e,h=0,f;a=this._statisticsLayerTable.getRows();
f=k(".simple-table-title .jimu-checkbox",this.domNode)[0];f=d.byNode(f);g.some(this._statisticsLayerTable.getRows(),b.hitch(this,function(a){e=k(".jimu-checkbox",a)[0];d.byNode(e).checked&&h++}));0===h?(c.replace(this.btnCrossNode,"esriCTDeleteStatisticsIconDisable","esriCTDeleteStatisticsIcon"),y.set(this.btnCrossNode,"tabindex","-1")):(c.replace(this.btnCrossNode,"esriCTDeleteStatisticsIcon","esriCTDeleteStatisticsIconDisable"),y.set(this.btnCrossNode,"tabindex","0"));a&&1===h?(c.replace(this.btnUpNode,
"esriCTStatisticsUpIcon","esriCTStatisticsUpIconDisable"),c.replace(this.btnDownNode,"esriCTStatisticsDownIcon","esriCTStatisticsDownIconDisable"),y.set(this.btnUpNode,"tabindex","0"),y.set(this.btnDownNode,"tabindex","0")):(c.replace(this.btnUpNode,"esriCTStatisticsUpIconDisable","esriCTStatisticsUpIcon"),c.replace(this.btnDownNode,"esriCTStatisticsDownIconDisable","esriCTStatisticsDownIcon"),y.set(this.btnUpNode,"tabindex","-1"),y.set(this.btnDownNode,"tabindex","-1"));0===a.length?(f.set("status",
!1),c.add(f.domNode,"jimu-state-disabled"),y.set(f.domNode,"tabindex","-1"),this.widgetDomNode&&(B.focus(this.btnAddNode),u.initFirstFocusNode(this.widgetDomNode,this.btnAddNode))):(f.set("status",!0),c.remove(f.domNode,"jimu-state-disabled"),y.set(f.domNode,"tabindex","0"),this.widgetDomNode&&u.initFirstFocusNode(this.widgetDomNode,f.domNode))},_addLayerRow:function(a){var c,e,h;c=this._statisticsLayerTable.addRow({});e=k(".simple-table-cell",c.tr);h=k(".simple-table-cell .jimu-checkbox",c.tr)[0];
y.set(h,"aria-label",this.nls.statisticsSettings.layerCheckbox);e&&(h&&q(d.byNode(h),"change",b.hitch(this,function(){this._handleActionButtonVisibility()})),c=c.tr,this._addLayerNameDropdown(e[1],c,a),this._addStatisticsDropdown(e[2],c,a),this._addLayerFieldDropdown(e[3],c,a),this._addStatisticsLabelTextBox(e[4],c,a))},_onLayerNameChange:function(a,b,c){var d;this._layerNameStore.data.length&&(d=this._layerNameStore.data[this._layerNameStore.index[a]].geometryType,d=this._getStatisticsTypeStore(d),
b.statisticsTypeDropdown.setStore(d),c&&c.type&&b.statisticsTypeDropdown.set("value",c.type),c=b.statisticsTypeDropdown.getValue(),a=this._layerNameStore.data[this._layerNameStore.index[a]].value,this._layerFieldStore[a]||this._createFieldStore(a),b.layerFieldDropdown.setStore(this._layerFieldStore[a]),b.layerFieldDropdown.reset(),this._onStatisticsTypeChange(c,b))},_onStatisticsTypeChange:function(a,b,d){"count"===a||"length"===a||"area"===a?c.add(b.layerFieldDropdown.domNode,"esriCTHidden"):(c.remove(b.layerFieldDropdown.domNode,
"esriCTHidden"),d&&d.field&&b.layerFieldDropdown.set("value",d.field));this._resetStatisticsTypeWidth(b)},_addLayerNameDropdown:function(a,c,d){a=l.create("div",{"class":"esriCTDropDownContainer"},a);c.layerNameDropDown=new m({name:"layerSelect",store:this._layerNameStore,labelAttr:"name","class":"esriCTLayerNameDropdown"},a);d&&d.id&&c.layerNameDropDown.set("value",d.id);this.own(q(c.layerNameDropDown,"click",b.hitch(this,function(){this._resetLayerNameWidth(c)})));this.own(q(c.layerNameDropDown,
"keydown",b.hitch(this,function(a){if(a.keyCode===x.ENTER||a.keyCode===x.SPACE)z.stop(a),this._resetLayerNameWidth(c)})));this.own(q(c.layerNameDropDown,"change",b.hitch(this,function(a){y.set(c.layerNameDropDown,"aria-label",this.nls.common.layer+" "+c.layerNameDropDown._getSelectedOptionsAttr().label);this._resetLayerNameWidth(c);this._onLayerNameChange(a,c,d)})));c.layerNameDropDown.startup();y.set(c.layerNameDropDown,"aria-label",this.nls.common.layer+" "+c.layerNameDropDown._getSelectedOptionsAttr().label)},
_createLayerNameStore:function(){var c,d,e=[];c=[];e=[this.config.projectSettings.costingGeometryLayer||"",this.config.projectSettings.projectLayer||"",this.config.projectSettings.pointLayerCentroid||""];this.config.layerSettings.length&&this._editableConfiguredLayers.length&&(d=this.config.layerSettings,g.forEach(d,b.hitch(this,function(a){e.push(a.id);var b=this._getFeatureLayerGeometryType(a.id);a.editable&&b&&c.push({name:a.title,value:a.id,geometryType:b})})));this._layerNameStore=new a({idProperty:"value",
data:c});c.length&&this._updateLayerNameOptions()},_updateLayerNameOptions:function(){var a,e;a=k(".esriCTLayerNameDropdown",this.domNode);g.forEach(a,b.hitch(this,function(a){e=d.byNode(a).get("value");d.byNode(a).set("store",this._layerNameStore);d.byNode(a).set("value",e)}));0===this._editableConfiguredLayers.length?(c.remove(this.noEditableLayersAvailable,"esriCTHidden"),c.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),c.add(this.statisticsLayerTableNode,"esriCTHidden"),c.add(this.additionalProjectCostWrapper,
"esriCTHidden")):(c.add(this.noEditableLayersAvailable,"esriCTHidden"),c.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),c.remove(this.statisticsLayerTableNode,"esriCTHidden"),c.remove(this.additionalProjectCostWrapper,"esriCTHidden"))},_getFeatureLayerGeometryType:function(a){var c=g.filter(this.map.webMapResponse.itemInfo.itemData.operationalLayers,b.hitch(this,function(b){return a===b.id}));return c.length&&c[0].layerObject?c[0].layerObject.geometryType:null},_createStatisticsTypeStore:function(){this._pointLayerStatisticsStore||
this._polygonLayerStatisticsStore||this._polylineLayerStatisticsStore||(this._createPointGeometryStatisticsStore(),this._createPolygonGeometryStatisticsStore(),this._createPolylineGeometryStatisticsStore())},_getStatisticsTypeStore:function(a){switch(a){case "esriGeometryPolygon":return this._polygonLayerStatisticsStore;case "esriGeometryPolyline":return this._polylineLayerStatisticsStore;case "esriGeometryPoint":return this._pointLayerStatisticsStore}},_addStatisticsDropdown:function(a,c,d){var e;
a=l.create("div",{"class":"esriCTDropDownContainer"},a);this._createStatisticsTypeStore();e=c.layerNameDropDown._getSelectedOptionsAttr().item.geometryType;e=this._getStatisticsTypeStore(e);c.statisticsTypeDropdown=new m({name:"statisticsTypeSelect",store:e,labelAttr:"name","class":"esriCTStatisticsTypeDropdown"},a);this.own(q(c.statisticsTypeDropdown,"click",b.hitch(this,function(){this._resetStatisticsTypeWidth(c)})));this.own(q(c.statisticsTypeDropdown,"keydown",b.hitch(this,function(a){if(a.keyCode===
x.ENTER||a.keyCode===x.SPACE)z.stop(a),this._resetStatisticsTypeWidth(c)})));this.own(q(c.statisticsTypeDropdown,"change",b.hitch(this,function(a){this._resetStatisticsTypeWidth(c);this._onStatisticsTypeChange(a,c,d);y.set(c.statisticsTypeDropdown,"aria-label","type "+c.statisticsTypeDropdown._getSelectedOptionsAttr().label)})));y.set(c.statisticsTypeDropdown,"aria-label","Type "+c.statisticsTypeDropdown._getSelectedOptionsAttr().label);c.statisticsTypeDropdown.startup()},_createPointGeometryStatisticsStore:function(){this._pointLayerStatisticsStore=
new a({idProperty:"value",data:this._commonStatisticsStoreOption})},_createPolygonGeometryStatisticsStore:function(){this._polygonLayerStatisticsStore=new a({idProperty:"value",data:this._commonStatisticsStoreOption.concat(this._polygonStatisticsStoreOption)})},_createPolylineGeometryStatisticsStore:function(){this._polylineLayerStatisticsStore=new a({idProperty:"value",data:this._commonStatisticsStoreOption.concat(this._polylineStatisticsStoreOption)})},_createFieldStore:function(c){var d,e;d=[];
e=["esriFieldTypeDouble","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSmallFloat"];this._layerFieldStore[c]||(g.forEach(this.map._layers[c].fields,b.hitch(this,function(a){-1<e.indexOf(a.type)&&-1===this._shapeFields.indexOf(a.name.toLowerCase())&&d.push({name:a.alias||a.name,value:a.name})})),0===d.length&&d.push({name:"\x26nbsp",value:null}),this._layerFieldStore[c]=new a({idProperty:"value",data:d}))},_addLayerFieldDropdown:function(a,c){var d;a=l.create("div",{"class":"esriCTDropDownContainer"},
a);d=c.layerNameDropDown._getSelectedOptionsAttr().value;this._createFieldStore(d);c.layerFieldDropdown=new m({name:"layerFieldDropdown",store:this._layerFieldStore[d],labelAttr:"name","class":"esriCTStatisticsFieldDropdown"},a);this.own(q(c.layerFieldDropdown,"click",b.hitch(this,function(){this._resetLayerFieldWidth(c)})));this.own(q(c.layerFieldDropdown,"keydown",b.hitch(this,function(a){if(a.keyCode===x.ENTER||a.keyCode===x.SPACE)z.stop(a),this._resetLayerFieldWidth(c)})));this.own(q(c.layerFieldDropdown,
"change",b.hitch(this,function(){this._resetLayerFieldWidth(c);y.set(c.layerFieldDropdown,"aria-label",this.nls.statisticsSettings.fieldNameTitle+" "+c.layerFieldDropdown.value)})));c.layerFieldDropdown.startup();a=c.statisticsTypeDropdown.getValue();this._onStatisticsTypeChange(a,c);y.set(c.layerFieldDropdown,"aria-label",this.nls.statisticsSettings.fieldNameTitle+" "+c.layerFieldDropdown.value)},_addStatisticsLabelTextBox:function(a,b,c){a=l.create("div",{"class":"esriCTTextBoxContainer"},a);b.statisticsLabelTextBox=
new n({"class":"esriCTLayerLabelTextBox"},a);c&&c.label&&b.statisticsLabelTextBox.set("value",c.label);b.statisticsLabelTextBox.startup();y.set(b.statisticsLabelTextBox,"aria-label",this.nls.statisticsSettings.statisticsTitle+" "+b.statisticsLabelTextBox.get("value"))},_updateStatisticsTable:function(a){var c,d;a.layerId&&(a.editable?c=a.layerId:d=a.layerId);d&&(a=this._statisticsLayerTable.getRows(),g.forEach(a,b.hitch(this,function(a){a.layerNameDropDown&&a.layerNameDropDown.get("value")===d&&this._statisticsLayerTable.deleteRow(a)})),
this._layerNameStore.remove(d),a=this._editableConfiguredLayers.indexOf(d),-1!==a&&this._editableConfiguredLayers.splice(a,1));c&&""!==c&&(a=this.layerInfosObj.getLayerInfoById(c))&&a.layerObject&&(a=a.layerObject,this._layerNameStore.put({name:a.name,value:c,geometryType:a.geometryType}),this._editableConfiguredLayers.push(c));this._updateLayerNameOptions()},resetAddNewStatisticsDropdown:function(){var a,c,d,e,h;if(a=k(".simple-table-field.field",this._statisticsLayerTable.domNode))a[0]&&(c=p.getComputedStyle(a[0])),
a[1]&&(d=p.getComputedStyle(a[1])),a[2]&&(e=p.getComputedStyle(a[2]));a=k(".esriCTLayerNameDropdown",this._statisticsLayerTable.domNode);g.forEach(a,b.hitch(this,function(a){(a=k(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",a))&&a[0]&&(h=this.showActionButtonsInColumn?59:30,a[0].style.width=parseInt(c.width,10)-h+"px")}));a=k(".esriCTStatisticsTypeDropdown",this._statisticsLayerTable.domNode);g.forEach(a,b.hitch(this,function(a){(a=k(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",
a))&&a[0]&&(h=this.showActionButtonsInColumn?59:30,a[0].style.width=parseInt(d.width,10)-h+"px")}));a=k(".esriCTStatisticsFieldDropdown",this._statisticsLayerTable.domNode);g.forEach(a,b.hitch(this,function(a){(a=k(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",a))&&a[0]&&(h=this.showActionButtonsInColumn?59:30,a[0].style.width=parseInt(e.width,10)-h+"px")}))},_resetLayerNameWidth:function(a){var b,c;(b=k(".simple-table-field.field",this._statisticsLayerTable.domNode))&&b[0]&&
(c=p.getComputedStyle(b[0]));a=k(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",a.layerNameDropDown.domNode);b=this.showActionButtonsInColumn?59:30;a&&a[0]&&(a[0].style.width=parseInt(c.width,10)-b+"px")},_resetStatisticsTypeWidth:function(a){var b,c;(c=k(".simple-table-field.field",this._statisticsLayerTable.domNode))&&c[1]&&(b=p.getComputedStyle(c[1]));a=k(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",a.statisticsTypeDropdown.domNode);c=this.showActionButtonsInColumn?
59:30;a&&a[0]&&(a[0].style.width=parseInt(b.width,10)-c+"px")},_resetLayerFieldWidth:function(a){var b,c;(b=k(".simple-table-field.field",this._statisticsLayerTable.domNode))&&b[2]&&(c=p.getComputedStyle(b[2]));a=k(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",a.layerFieldDropdown.domNode);b=this.showActionButtonsInColumn?59:30;a&&a[0]&&(a[0].style.width=parseInt(c.width,10)-b+"px")}})})},"widgets/CostAnalysis/setting/ProjectCost":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./ProjectCost.html dojo/_base/lang dojo/on jimu/dijit/SimpleTable dojo/query dijit/form/ValidationTextBox dojo/dom-construct dijit/form/Select dojo/_base/array dojo/store/Memory".split(" "),
function(v,r,w,q,g,k,l,m,n,f,e,b,a,c){return v([r,w,q],{templateString:g,baseClass:"jimu-widget-cost-analysis-project-cost-settings",_costFieldStore:null,postCreate:function(){this.inherited(arguments);this._handleClickEvents()},_setConfig:function(){this.config&&this.config.projectCostSettings&&0<this.config.projectCostSettings.length&&a.forEach(this.config.projectCostSettings,k.hitch(this,function(a){this._addProjectCostLayerRow(a)}))},startup:function(){this.inherited(arguments);this._createProjectCostFieldTable();
this._createProjectCostTypeFieldStore();this._setConfig()},getConfig:function(){var b,c;b=this._projectCostTable.getRows();c=[];a.some(b,k.hitch(this,function(a){c.push({label:a.projectCostLabelTextBox.getValue(),type:a.projectCostTypeDropdown.getValue(),value:a.projectCostValueTextBox.getValue()})}));return c},validateProjectCostData:function(){var a,b;a=this._projectCostTable.getRows();for(var c in a){b=a[c];if(!b.projectCostLabelTextBox.isValid())return this._setErrorMessage(b.projectCostLabelTextBox,
this.nls.projectCostSettings.invalidProjectCostMessage),{isValid:!1};if(!b.projectCostValueTextBox.isValid())return this._setErrorMessage(b.projectCostValueTextBox,this.nls.projectCostSettings.invalidProjectCostMessage),{isValid:!1}}return{isValid:!0}},_setErrorMessage:function(a,b){a.set("state","Error");a.set("invalidMessage",b);a.focus();a.isValid()},_handleClickEvents:function(){this.own(l(this.btnAddProjectCostNode,"click",k.hitch(this,function(){this._addProjectCostBtnClicked()})));this.own(l(this.btnCrossNode,
"click",k.hitch(this,function(){this._deleteLayerRow()})))},_createProjectCostFieldTable:function(){this._projectCostTable=new m({fields:[{name:"editable",title:this.nls.common.label,type:"empty",editable:!1,width:"35%"},{name:"field",title:this.nls.common.type,type:"empty",editable:!1,width:"20%"},{name:"field",title:this.nls.projectCostSettings.additionalCostValueColumnHeader,type:"empty",editable:!0,width:"35%"},{name:"actions",title:this.nls.common.actions,width:"10%",type:"actions",actions:["up",
"down","delete"]}],selectable:!1,autoHeight:!0});this._projectCostTable.placeAt(this.projectCostTableNode);this._projectCostTable.startup()},_addProjectCostBtnClicked:function(){this._addProjectCostLayerRow()},_addProjectCostLayerRow:function(a){var b,c;b=this._projectCostTable.addRow({});if(c=n(".simple-table-cell",b.tr))b=b.tr,this._addProjectCostLabelTextBox(c[0],b,a),this._addProjectCostTypeDropdown(c[1],b,a),this._addProjectCostValueTextBox(c[2],b,a)},_addProjectCostLabelTextBox:function(a,b,
c){a=e.create("div",{"class":"esriCTTextBoxContainer"},a);b.projectCostLabelTextBox=new f({"class":"esriCTProjectCostLabelTextbox esriCTAddProjectCostTableNode",invalidMessage:"Invalid Entry for project cost"},a);b.projectCostLabelTextBox.startup();c&&c.label&&b.projectCostLabelTextBox.set("value",c.label);b.projectCostLabelTextBox.validator=k.hitch(this,this._validateProjectCostLabelFields)},_validateProjectCostLabelFields:function(a){return""===k.trim(a)?!1:!0},_addProjectCostTypeDropdown:function(a,
c,f){a=e.create("div",{"class":"esriCTProjectCostTypeDropDownContainer esriCTAddProjectCostTableNode"},a);c.projectCostTypeDropdown=new b({name:"layerSelect",store:this._projectCostFieldStore,labelAttr:"name","class":"esriCTProjectCostTypeDropdown"},a);f&&f.type&&c.projectCostTypeDropdown.set("value",f.type);c.projectCostTypeDropdown.startup()},_addProjectCostValueTextBox:function(a,b,c){a=e.create("div",{"class":"esriCTProjectCostTextBoxContainer esriCTAddProjectCostTableNode"},a);b.projectCostValueTextBox=
new f({"class":"esriCTProjectCostLabelTextbox",trim:!0,invalidMessage:"Invalid Entry for project cost"},a);b.projectCostValueTextBox.startup();c&&c.value&&b.projectCostValueTextBox.set("value",c.value);b.projectCostValueTextBox.validator=k.hitch(this,this._validateProjectCostValueFields)},_validateProjectCostValueFields:function(a){a=Number(a);return""===a||isNaN(a)||"0"===a||0===a?!1:!0},_deleteLayerRow:function(){var b=this._projectCostTable.getRows(),c=this._projectCostTable.getData();a.forEach(c,
k.hitch(this,function(a,c){a.editable&&this._projectCostTable.deleteRow(b[c])}))},_createProjectCostTypeFieldStore:function(){var a;a=[];a.push({name:"+",value:"+"});a.push({name:"*",value:"*"});a.push({name:"-",value:"_"});a.push({name:"%",value:"%"});this._projectCostFieldStore=new c({idProperty:"value",data:a})}})})},"widgets/CostAnalysis/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/CostAnalysis/setting/GeneralSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.measurementUnitLabel}"\x3e${nls.generalSettings.measurementUnitLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"measurementUnitInputNode"\x3e\r\n        \x3coption value\x3d"feet"\x3e${nls.units.feet.label}\x3c/option\x3e\r\n        \x3coption value\x3d"meters"\x3e${nls.units.meters.label}\x3c/option\x3e\r\n        \x3coption value\x3d"miles"\x3e${nls.units.miles.label}\x3c/option\x3e\r\n        \x3coption value\x3d"yards"\x3e${nls.units.yards.label}\x3c/option\x3e\r\n        \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers.label}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.currencyLabel}"\x3e${nls.generalSettings.currencyLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"maxLength:\'3\'" data-dojo-attach-point\x3d"currencyInputNode" trim\x3d"true"\r\n        required\x3d"true"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.roundCostLabel}"\x3e${nls.generalSettings.roundCostLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"roundCostInputNode"\x3e\r\n        \x3coption value\x3d"twoDecimalPoint"\x3e${nls.generalSettings.roundCostValues.twoDecimalPoint}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestWholeNumber"\x3e${nls.generalSettings.roundCostValues.nearestWholeNumber}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestTen"\x3e${nls.generalSettings.roundCostValues.nearestTen}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestHundred"\x3e${nls.generalSettings.roundCostValues.nearestHundred}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestThousand"\x3e${nls.generalSettings.roundCostValues.nearestThousand}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestTenThousands"\x3e${nls.generalSettings.roundCostValues.nearestTenThousands}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cfieldset class\x3d"esriCTProjectOutputSettingsFieldset"\x3e\r\n    \x3clegend class\x3d"esriCTProjectOutputSettingsLegend" title\x3d"${nls.generalSettings.projectOutputSettings}"\x3e\r\n      ${nls.generalSettings.projectOutputSettings} \x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTFullWidth esriCTFullHeight esriCTProjectSettingsContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTProjectSettingsOutputLeftContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTProjectAreaTypeContainer esriCTVerticalCenterAlignLabel esriCTEllipsis" title\x3d"${nls.generalSettings.typeOfProjectAreaLabel}"\x3e${nls.generalSettings.typeOfProjectAreaLabel}:\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTProjectAreaTypeInputContainer"\x3e\r\n          \x3cdiv class\x3d""\x3e\r\n            \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"projectAreaTypeInputNode"\x3e\r\n              \x3coption value\x3d"outline"\x3e${nls.generalSettings.projectAreaType.outline}\x3c/option\x3e\r\n              \x3coption value\x3d"buffer"\x3e${nls.generalSettings.projectAreaType.buffer}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTProjectSettingsOutputRightContainer esriCTHidden" data-dojo-attach-point\x3d"projectSettingsOutputRightContainerNode"\x3e\r\n        \x3cdiv class\x3d"esriCTBufferDistanceLabelContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTBufferDistanceLabel esriCTVerticalCenterAlignLabel esriCTEllipsis" title\x3d"${nls.generalSettings.bufferDistanceLabel}"\x3e${nls.generalSettings.bufferDistanceLabel}:\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTBufferDistanceInputContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/NumberTextBox" disabled\x3dtrue data-dojo-attach-point\x3d"bufferDistanceInputNode"\r\n            trim\x3d"true" required\x3d"true" data-dojo-props\x3d""\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTProjectMeasurementUnitContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTVerticalCenterAlignLabel esriCTEllipsis esriCTBufferDistanceUnit" data-dojo-attach-point\x3d"bufferDistanceUnit"\x3e${nls.units.feet.label}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer" style\x3d"padding-top: 20px"\x3e\r\n    \x3cinput data-dojo-attach-point\x3d"exportCSVCheckBox" data-dojo-type\x3d"dijit/form/CheckBox" type\x3d"checkbox" /\x3e\r\n    \x3cspan\x3e${nls.generalSettings.csvReportExportLabel}\x3c/span\x3e\r\n    \x3cdiv class\x3d"esriCTEditReportSettingsIconContainer"\x3e\r\n      \x3cdiv style\x3d"vertical-align: middle" title\x3d"${nls.generalSettings.editReportSettingsBtnTooltip}" data-dojo-attach-point\x3d"editReportSettings"\r\n        class\x3d"jimu-icon jimu-icon-edit"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ReportSettings.html":'\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n  \x3cdiv style\x3d"margin-bottom: 10px"\x3e\r\n      \x3cdiv class\x3d"esriCTReportNameLabel esriCTEllipsis"\x3e ${nls.generalSettings.reportSettings.reportNameLabel}\x3c/div\x3e\r\n      \x3cdiv style\x3d"width:70%" data-dojo-attach-point\x3d"reportNameNode" required\x3d"true" data-dojo-type\x3d"dijit/form/TextBox"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriCTReportSettingsTable" data-dojo-attach-point\x3d"reportSettingsTableNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ProjectSettings.html":'\x3cdiv\x3e\r\n\t\x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n\t\t\x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n\t\t\t${nls.projectSettings.costingGeometrySectionTitle}\r\n\t\t\x3c/legend\x3e\r\n\t\t\x3cdiv class\x3d"esriCTNote esriCTFullWidth"\x3e${nls.projectSettings.costingGeometrySectionNote}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Costing Geometry Layer Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.costingGeometryLayerLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.costingGeometryLayerLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Costing Geometry Later Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"costingGeometryLayerDropDown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"costingGeometryHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Field to Label Geography Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.fieldLabelGeography}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.fieldLabelGeography}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Field to Label Geography Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"fieldToLabelGeography" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"fieldToLabelGeographyHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/fieldset\x3e\r\n\t\x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n\t\t\x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n\t\t\t${nls.projectSettings.projectTableSectionTitle}\r\n\t\t\x3c/legend\x3e\r\n\t\t\x3cdiv class\x3d"esriCTNote esriCTFullWidth"\x3e${nls.projectSettings.projectTableSectionNote}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Assets Table Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectAssetsTableLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectAssetsTableLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Assets Table Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"projectAssetsTable" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectAssetsTableHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Multiplier Additional Cost Table Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectMultiplierTableLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectMultiplierTableLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Multiplier Additional Cost Table Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"projectMultiplierTable" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectMultiplierTableHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Layer Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectLayerLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectLayerLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Layer Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer esriCTProjectLayerDropdown" data-dojo-attach-point\x3d"projectLayerDropDown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectLayerHelp"\x3e\x3c/div\x3e\r\n\t\t\t\x3c!--Configure Fields Settings--\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTConfigureFieldsContainer"\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!-- Point layer centroid starts --\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.pointLayerCentroidLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.pointLayerCentroidLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" disabled\x3dtrue data-dojo-attach-point\x3d"pointLayerCentroidDropDown"\r\n\t\t\tdata-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"pointLayerCentroidHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!-- Point layer centroid ends --\x3e\r\n\t\t\x3c!--Configured Fields Table--\x3e\r\n\t\t\x3cdiv class\x3d"esriCTConfiguredFieldsTable esriCTHidden" data-dojo-attach-point\x3d"configuredFieldsTable"\x3e\x3c/div\x3e\r\n\t\x3c/fieldset\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/CostAnalysis/setting/LayerSettings.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"layerSettingsMainContainer"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerSettingsTableNode" data-dojo-attach-point\x3d"layerSettingsTableNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHidden esriCTNoAssetLayersAvailable" data-dojo-attach-point\x3d"noAssetLayersAvailable"\x3e\r\n      ${nls.layerSettings.noAssetLayersAvailable}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/AttributeSettings.html":'\x3cdiv class\x3d"esriCTMainAttributeSettingsContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"attributeSettingsAddFields" \r\n                class\x3d"esriCTBtnAddField esriCTEllipsis"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e${nls.layerSettings.addFieldLabelTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTAttributeSettingsTable" data-dojo-attach-point\x3d"attributeSettingsTableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/CostingInfo.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n    \x3c!--Add Layers section --\x3e\r\n    \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n        \x3cdiv class\x3d"esriCTManageScenarioButtonContainer"\x3e\r\n            \x3cdiv class\x3d"esriCTMangeScenarios"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"btnManageScenarios" class\x3d"esriCTBtnAddSection esriCTEllipsis"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e${nls.costingInfo.manageScenariosTitle}\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHidden esriCTNoEditableLayersAvailable" data-dojo-attach-point\x3d"noEditableLayersAvailable"\x3e\r\n            ${nls.costingInfo.noEditableLayersAvailable}\r\n        \x3c/div\x3e\r\n        \x3c!-- Update cost equation checkbox parent node --\x3e\r\n        \x3cdiv class\x3d"esriCTUpdateCostCheckBoxParentContainer esriCTHidden" data-dojo-attach-point\x3d"updateCostEquationChkContainer"\x3e\r\n            \x3c!-- checkbox container --\x3e\r\n            \x3cdiv class\x3d"esriCTUpdateCheckBoxContainer"\x3e\r\n                \x3c!-- checkbox --\x3e\r\n                \x3cinput id\x3d"esrict-update-costequation-check" data-dojo-attach-point\x3d"updateCostEquationCheckBox"\r\n                    data-dojo-type\x3d"dijit/form/CheckBox" type\x3d"checkbox" checked\x3d"false" /\x3e\r\n                \x3cspan\x3e${nls.costingInfo.updateProjectCostCheckboxLabel}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTUpdateEquationHint esriCTNote"\x3e${nls.costingInfo.updateProjectCostEquationHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"costingTemplateContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ManageScenarios.html":'\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTPopupFields esriCTEllipsis"\x3e ${nls.costingInfo.scenarioNameLabel}\x3c/div\x3e\r\n        \x3cdiv style\x3d"width:180px" data-dojo-attach-point\x3d"scenarioNameNode" required\x3d"true" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\x3c/div\x3e\r\n        \x3cdiv style\x3d"width:120px" class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"addBtnNode" title\x3d"${nls.costingInfo.addBtnLabel}"\x3e${nls.costingInfo.addBtnLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTAddScenarioNameTable" data-dojo-attach-point\x3d"addScenarioNameTableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/CostingTemplate.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTLayerNameContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTLayerLabel esriCTEllipsis" data-dojo-attach-point\x3d"layerName"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"btnCostingTemplateNode" class\x3d"esriCTBtnAddSection esriCTEllipsis"\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e ${nls.costingInfo.addCostingTemplateLabel}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"addLayerTableNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/EditCostEquation.html":'\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTPopupFields esriCTEllipsis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel"\x3e\r\n          ${nls.costingInfo.geographyTitle}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTCostEquationFieldContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/TextBox" disabled\x3dtrue data-dojo-attach-point\x3d"geographyValue"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel"\x3e\r\n          ${nls.costingInfo.scenarioTitle}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTCostEquationFieldContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/TextBox" disabled\x3dtrue data-dojo-attach-point\x3d"scenarioValue"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel "\x3e\r\n          ${nls.costingInfo.costEquationTitle}\x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth esriCTCostEquationInput" spellcheck\x3d"false" data-dojo-type\x3d"dijit/form/Textarea" data-dojo-attach-point\x3d"costEquationValue"\r\n            required\x3d"true"\x3e\r\n          \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTFullWidth"\x3e\r\n      \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"costEquationHint"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/StatisticsSettings.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n    \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n        \x3cdiv\x3e\r\n            \x3c!--Add New Statistics button--\x3e\r\n            \x3cdiv class\x3d"esriCTStatisticsContainer" data-dojo-attach-point\x3d"btnAddStatisticsNodeWrapper"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"btnAddStatisticsNode" class\x3d"esriCTBtnStatisticsAddSection"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddStatisticsIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnStatisticsAddLabel"\x3e ${nls.statisticsSettings.addStatisticsLabel}\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"statisticsLayerTableNode"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTNoEditableLayersAvailable" data-dojo-attach-point\x3d"noEditableLayersAvailable"\x3e\r\n                ${nls.costingInfo.noEditableLayersAvailable}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"additionalProjectCostWrapper"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Add/delete/reorder buttons--\x3e\r\n    \x3cdiv class\x3d"esriCTStatisticsButtonParentDiv"\x3e\r\n        \x3cdiv class\x3d"esriCTAddStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnAddNode"\r\n            title\x3d"${nls.statisticsSettings.addNewStatisticsText}" tabindex\x3d"0" role\x3d"button"\r\n            aria-label\x3d"${nls.statisticsSettings.addNewStatisticsText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDeleteStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnCrossNode"\r\n            title\x3d"${nls.statisticsSettings.deleteStatisticsText}" tabindex\x3d"-1" role\x3d"button"\r\n            aria-label\x3d"${nls.statisticsSettings.deleteStatisticsText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsUpIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnUpNode"\r\n            title\x3d"${nls.statisticsSettings.moveStatisticsUpText}" tabindex\x3d"-1" role\x3d"button"\r\n            aria-label\x3d"${nls.statisticsSettings.moveStatisticsUpText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsDownIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnDownNode"\r\n            title\x3d"${nls.statisticsSettings.moveStatisticsDownText}" tabindex\x3d"-1" role\x3d"button"\r\n            aria-label\x3d"${nls.statisticsSettings.moveStatisticsDownText}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ProjectCost.html":'\x3cdiv\x3e\r\n    \x3c!--Add Addtional Project cost button--\x3e\r\n    \x3cdiv class\x3d"esriCTProjectCostContainer" data-dojo-attach-point\x3d"btnAddProjectCostNodeWrapper"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"btnAddProjectCostNode" class\x3d"esriCTBtnProjectCostAddSection"\x3e\r\n            \x3cspan class\x3d"esriCTBtnAddProjectCostIcon"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"esriCTBtnProjectCostAddLabel"\x3e ${nls.projectCostSettings.addProjectCostLabel} \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTProjectCostTableWrapper" data-dojo-attach-point\x3d"projectCostTableWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTProjectCostTableNode" data-dojo-attach-point\x3d"projectCostTableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Add/delete/reorder buttons--\x3e\r\n    \x3cdiv class\x3d"esriCTStatisticsButtonParentDiv"\x3e\r\n        \x3cdiv class\x3d"esriCTAddStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnAddNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDeleteStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnCrossNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsUpIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnUpNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsDownIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnDownNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/Setting.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\t\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"configurationTabParentContainer"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"generalSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"projectSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"layerSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"costingInfoNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"statisticsSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/css/style.css":".jimu-widget-cost-analysis-general-settings .esriCTFieldContainer {float: left; padding: 0px 0px 20px 0px;}.jimu-widget-cost-analysis-general-settings .esriCTDropDownContainer {width: 75%; float: right;}.jimu-widget-cost-analysis-general-settings .esriCTGeneralSettingsLabel {width: 25%; float: left; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsFieldset {margin: 20px 0px 0px 0px; border: 1px solid #D2DAE2;}.jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsLegend {margin-left: 10px; font-weight: bold;}.jimu-widget-cost-analysis-general-settings .esriCTProjectFieldContainer {float: left;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabel {float: right; width: 100%; text-align: center; padding-left: 5px; max-width: 214px;}.jimu-widget-cost-analysis-general-settings .esriCTVerticalCenterAlignLabel {line-height: 30px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsContainer {overflow: hidden; padding: 15px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeContainer {float: left; width: 48%; max-width: 214px; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeInputContainer {width: 52%; float: left;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabelContainer {float: left; width: 50%; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceInputContainer {float: left; width: 20%;}.jimu-widget-cost-analysis-general-settings .esriCTProjectMeasurementUnitContainer {width: 30%; float: left; padding-left: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputRightContainer {float: right; width: 50%}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputLeftContainer {float: left; width: 50%;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceUnit {max-width: 130px;}.jimu-widget-cost-analysis-general-settings .esriCTEditReportSettingsIconContainer {display: inline-block; margin: 5px 0 0 10px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTEditReportSettingsIconContainer {margin: 5px 10px 0 0;}.jimu-widget-cost-analysis-report-settings .esriCTReportNameLabel {line-height: 25px; float: left; margin-right: 10px;}.esriRtl .jimu-widget-cost-analysis-report-settings .esriCTReportNameLabel {float: right;}.jimu-widget-cost-analysis-report-settings .esriCTReportSettingsTable .dijitTextBox {height: 28px;}.esriRtl .jimu-widget-cost-analysis-settings .esriCTTabNode {padding-left: 20px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTFieldContainer {float: right; padding: 0px 0px 20px 0px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTTabNode {padding-left: 20px; padding-right: 0px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTGeneralSettingsLabel {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputLeftContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputRightContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeContainer {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabelContainer {float: right; padding-right: 0px; padding-left: 5px; text-align: center;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceInputContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectMeasurementUnitContainer {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsLegend {margin-left: 0px; margin-right: 10px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabel {padding-right: 5px; padding-left: 0px;}.jimu-widget-cost-analysis-project-settings {width: 100%; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTFieldSet {height: auto; width: 100%; margin-bottom: 10px; padding: 20px 20px 0 20px; border: 1px solid #D2DAE2;}.jimu-widget-cost-analysis-project-settings .esriCTFieldSetLegend {font-weight: bold;}.jimu-widget-cost-analysis-project-settings .esriCTNote,.jimu-widget-cost-analysis-costing-info .esriCTNote {padding-bottom: 20px; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-cost-analysis-project-settings .esriCTHelpIcon {height: 30px; width: 20px; background-repeat: no-repeat; background-position: center center; background-image: url(images/help.png); display: inline-block; vertical-align: top; margin: 0 5px; cursor: pointer;}.jimu-widget-cost-analysis-project-settings .esriCTRowContainer {margin-bottom: 20px; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTLabelContainer {width: 30%; float: left; line-height: 30px; padding: 0 10px 0 0;}.jimu-widget-cost-analysis-project-settings .esriCTDropDownContainer {width: calc( 70% - 30px); float: left; box-sizing: border-box;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsContainer {width: 35%; float: left; padding: 0 10px;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsLabel {width: calc(100% - 36px); line-height: 30px; text-align: right; padding: 0 0 0 10px; float: right;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsCheckBox {margin: 5px 10px; float: right;}.jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable {width: 70%; float: right; margin-bottom: 20px;}.claro .jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable .dijitSelect {height: 27px; margin-top: 1px; width: 99%; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTProjectSettingsFieldsDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 280px; float: left;}.claro .jimu-widget-cost-analysis-project-settings .dijitSelect .dijitInputField {overflow: hidden;}.jimu-widget-cost-analysis-project-settings .esriCTProjectLayerDropdown .dijitSelectLabel {text-align: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTLabelContainer {float: right; padding: 0 0 0 10px;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTDropDownContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsCheckBox {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsLabel {float: left; padding: 0 10px 0 0; text-align: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTProjectLayerDropdown .dijitSelectLabel, .esriRtl .jimu-widget-cost-analysis-project-settings .esriCTProjectSettingsFieldsDropdown .dijitSelectLabel {text-align: right;}.claro .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsTableNode .dijitSelect {width: 99%; height: 27px; float: left;}.jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsFieldsDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 213px;}.jimu-widget-cost-analysis-layer-settings .esriCTNoAssetLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-layer-settings .esriCTDropDownContainer {float: left;}.jimu-widget-cost-analysis-layer-settings .esriCTFieldError {float: left; margin-left: 8px; line-height: 0; margin-top: 4px; cursor: pointer;}.jimu-widget-cost-analysis-layer-settings .esriCTAttributeSettingIcon {height: 16px; width: 16px; background-repeat: no-repeat; margin:auto; background-position: center center; background-image: url(images/attribute_settings.png);}.jimu-widget-cost-analysis-layer-settings .esriCTAttributeSettingDisableIcon {height: 16px; width: 16px; background-repeat: no-repeat; margin:auto; background-position: center center; background-image: url(images/attribute_settings_disable.png);}.esriRtl .jimu-widget-cost-analysis-layer-settings .esriCTFieldError {float: right; margin-right: 8px;}.esriRtl .claro .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsTableNode .dijitSelect {float: right;}.esriRtl .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsFieldsDropdown .dijitSelectLabel {text-align: right;}.jimu-widget-cost-analysis-costing-info .esriCTLayerLabel {padding-left: 0px; float: left; text-align: center; vertical-align: middle; padding-right: 10px; max-width: 60%;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTMangeScenarios {float: right;}.jimu-widget-cost-analysis-costing-info .esriCTLayerNameContainer {float: left; width: 100%;}.jimu-widget-cost-analysis-costing-info .esriCTManageScenarioButtonContainer {float: right; width: 50%;}.jimu-widget-cost-analysis-costing-info .esriCTLayerTableWrapper {padding-bottom: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTUpdateCostCheckBoxParentContainer {clear: both; width: 100%;}.jimu-widget-cost-analysis-costing-info .esriCTUpdateCheckBoxContainer {width: 100%; padding: 10px 0px 10px 0px;}.jimu-widget-cost-analysis-costing-info .esriCTUpdateEquationHint {width: 100%; padding: 0px 0px 10px 0px; float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTUpdateEquationHint {float: right;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitSelect,.claro .jimu-widget-cost-analysis-costing-info .esriCTAddProjectCostTableNode .dijitSelect {width: 100%; height: 28px; float: left;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitTextBox .dijitInputInner,.claro .jimu-widget-cost-analysis-costing-info .esriCTAddProjectCostTableNode .dijitTextBox .dijitInputInner {height: 20px; float: left;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitTextBox,.claro .jimu-widget-cost-analysis-costing-info .esriCTAddProjectCostTableNode .dijitTextBox {height: 26px; float: left;}.jimu-widget-cost-analysis-costing-info .esriCTHelpIcon {height: 36px; width: 20px; background-repeat: no-repeat; background-position: center center; background-image: url(images/help.png); display: inline-block; vertical-align: top; position: absolute; right: 5px;}.jimu-widget-cost-analysis-costing-info .esriCTDropDownContainer {float: left;}.jimu-widget-cost-analysis-edit-equation .esriCTFieldContainer {overflow: hidden; padding: 0px 0px 5px 0px;}.jimu-widget-cost-analysis-edit-equation .esriCTEditCostEquationLabel {width: 40%; float: left; padding-right: 5px;}.jimu-widget-cost-analysis-edit-equation .esriCTVerticalCenterAlignLabel {line-height: 30px;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationFieldContainer {width: 60%; float: right;}.jimu-widget-cost-analysis-edit-equation .esriCTFullWidth {width: 100%;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationInput {height: 70px !important;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationError {border-color: red !important;}.jimu-widget-cost-analysis-edit-equation .esriCTHint {margin: 5px 5px 10px 0px; float: right; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateFeatureTemplate .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateGeography .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-costing-info .esriCTCostingInfoScenarioOptions .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitSelect {width: 99%;}.jimu-widget-cost-analysis-costing-info .jimu-icon-copy {background-image: url(images/copy.png); background-repeat: no-repeat; background-position: center center; width: 16px; height: 16px; padding-left: 10px; padding-right: 10px;}.jimu-widget-cost-analysis-manage-scenarios .title-label, .jimu-widget-cost-analysis-edit-equation .title-label {width: calc(100% - 30px); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-cost-analysis-manage-scenarios .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px; overflow: hidden;}.jimu-widget-cost-analysis-manage-scenarios .esriCTPopupFields {width: 28%; float: left; line-height: 30px; padding-right: 5px;}.jimu-widget-cost-analysis-manage-scenarios .esriCTAddScenarioNameTable {margin-top: 10px;}.jimu-widget-cost-analysis-manage-scenarios .jimu-simple-table {max-height: 240px !important;}.jimu-widget-cost-analysis-costing-info .esriCTNoEditableLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .jimu-simple-table .simple-table-field {position: relative; padding-right: 25px;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTLayerNameContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTMangeScenarios {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTLayerLabel {padding-right: 0px; float: right; padding-left: 10px;}.esriRtl .jimu-widget-cost-analysis-manage-scenarios .esriCTPopupFields {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-edit-equation .esriCTEditCostEquationLabel {float: right; padding-left: 5px; padding-right: 0px;}.esriRtl .jimu-widget-cost-analysis-edit-equation .esriCTCostEquationFieldContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-template .esriCTCancelDialogPopup {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateFeatureTemplate .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateGeography .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingInfoScenarioOptions .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTHelpIcon {right: auto; left: 5px;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTManageScenarioButtonContainer {float: left;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnStatisticsAddSection,.jimu-widget-cost-analysis-statistics-settings .esriCTBtnProjectCostAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-statistics-settings .esriCTHidden {display: none;}.jimu-widget-cost-analysis-statistics-settings .esriCTNoEditableLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnAddStatisticsIcon,.jimu-widget-cost-analysis-statistics-settings .esriCTBtnAddProjectCostIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnStatisticsAddLabel,.jimu-widget-cost-analysis-statistics-settings .esriCTBtnProjectCostAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-statistics-settings .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-cost-analysis-statistics-settings .esriCTLayerLabelTextBox {width: 100%; height: 29px; float: left;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsContainer,.jimu-widget-cost-analysis-statistics-settings .esriCTProjectCostContainer {float: left; width: 40%;}.jimu-widget-cost-analysis-statistics-settings .esriCTDropDownContainer {width: 75%; float: right;}.jimu-widget-cost-analysis-statistics-settings .esriCTLayerNameDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 213px;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsTypeDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 104px;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsFieldDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-statistics-settings .esriCTProjectCostContainer {margin-top: 10px;}.claro .jimu-widget-cost-analysis-statistics-settings .esriCTAddLayerTableNode .dijitSelect {height: 28px; min-width: 100%; float: left;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsContainer,.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTProjectCostContainer {float: right;}.esriRtl .claro .jimu-widget-cost-analysis-statistics-settings .esriCTAddLayerTableNode .dijitSelect {height: 28px; min-width: 100%;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTLayerNameDropdown .dijitSelectLabel {text-align: right; width: 201px;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsTypeDropdown .dijitSelectLabel {text-align: right; width: 96px;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsFieldDropdown .dijitSelectLabel {text-align: right; width: 131px;}.jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostLabelTextbox {width: 100%; height: 28px;}.jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostTypeDropdown {width: 100%;}.claro .jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostTableWrapper .dijitSelect {height: 26px; margin-top: -4px;} .claro .jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostTableWrapper .dijitTextBox {height: 26px; margin-top: -4px;}.jimu-widget-cost-analysis-attribute-settings .esriCTBtnAddField {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-attribute-settings .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-attribute-settings .esriCTBtnAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-attribute-settings .esriCTDropDownContainer {width: 75%; float: right;}.claro .jimu-widget-cost-analysis-attribute-settings .esriCTAttributeSettingsTable .dijitSelect {height: 28px; min-width: 100%; float: left;}.jimu-widget-cost-analysis-attribute-settings .esriCTLayerAttributeDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 145px; font-size: 14px;}.jimu-widget-cost-analysis-attribute-settings .esriCTDisabled {cursor: default; color: #a0acbf; opacity: 0.6;} .jimu-widget-cost-analysis-attribute-settings .esriCTFieldChooserDropdown {height: 26px; width: 100%; float: left;}.esriRtl.jimu-widget-cost-analysis-attribute-settings .esriCTDropDownContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-attribute-settings .esriCTLayerAttributeDropdown .dijitSelectLabel{text-align: right;}.jimu-widget-cost-analysis-settings .jimu-tab3 {height: 100%; overflow: hidden;}.jimu-widget-cost-analysis-settings .jimu-viewstack {height: calc(100% - 45px); overflow: auto;}.jimu-widget-cost-analysis-settings .esriCTTabNode {padding-right: 20px; margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-cost-analysis-settings .esriCTFullWidth {width: 100%;}.jimu-widget-cost-analysis-settings .esriCTFullHeight {height: 100%;}.jimu-widget-cost-analysis-settings .esriCTEllipsis, .jimu-widget-cost-analysis-manage-scenarios .esriCTEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-cost-analysis-settings .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px;}.jimu-widget-cost-analysis-settings .esriCTHidden {display: none;}.jimu-widget-cost-analysis-costing-template .esriCTCancelDialogPopup {width: 13px; height: 12px; padding-right: 5px; text-align: right; cursor: pointer; float: right; background-repeat: no-repeat; background-position: center center; background-image: url(images/close.png);}.jimu-widget-cost-analysis-costing-template .esriCTDialogText {padding: 5px;}.jimu-btn {line-height: 30px !important;}input[type\x3dtext]::-ms-clear {display: none;}",
"*now":function(v){v(['dojo/i18n!*preload*widgets/CostAnalysis/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dojo/Evented jimu/dijit/TabContainer3 ./GeneralSettings ./ProjectSettings ./LayerSettings ./CostingInfo ./StatisticsSettings dojo/_base/lang dojo/_base/array dojo/on jimu/dijit/Message jimu/LayerInfos/LayerInfos ../utils".split(" "),function(v,r,w,q,g,k,l,m,n,f,e,b,a,c,d){return v([r,w],{baseClass:"jimu-widget-cost-analysis-settings",_configurationTabParentContainer:null,_generalSettingsTab:null,_projectSettingsTab:null,_layerSettingsTab:null,_costingInfoTab:null,
_statisticsSettingsTab:null,_layerInfosObj:null,postMixInProperties:function(){this.nls.units={feet:{label:window.jimuNls.units.feet,abbreviation:window.jimuNls.units.feetAbbr},meters:{label:window.jimuNls.units.meters,abbreviation:window.jimuNls.units.metersAbbr},miles:{label:window.jimuNls.units.miles,abbreviation:window.jimuNls.units.milesAbbr},yards:{label:window.jimuNls.units.yards,abbreviation:window.jimuNls.units.yardsAbbr},kilometers:{label:window.jimuNls.units.kilometers,abbreviation:window.jimuNls.units.kilometersAbbr}}},
postCreate:function(){c.getInstance(this.map,this.map.webMapResponse.itemInfo).then(f.hitch(this,function(a){this._layerInfosObj=a}));this._updateConfigData();this._initConfiguration();this.setConfig(this.config)},_updateConfigData:function(){if(this.config.projectSettings.projectLayer)var a=this._layerInfosObj.getLayerInfoById(this.config.projectSettings.projectLayer).layerObject;e.forEach(this.config.layerSettings,f.hitch(this,function(b){b.selectedField&&(b.hasOwnProperty("attributeSetting")||
(b.attributeSetting=[]),b.attributeSetting.push({layerField:b.selectedField,projectField:a.globalIdField}),delete b.selectedField)}))},setConfig:function(){this._layerSettingsTab.setConfig()},getConfig:function(){var a;a=this._generalSettingsTab.validate();if(a.isValid)this.config.generalSettings=this._generalSettingsTab.getConfig();else return this._showMessage(a.errorMessage),d.switchToTab(this._configurationTabParentContainer,this.nls.generalSettings.tabTitle),!1;a=this._projectSettingsTab.validate();
if(a.isValid)this.config.projectSettings=this._projectSettingsTab.getConfig();else return this._showMessage(a.errorMessage),d.switchToTab(this._configurationTabParentContainer,this.nls.projectSettings.tabTitle),!1;this.config.layerSettings=this._layerSettingsTab.getConfig();a=this._costingInfoTab.validate();if(a.isValid)this.config.costingInfoSettings=this._costingInfoTab.getConfig().costingInfoData,this.config.scenarios=this._costingInfoTab.getConfig().scenarios,this.config.updateCostEquationCheckBoxStatus=
this._costingInfoTab.getConfig().updateCostEquationCheckBoxStatus;else return this._showMessage(a.errorMessage),d.switchToTab(this._configurationTabParentContainer,this.nls.costingInfo.tabTitle),!1;this.config.statisticsSettings=this._statisticsSettingsTab.getConfig();if(this._statisticsSettingsTab.additionalProjectCostObj.validateProjectCostData().isValid)this.config.projectCostSettings=this._statisticsSettingsTab.additionalProjectCostObj.getConfig();else return this._showMessage(this.nls.projectCostSettings.invalidProjectCostMessage),
d.switchToTab(this._configurationTabParentContainer,this.nls.statisticsSettings.tabTitle),!1;return this.config},_initConfiguration:function(){this._initTabs();this._initGeneralSettings();this._initProjectSettings();this._initLayerSettings();this._initCostingInfo();this._initStatisticsSettings()},_initTabs:function(){this._configurationTabParentContainer=new q({tabs:[{title:this.nls.generalSettings.tabTitle,content:this.generalSettingsNode},{title:this.nls.projectSettings.tabTitle,content:this.projectSettingsNode},
{title:this.nls.layerSettings.tabTitle,content:this.layerSettingsNode},{title:this.nls.costingInfo.tabTitle,content:this.costingInfoNode},{title:this.nls.statisticsSettings.tabTitle,content:this.statisticsSettingsNode}]},this.configurationTabParentContainer);this.own(b(this._configurationTabParentContainer,"tabChanged",f.hitch(this,function(a){this._configurationTabParentContainer.containerNode.scrollTop=0;if(a===this.nls.costingInfo.tabTitle){a=this._projectSettingsTab.projectMultiplierTable.value;
var b=this._projectSettingsTab.projectAssetsTable.value;""!==this._projectSettingsTab.projectLayerDropDown.value&&""!==a&&""!==b?this._costingInfoTab.disableUpdateCostEquationChk(!1):this._costingInfoTab.disableUpdateCostEquationChk(!0)}})));this._configurationTabParentContainer.startup()},_initGeneralSettings:function(){this._generalSettingsTab=new g({nls:this.nls,map:this.map,config:this.config});this._generalSettingsTab.placeAt(this.generalSettingsNode)},_initProjectSettings:function(){this._projectSettingsTab=
new k({nls:this.nls,map:this.map,config:this.config.projectSettings,layerInfosObj:this._layerInfosObj,appUtils:d});this._projectSettingsTab.placeAt(this.projectSettingsNode);this._projectSettingsTab.on("onLayerSelected",f.hitch(this,function(a){this._layerSettingsTab&&(this._layerSettingsTab.updateLayerSettingsTable(a),this._costingInfoTab._updateCostingInfoTable(a,!0),this._statisticsSettingsTab._updateStatisticsTable(a,!0))}));this._projectSettingsTab.on("onDuplicateLayerSelect",f.hitch(this,function(a){this._showMessage(a)}));
this._projectSettingsTab.on("onProjectLayerSelected",f.hitch(this,function(a){this.projectLayerId=a;this._layerSettingsTab&&(this._layerSettingsTab.projectLayer=a,this._layerSettingsTab.updateAttributeButtonState(a))}));this._projectSettingsTab.on("onGeographyFieldChange",f.hitch(this,function(a,b){if(this._costingInfoTab)if(b&&""!==b)this._costingInfoTab.getGeographyOptions(a,b).then(f.hitch(this,function(a){this._costingInfoTab.onGeographyFieldUpdate(a)}));else this._costingInfoTab.onGeographyFieldUpdate([{label:this.nls.costingInfo.noneValue,
value:""}])}))},_initLayerSettings:function(){this._layerSettingsTab=new l({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj});this._layerSettingsTab.placeAt(this.layerSettingsNode);b(this._layerSettingsTab,"onLayerSettingUpdate",f.hitch(this,function(a){this._costingInfoTab._updateCostingInfoTable(a);this._statisticsSettingsTab._updateStatisticsTable(a)}))},_initCostingInfo:function(){this._costingInfoTab=new m({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj});
this._costingInfoTab.placeAt(this.costingInfoNode)},_initStatisticsSettings:function(){this._statisticsSettingsTab=new n({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj,showActionButtonsInColumn:!0,showActionButtonsInRow:!1});this._statisticsSettingsTab.placeAt(this.statisticsSettingsNode)},_showMessage:function(b){(new a({message:b})).message=b}})});