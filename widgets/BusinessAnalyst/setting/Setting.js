// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/geoenrichment/SelectableTree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented ./when dojo/store/util/QueryResults dojo/store/util/SimpleQueryEngine dstore/QueryResults".split(" "),function(l,k,m,d,c,e,g,h){var a=function(b,a){this.storage=b;this.data=a};a.prototype={storage:null,data:null,filter:function(b){return this.storage._filter(this.data,b)},sort:function(b,a){return this.storage._sort(this.data,b,a)},fetch:function(){return this.storage._fetchRange(this.data)},
fetchRange:function(b){return this.storage._fetchRange(this.data,b)},mayHaveChildren:function(b){return this.storage.mayHaveChildren(b)},getChildren:function(b){return this.storage.getChildren(b,{returnCollection:!0})}};return l(d,{idProperty:"id",bindingProperty:null,autoIdentify:!0,queryEngine:g,isDstoreTree:!1,root:null,data:null,_hash:null,_autoId:null,storage:null,constructor:function(b,a){k.mixin(this,a);this.storage=this;this.root={children:b||[]};k.mixin(this._provideBinding(this.root),{deepness:-1,
selectCount:0,leafCount:0});this._hash={};this.idProperty&&this.autoIdentify&&(this._autoId=1);this._initializeNode(this.root,0);this.data=this.root.children},_provideBinding:function(b){var a=this._getBinding(b);a||(b[this.bindingProperty]=a={});return a},_getBinding:function(b){return this.bindingProperty?b[this.bindingProperty]:b},_initializeNode:function(b,a){var f=this._provideBinding(b);f.selected=!!f.selected;b.children?(f.selectCount=0,f.leafCount=0,m.forEach(b.children,function(n){this._registerNode(n);
var c=this._provideBinding(n);c.parent=b;c.deepness=a;this._initializeNode(n,a+1);f.selectCount+=c.selectCount;f.leafCount+=c.leafCount},this),f.selectCount)?f.selectCount===f.leafCount&&(f.selected=!0):f.selected=!1:("number"!==typeof f.leafCount&&(f.leafCount=1),f.selectCount=f.selected?f.leafCount:0)},isOwned:function(b,a){return a||b!==this.root?this.get(this.getIdentity(b))===b:!0},_registerNode:function(b){this._autoId&&void 0===b[this.idProperty]&&(b[this.idProperty]=this._autoId++);this.idProperty&&
(this._hash[b[this.idProperty]]=b)},_unregisterNode:function(b){this.isOwned(b,!0)&&delete this._hash[b[this.idProperty]]},clear:function(){this.root.children.length&&(m.forEach(this.root.children,function(b){this._unbindNode(b)},this),this.data=this.root.children=[])},destroy:function(){this.clear()},_unbindNode:function(b){b.children&&m.forEach(b.children,function(b){delete this._getBinding(b).parent;this._unbindNode(b)},this);this._unregisterNode(b);var a=this._getBinding(b);a.parent&&(this._incrementCounts(a.parent,
-a.selectCount,-a.leafCount),delete a.parent);a!==b&&delete b[this.bindingProperty]},removeNodes:function(b,a){m.forEach(b&&b.slice(),function(b){if(this.isOwned(b,!0)){var f=this._getBinding(b).parent,a=m.indexOf(f.children,b);0<=a&&f.children.splice(a,1);this._unbindNode(b)}},this);!a&&this.emit("updated")},addNodes:function(b,a,f){if(!a)a=this.root;else if(!this.isOwned(a)||!a.children)return!1;var c=this._getBinding(a).deepness+1,e=0,n=0;m.forEach(b,function(b){if(!this.isOwned(b)){a.children.push(b);
this._registerNode(b);var f=this._provideBinding(b);f.parent=a;f.deepness=c;this._initializeNode(b,c+1);e+=f.selectCount;n+=f.leafCount}},this);this._incrementCounts(a,e,n);!f&&this.emit("updated");return!0},select:function(b,a){return this.changeSelect(b,!0,a)},deselect:function(b){this.changeSelect(b,!1)},changeSelect:function(b,a,f){f=f||this.root.leafCount;var c=b&&this._getBinding(b);if(c){a=!!a;var e=(a?c.leafCount:0)-c.selectCount,d=0>e||this.root.selectCount+e<=f;if(!b.children)return d&&
(c.selected=a,e&&this._incrementCounts(b,e)),d;d&&(c.selected=a);m.forEach(b.children,function(b){this.changeSelect(b,a,f)},this);return d}},_incrementCounts:function(b,a,f){b=this._getBinding(b);b.selectCount+=a;f&&(b.leafCount+=f);b.selectCount?b.selectCount==b.leafCount&&(b.selected=!0):b.selected=!1;b.parent&&this._incrementCounts(b.parent,a,f)},getSelectionState:function(b){if(!this.isOwned(b))return!1;b=this._getBinding(b);return b.selectCount&&b.selectCount!=b.leafCount?"mixed":b.selected=
!!b.selectCount},getSelectedNodes:function(b){return this.getDescendingNodes(this.root,!0,b)},getDescendingNodes:function(b,a,f){if(!this.isOwned(b))return[];var c=[];this._collectNodes(b.children,c,a,f);return c},_collectNodes:function(b,a,f,c){m.forEach(b,function(b){var e=this._getBinding(b),d=null===f||void 0===f?e.leafCount:f?e.selectCount:e.leafCount-e.selectCount;d&&(!b.children||!c&&d==e.leafCount?a.push(b):this._collectNodes(b.children,a,f,c))},this)},inspectChildren:function(b,a,f,c){c&&
(a=k.hitch(c,a));b=b||this.root;(b=b.children)&&f&&(b=b.slice(),b.sort(f));return m.every(b,function(b){var c=a(b);return null===c?!1:!1!==c&&b.children?this.inspectChildren(b,a,f):!0},this)},updateExpandedNodes:function(b,a){for(var f in this._hash)this.updateExpand(this._hash[f],!!b[f]);this._updateOddEven(null,a)},updateExpand:function(b,a,f,c){if(b){var e=!1;b.children&&(b=this._getBinding(b),b.expanded!==a&&(e=!0,b.expanded=a));a={};e&&f&&this._updateOddEven(a,c);return a}},_updateOddEven:function(b,
a){var f=1;this.inspectChildren(null,function(a){!1!==a.visible&&(f=1-f);var c=this._getBinding(a);b&&c.isOdd!==f&&(b[this.getIdentity(a)]=f);c.isOdd=f;return!(!a.children||!c.expanded)},a,this)},isOdd:function(b){return(b=this._getBinding(b))&&b.isOdd},get:function(b){return this._hash[b]},getIdentity:function(b){return this.idProperty?b[this.idProperty]:null},query:function(b,a){return e(this._query(this.data,b,a))},_query:function(b,a,f){return this.queryEngine(a,f)(b)},filter:function(b){return this._filter(this._data,
b)},_filter:function(b,c){b=this._query(b,c);return new a(this.storage,b)},sort:function(b,a){return this._sort(this.data,b,a)},_sort:function(b,c,f){if("function"===typeof c)b=b.slice(),b.sort(e);else{var e;e=Array.isArray(c)?c.map(function(b){return{attribute:b.property,descending:b.descending}}):[{attribute:c,descending:f}];b=this._query(b,{},{sort:e})}return new a(this.storage,b)},mayHaveChildren:function(b){return!!b.children},getChildren:function(b,c){var f=this.isOwned(b,!0)?b.children:null;
b=this.isDstoreTree||c&&c.returnCollection;c=this.queryEngine({},b?null:c)(f||[]);return b?new a(this.storage,c):e(c)},fetch:function(){return this._fetchRange(this.data)},fetchRange:function(b){return this._fetchRange(this.data,b)},_fetchRange:function(b,a){return h(c(a?b.slice(a.start,a.end):b.slice()),{totalLength:c(b.length)})}})})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(l){return l})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(l,
k){function m(d,c){return k(this,function(e){for(var g=0,h=e.length;g<h;g++)d.call(c,e[g],g,e)})}return function(d,c){var e=c&&"totalLength"in c;if(d.then){d=l.delegate(d);var g=d.then(function(d){var a=e?c.totalLength:d.totalLength||d.length;d.totalLength=a;return!e&&a});d.totalLength=e?c.totalLength:g;d.response=c&&c.response}else d.totalLength=e?c.totalLength:d.length;d.forEach=m;return d}})},"widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid":function(){define("dojo/_base/declare dojo/aspect dojo/Evented dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dijit/Tooltip dijit/_WidgetBase ../../dijit/_TemplatedMixin dgrid/OnDemandGrid dgrid/tree esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/TriStateItem ../../dijit/utils/DgridUtil ../../dijit/utils/DomUtil ../../dijit/utils/MouseUtil ../../dijit/tooltips/TooltipUtil dojo/text!./templates/SelectableTreeGrid.html xstyle/css!./css/SelectableTreeGrid.css".split(" "),
function(l,k,m,d,c,e,g,h,a,b,n,f,u,p,q,t,r,y,B,w){var A=l(null,{_selectedRowInfos:null,_lastSelectedRowInfo:null,_outsideHandler:null,_isSelectionFrozen:!1,keepSelectionOnOutsideClick:!1,_previouslySelectedRowsByNode:null,constructor:function(){this._previouslySelectedRowsByNode=new WeakMap},buildRendering:function x(){this._selectedRowInfos={};this.inherited(x,arguments)},postCreate:function v(){this.inherited(v,arguments);d.add(this.domNode,"esriMapsAnalystXNonSelectable")},_reselectSingleNode:function(b){this.selectSingleRow(this._previouslySelectedRowsByNode.get(b),
b)},selectSingleRow:function(b,a){this.unselectAllRows();this._selectRow(b,a)},_selectRow:function(b,a){d.add(b,this.selectedRowClass);d.add(b,"row-level-"+this._getNodeLevel(a));var f=this.tree.getIdentity(a),c={row:b,node:a,nodeId:f,index:a.parent&&a.parent.children.indexOf(a)};this._lastSelectedRowInfo=this._selectedRowInfos[f]=c;this._previouslySelectedRowsByNode.set(a,b);var e=this;this._outsideHandler=this._outsideHandler||g(document.body,"click",function(){y.isMouseOver(e.domNode)||e._isSelectionFrozen||
e.keepSelectionOnOutsideClick||e.unselectAllRows()})},_unselectRow:function(b,a){delete this._selectedRowInfos[this.tree.getIdentity(a)];d.remove(b,this.selectedRowClass)},unselectAllRows:function(){for(var b in this._selectedRowInfos)d.remove(this._selectedRowInfos[b].row,this.selectedRowClass);this._selectedRowInfos={};this._lastSelectedRowInfo=null;this._outsideHandler&&this._outsideHandler.remove();this._outsideHandler=null},getSelectedRowNodes:function(){return this._getSelectedNodesRows().nodes},
selectRowNodes:function(b){var a=this;b&&b.forEach(function(b){var f=a.grid.row(b);f&&f.element&&a._selectRow(f.element,b)})},freezeRowSelection:function(){this._isSelectionFrozen=!0},unfreezeRowSelection:function(){this._isSelectionFrozen=!1},_getSelectedNodesRows:function(){var b=[],a=[],f=[],c;for(c in this._selectedRowInfos)f.push(this._selectedRowInfos[c]);f.sort(function(b,a){return b.index-a.index});f.forEach(function(f){b.push(f.node);a.push(f.row)});return{nodes:b,rows:a}},_emitSelectedRowsEvent:function(){var b=
this._getSelectedNodesRows();if(b.nodes.length)this.onRowsSelected(b.nodes,b.rows)}});return l([b,n,m,A],{templateString:w,tree:null,grid:null,gridClass:"",highlightSelected:!0,firstColumns:null,additionalColumns:null,showRootCheckbox:!0,showCheckboxColumn:!0,showHeader:!0,labelColumnField:"label",gridParams:null,keepContentUnderScroll:void 0,hideInvisibleExpandoIcons:!1,expandOnNodeClick:!1,checkLimit:0,checkLimitMessage:null,checkLimitMessageTimeout:5E3,handleMultipleCheck:!1,enableRowSelection:!1,
enableMultipleRowSelection:!1,allowSelectionFromManyParents:!1,selectedRowFilter:null,selectedRowClass:"row-selected",enableHeaderLabelToggleClick:!0,defaultExpand:null,fitParentSize:!1,renderAllRows:!1,rowPostProcessor:null,_rootCheckbox:null,_checkboxes:null,_lastCheckedNode:null,updateSelectionCountDiv:function(b,a){},getLabel:function(b,a){return b.label},postCreate:function C(){this.inherited(C,arguments);this._createGrid()},resize:function(){this.grid.resize();this._updateCheckboxState(this._rootCheckbox);
for(var b in this._checkboxes)this._updateCheckboxState(this._checkboxes[b]);this._emitSelectionChanged()},setWidth:function(b){this.grid&&this.grid.domNode&&e.set(this.grid.domNode,"width",b+"px")},setHeight:function(b){this.grid&&this.grid.domNode&&e.set(this.grid.domNode,"height",b+"px")},row:function(b){return this.grid.row(b)},cell:function(b){return this.grid.cell(b)},_labelColumn:null,_createGrid:function(){var b=this;this._checkboxes={};var a={label:this.getLabel(this.tree.root,!0),sortable:!1,
field:this.labelColumnField,renderCell:this._renderLabel.bind(this),renderHeaderCell:this._renderLabelHeader.bind(this,this.tree.root)},f;if(this.additionalColumns&&this.additionalColumns.length&&(f=this.additionalColumns.filter(function(a){return a.field===b.labelColumnField})[0])){for(var c in a)void 0===f[c]&&(f[c]=a[c]);a=f}a.indentWidth=a.indentWidth||16;this._labelColumn=a=this._prepareTreeColumn(a);c=[];this.firstColumns&&(c=c.concat(this.firstColumns));this.showCheckboxColumn&&c.push({label:"",
field:"checkbox",sortable:!1,renderCell:this._renderCheckboxForColumn.bind(this),renderHeaderCell:this._renderCheckboxForColumn.bind(this,this.tree.root)});f||c.push(a);this.additionalColumns&&(c=c.concat(this.additionalColumns));a=["esriMapsAnalystXSelectableTreeGrid"];this.gridClass&&a.push(this.gridClass);this.fitParentSize&&a.push("fitParentSize");a=Object.assign({class:a.join(" "),keepScrollPosition:!0,store:this.tree,columns:c},this.gridParams);this.grid=this._createGridObject(a,this.gridContainer);
this.own(this.grid);this.grid._expanded=this.defaultExpand||this.grid._expanded||{};t.oddEvenFix(this.grid);this.own(g(this.tree,"updated",this._onStoreUpdated.bind(this)));this._addKeepScrollHandlers();this._addGridHandlers();this.renderAllRows&&(this.grid.minRowsPerPage=1E4,this.grid.maxRowsPerPage=10250);this.grid.startup();B.autoTooltip(this.domNode);this.showHeader||d.add(this.domNode,"esriMapsAnalystXGridNoHeader");g(this.grid.domNode,".dgrid-expando-icon:click,.dgrid-content .dgrid-column-labelColumn:dblclick,.dgrid-content .dgrid-column-labelColumn:keydown",
function(a){(a=b.grid.row(a))&&b.onExpandChangedUser(a.data)})},_createGridObject:function(b,a){return new f(b,a)},onRowInserted:function(b,a){},_addGridHandlers:function(){function b(b,f){a.enableRowSelection&&f.parent&&(!a.selectedRowFilter||a.selectedRowFilter(f))&&(d.add(b,"esriMapsAnalystXClickable"),g(b,"click",function(c){setTimeout(function(){if(!a._isSelectionFrozen){if(c.shiftKey&&a.enableMultipleRowSelection){if(a._lastSelectedRowInfo&&a._lastSelectedRowInfo.row.parentNode&&a._lastSelectedRowInfo.node.parent===
f.parent){var e=r.getChildIndex(a._lastSelectedRowInfo.row.parentNode,a._lastSelectedRowInfo.row),d=r.getChildIndex(b.parentNode,b),g=e<=d?a._lastSelectedRowInfo.row:b,e=e<=d?b:a._lastSelectedRowInfo.row,d=g;if(g.id!==e.id){do{g=a.grid.row(d).data;a._selectRow(d,g);if(d.id===e.id)break;d=d.nextSibling}while(d)}}else a.selectSingleRow(b,f);r.stealFocus()}else p.isCtrl(c)&&a.enableMultipleRowSelection?a._lastSelectedRowInfo&&a._lastSelectedRowInfo.row.parentNode&&a._lastSelectedRowInfo.node.parent===
f.parent||a.allowSelectionFromManyParents?a._selectedRowInfos[f.id]?a._unselectRow(b,f):a._selectRow(b,f):a.selectSingleRow(b,f):a.selectSingleRow(b,f);a._emitSelectedRowsEvent()}})}))}var a=this;this.own(k.after(this.grid,"insertRow",function(f){var c=f&&a.grid._rowIdToObject[f.id];if(f){if(c&&a.hideInvisibleExpandoIcons&&(!c.children||!c.children.length)){var e=h(".dgrid-expando-icon",f)[0];e&&(e.style.width="0")}r[c&&!1===c.visible?"hide":"show"](f);b(f,c)}c&&(a._updateRowHighlighting(c,f),a.onRowInserted(f,
c));a.rowPostProcessor&&a.rowPostProcessor(f,c);return f}))},_addKeepScrollHandlers:function(){function b(b){if(!a.grid.contentNode)return b;if(a.fitParentSize){var f=r.hasScrollbars(a.grid.bodyNode);a.grid.headerNode.style[a.isLeftToRight()?"right":"left"]=f.w?"":"0px";a._lastContentWidth=a.grid.contentNode.style.width||a._lastContentWidth||"";a.grid.contentNode.style.width=f.h?a._lastContentWidth:""}else a.keepContentUnderScroll?a.grid.contentNode.style.width=a.grid.headerNode.firstChild.offsetWidth+
"px":!1===a.keepContentUnderScroll&&(a.grid.contentNode.style.width="");return b}var a=this;if(this.fitParentSize||void 0!==this.keepContentUnderScroll)k.before(this.grid,"refresh",function(){a.hideCheckLimitMessage();a._lastCheckedNode=null}),k.after(this.grid,"resize",b),k.after(this.grid,"refresh",b)},_getNodeLevel:function(a){var b=-1;for(a=a&&a.parent;a;)b++,a=a.parent;return b},_prepareTreeColumn:function(a){return this._wrapTreeColumn(u(a))},_wrapTreeColumn:function(a){return a},_onStoreUpdated:function(){this._checkboxes=
{};this._refreshGrid();this._rootCheckbox&&this._updateCheckboxState(this._rootCheckbox);this._emitSelectionChanged()},_emitSelectionChanged:function(a){var b=this.tree.root.selectCount;this.updateSelectionCountDiv(this.selectionCounter,b);this.emit("SelectionChanged",{selected:b,toggledTreeNode:a})},refresh:function(){this._refreshGrid();this.refreshCheckboxes()},_isRefreshSuspended:!1,setRefreshSuspended:function(a){this._isRefreshSuspended=a},_refreshGrid:function(){if(!this._isRefreshSuspended){var a=
this.grid.getScrollPosition();this.grid.refresh();this.grid.scrollTo(a);for(var b in this._selectedRowInfos)this.grid.row(this._selectedRowInfos[b].node).element&&this._selectRow(this.grid.row(this._selectedRowInfos[b].node).element,this._selectedRowInfos[b].node)}},getScrollPosition:function(){return this.grid&&this.grid.getScrollPosition()},setScrollPosition:function(a){return this.grid&&this.grid.scrollTo(a)},_renderCheckbox:function(a){if(!a.leafCount&&a!==this.tree.root||!this.showCheckboxColumn||
!1===a.selectable&&void 0===a.indepSelection)return document.createTextNode("");var b=new q(null,{class:"esriStyleInTable"});b.autoToggle=!1;b.node=a;this._updateCheckboxState(b,a);!1===a.enabled&&b.set("disabled",!0);a===this.tree.root?(this._rootCheckbox=b,r[this.showRootCheckbox?"show":"hide"](b.domNode)):this._checkboxes[this.tree.getIdentity(a)]=b;b.onClick=this._onCheckboxClick.bind(this,a,b);return b},_renderCheckboxForColumn:function(a){return(a=this._renderCheckbox(a))&&a.domNode},refreshCheckboxes:function(){this._rootCheckbox&&
this._updateCheckboxState(this._rootCheckbox);for(var a in this._checkboxes)this._updateCheckboxState(this._checkboxes[a])},clearLastCheckInfo:function(){this._lastCheckedNode=null},_onCheckboxClick:function(a,b,f){f.stopPropagation();this.hideCheckLimitMessage();var c=this.handleMultipleCheck&&("function"!==typeof this.handleMultipleCheck||this.handleMultipleCheck(a));c&&f.shiftKey&&this._tryToggleMultipleNodes(this._lastCheckedNode,a,b||f)?this._lastCheckedNode=a:(this._lastCheckedNode=c?a:null,
this._toggleNodeSelection(a,b||f),this.refreshCheckboxes())},_tryToggleMultipleNodes:function(a,b,f){if(!a||a===b||a.parent!==b.parent)return!1;var c=b.parent.children,e=c.indexOf(a);b=c.indexOf(b);a=e<b?1:-1;for(var d=[],g=[],e=e+a;;e+=a){var h=c[e];((void 0===h.indepSelection?h.selected:h.indepSelection)?d:g).push(h);if(e===b)break}d.forEach(function(a){this._toggleNodeSelection(a,f)},this);g.every(function(a){return this._toggleNodeSelection(a,f)},this);this.refreshCheckboxes();return!0},_toggleNodeSelection:function(a,
b){var f=void 0===a.indepSelection?!a.selected:!a.indepSelection;if(f&&this.checkLimit){var c=this.getSelectedNodes().length,e="function"===typeof this.checkLimit?this.checkLimit(this.tree,c):this.checkLimit;if(c>=e)if(void 0===a.indepSelection&&a.children&&!1!==this.tree.getSelectionState(a))f=!1;else return this.showCheckLimitMessage(b),!1}c=!0;void 0===a.indepSelection?(c=this.tree.changeSelect(a,f,e),!c&&this.showCheckLimitMessage(b)):a.indepSelection=f;this._emitSelectionChanged(a);return c},
_checkLimitHandler:null,showCheckLimitMessage:function(b){if(this.checkLimitMessage){var f=b&&(b.domNode||b.target);f&&(a.show(this.checkLimitMessage,f,["above","below"]),b=function(){f&&a.hide(f);f=null},setTimeout(b,this.checkLimitMessageTimeout),this._checkLimitHandler=b,this.onCheckLimitReached(b))}},hideCheckLimitMessage:function(){this._checkLimitHandler&&this._checkLimitHandler();this._checkLimitHandler=null},onCheckLimitReached:function(a){},_updateCheckboxState:function(a){if(a){var b=this._getNodeSelection(a.node);
a.set("checked",b);this._updateRowHighlighting(a.node,null,b)}},_getNodeSelection:function(a){return void 0!==a.indepSelection?a.indepSelection:this.tree.getSelectionState(a)},_updateRowHighlighting:function(a,b,f){this.highlightSelected&&a&&(f=void 0!==f?f:this._getNodeSelection(a),(b=b||this.grid&&this.row(a).element)&&(!0!==f||void 0===a.indepSelection&&!1===a.selectable?d.remove(b,"selected"):d.add(b,"selected")))},_renderLabel:function(a,b,f){b=this._renderLabelNode(a);this._provideLabelClickAction(b,
f,a);return b},_provideLabelClickAction:function(a,b,f){var c=this.expandOnNodeClick&&f.children?f.children.length&&(a=b,function(){this.toggleExpand(f);this.onExpandChangedUser(f)}.bind(this)):!1!==f.enabled&&this.showCheckboxColumn?this._onCheckboxClick.bind(this,f,null):null;c&&(d.add(a,"esriMapsAnalystXClickable"),g(a,"click",function(a){a.stopPropagation();c(a)}))},_renderLabelNode:function(a){return c.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a)})},
_renderLabelHeader:function(a){var b=c.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a)||this._labelColumn&&this._labelColumn.label||""});this.enableHeaderLabelToggleClick&&this.showRootCheckbox&&(d.add(b,"esriMapsAnalystXClickable"),g(b,"click",this._onCheckboxClick.bind(this,a,null)));return b},onRowsSelected:function(a,b){},isNodeSelected:function(a){return a&&(a.selected||a.indepSelection)},getSelectedNodes:function(){var a=this.tree.getSelectedNodes(!1),
b=this._getIndepSelectedNodes();return a.concat(b)},_getIndepSelectedNodes:function(){function a(f){f&&(f.indepSelection&&b.push(f),f.children&&f.children.forEach(a))}var b=[];a(this.tree.root);return b},getSelectedState:function(){if(!this.tree)return null;var a={normalSelection:{},indepSelection:{}},b=this.tree.getSelectedNodes(!1);b&&b.forEach(function(b){a.normalSelection[b.id]=!0});(b=this._getIndepSelectedNodes())&&b.forEach(function(b){a.indepSelection[b.id]=!0});return a},setSelectedState:function(a){if(this.tree){this.tree.changeSelect(this.tree.root,
!1);if(a){for(var b in a.normalSelection){var f=this.tree.get(b);f&&this.tree.changeSelect(f,!0)}for(b in a.indepSelection)if(f=this.tree.get(b))f.indepSelection=!0}this.refreshCheckboxes()}},setNodeSelected:function(a,b,f){a&&(void 0!==a.indepSelection?a.indepSelection=b:this.tree.changeSelect(a,b),!1!==f&&this.refreshCheckboxes())},isExpanded:function(a){a="string"===typeof a?a:a[this.tree.idProperty];return this.grid._expanded&&this.grid._expanded[a]},setExpanded:function(a,b,f){a="string"==typeof a?
a:a[this.tree.idProperty];void 0!==a&&(!1!==f?(f=this.grid.row(a))&&f.element&&this.grid.expand(a,b):this.grid._expanded[a]=b)},toggleExpand:function(a){this.setExpanded(a,!this.isExpanded(a))},getExpandedState:function(){return Object.assign({},this.grid._expanded)},setExpandedState:function(a){this.grid._expanded=a||{}},onExpandChangedUser:function(a){},destroy:function(){this.unselectAllRows();this.inherited(arguments)}})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_TemplatedMixin":function(){define(["dojo/_base/declare",
"dijit/_TemplatedMixin","./_EscapeValueMixin"],function(l,k,m){return l([k,m],{})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_EscapeValueMixin":function(){define(["dojo/_base/declare"],function(l){return l(null,{_escapeValue:function(k){return k.replace(/"/g,"\x26quot;")}})})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/_base/lang dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(l,
k,m,d,c,e,g,h,a,b,n){function f(a,b,f,c){c=this.grid.isRTL?"right":"left";var e=".dgrid-expando-icon";b&&(e+=".ui-icon.ui-icon-triangle-1-"+(f?"se":"e"));a=n("div"+e+"[style\x3dmargin-"+c+": "+a*(this.indentWidth||9)+"px; float: "+c+"]");a.innerHTML="\x26nbsp;";return a}function u(a){var b=this,f=this.style.height;f&&(this.style.display="0px"==f?"none":"block");a&&(n(this,".dgrid-tree-resetting"),setTimeout(function(){n(b,"!dgrid-tree-resetting")}));this.style.height=""}function p(d){var p=d.renderCell||
a.defaultRenderCell,q,l;d||(d={});d.shouldExpand=d.shouldExpand||function(a,b,f){return f};g.after(d,"init",function(){var a=d.grid,p=".dgrid-content .dgrid-column-"+d.id,t=[];a.cleanEmptyObservers=!1;if(!a.store)throw Error("dgrid tree column plugin requires a store to operate.");d.renderExpando||(d.renderExpando=f);t.push(a.on(d.expandOn||".dgrid-expando-icon:click,"+p+":dblclick,"+p+":keydown",function(b){var f=a.row(b);a.store.mayHaveChildren&&!a.store.mayHaveChildren(f.data)||"keydown"==b.type&&
32!=b.keyCode||"dblclick"==b.type&&l&&1<l.count&&f.id==l.id&&-1<b.target.className.indexOf("dgrid-expando-icon")||a.expand(f);-1<b.target.className.indexOf("dgrid-expando-icon")&&(l&&l.id==a.row(b).id?l.count++:l={id:a.row(b).id,count:1})}));h("touch")&&t.push(a.on(b.selector(p,b.dbltap),function(){a.expand(this)}));a._expanded||(a._expanded={});t.push(g.after(a,"insertRow",function(a){var b=this.row(a);d.shouldExpand(b,q,this._expanded[b.id])&&this.expand(a,!0,!0);return a}));t.push(g.before(a,"removeRow",
function(b,f){if(b=b.connected)c("\x3e.dgrid-row",b).forEach(function(b){a.removeRow(b,!0)}),f||n(b,"!")}));d.collapseOnRefresh&&t.push(g.after(a,"cleanup",function(){this._expanded={}}));a._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};a.expand=function(b,f,g){var p=b.element?b:a.row(b),q=h("transitionend");b=new m;var k=b.promise;b.resolve();b=p.element;b=-1<b.className.indexOf("dgrid-expando-icon")?b:c(".dgrid-expando-icon",b)[0];g=g||!1===d.enableTransitions;
if(b&&b.mayHaveChildren&&(g||f!==!!this._expanded[p.id])){var l=void 0===f?!this._expanded[p.id]:f;n(b,".ui-icon-triangle-1-"+(l?"se":"e")+"!ui-icon-triangle-1-"+(l?"e":"se"));f=p.element;var v=f.connected,t,r,z={originalQuery:this.query};if(!v){var v=z.container=f.connected=n(f,"+div.dgrid-tree-container"),y=function(b){return a.store.getChildren(p.data,b)};d.allowDuplicates&&(z.parentId=p.id);"level"in b&&(y.level=b.level);k=k.then(function(){if(a.renderQuery)return a.renderQuery(y,z);var b=n(v,
"div"),f=a.renderArray(y(z),b,"level"in y?{queryLevel:y.level}:{});m.when(f,function(){n(b,"!")});return f});q?e(v,q,u):u.call(v)}v.hidden=!l;t=v.style;!q||g?(t.display=l?"block":"none",t.height=""):(l?(t.display="block",r=v.scrollHeight,t.height="0px"):(n(v,".dgrid-tree-resetting"),t.height=v.scrollHeight+"px"),setTimeout(function(){n(v,"!dgrid-tree-resetting");t.height=l?r?r+"px":"auto":"0px"}));l?this._expanded[p.id]=!0:delete this._expanded[p.id]}return k};g.after(d,"destroy",function(){k.forEach(t,
function(a){a.remove()});delete a.expand;delete a._calcRowHeight})});d.renderCell=function(a,b,f,c){var e=d.grid,g=Number(c&&c.queryLevel)+1,h=!e.store.mayHaveChildren||e.store.mayHaveChildren(a),u=c.parentId,g=q=isNaN(g)?0:g,e=d.renderExpando(g,h,e._expanded[(u?u+"-":"")+e.store.getIdentity(a)],a);e.level=g;e.mayHaveChildren=h;(a=p.call(d,a,b,f,c))&&a.nodeType?(n(f,e),n(f,a)):f.insertBefore(e,f.firstChild)};return d}p.defaultRenderExpando=f;d.getObject("dgrid.tree",!0);return dgrid.tree=p})},"dgrid/util/has-css3":function(){define(["dojo/has"],
function(l){function k(d,c){d=d.style;var e;if(c in d)return!0;c=c.slice(0,1).toUpperCase()+c.slice(1);for(e=m.length;e--;)if(m[e]+c in d)return m[e];return!1}var m=["ms","O","Moz","Webkit"];l.add("css-transitions",function(d,c,e){return k(e,"transitionProperty")});l.add("css-transforms",function(d,c,e){return k(e,"transform")});l.add("css-transforms3d",function(d,c,e){return k(e,"perspective")});l.add("transitionend",function(){var d=l("css-transitions");return d?!0===d?"transitionend":{ms:"MSTransitionEnd",
O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[d]:!1});return l})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(l,k,m){var d={listenToKeyboardCombinationOverNode:function(a){return l(document.body,"keydown",function(b){if(!a.isCtrl||d.isCtrl(b))if(!a.isShift||b.shiftKey)if(!a.isAlt||b.altKey)String.fromCharCode(b.keyCode).toLowerCase()!==a["char"]||a.node&&!m.isNodeInLayout(a.node)||a.callback(b)})},isCtrl:function(a){return a.ctrlKey||
c.ctrlKey||c.cmdKey||k("mac")&&a.metaKey}},c={};if(k("mac")){var e=function(b,e){kC=b.keyCode;(g||h)&&(91===kC||93===kC)||a&&224===kC?c.cmdKey=e:16===kC?c.shiftKey=e:17===kC?c.ctrlKey=e:18===kC&&(c.altKey=e)},g=k("webkit"),h=k("opera"),a=k("mozilla");l(document.body,"keydown",function(a){e(a,!0)});l(document.body,"keyup",function(a){e(a,!1)})}return d})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),
function(l,k,m,d,c,e,g){function h(){b||(b=d.create("div",{"class":"esriGEOffscreen"},document.body));return b}var a={isHidden:function(a){return a&&m.contains(a,"esriGEHidden")},hasVisibleChildren:function(b){if(!b||!b.children.length)return!1;for(var f=0;f<b.children.length;f++)if(!a.isHidden(b.children[f]))return!0;return!1},hide:function(b){return a.addTag(b,"esriGEHidden")},show:function(b){return a.removeTag(b,"esriGEHidden")},display:function(b,c){return a[c?"show":"hide"](b)},addTag:function(b,
c){return a.applyCallback(b,function(a){a&&m.add(a,c)})},removeTag:function(b,c){return a.applyCallback(b,function(a){a&&m.remove(a,c)})},applyCallback:function(a,b,c){c&&(b=l.hitch(c,b));Array.isArray(a)?a.forEach(b):b(a);return a},getChildIndex:function(a,b){if(!a||!a.children||!b)return-1;for(var f=0;f<a.children.length;f++)if(a.children[f]===b)return f;return-1},getChildren:function(a){if(!a||!a.children)return null;for(var b=[],f=0;f<a.children.length;f++)b.push(a.children[f]);return b},getChildNodes:function(a){if(!a||
!a.childNodes)return null;for(var b=[],f=0;f<a.childNodes.length;f++)b.push(a.childNodes[f]);return b},isChildOf:function(a,b,c){var f=!1,e=function(a){if(c&&!c(a))return!1;a.parentNode===b?f=!0:a.parentNode&&e(a.parentNode)};a&&e(a);return f},isNodeInLayout:function(b){return a.isChildOf(b,document.body,function(b){return!a.isHidden(b)&&"none"!=e.get(b,"display")&&!m.contains(b,"dijitHidden")})},isNodeVisible:function(b){return a.isChildOf(b,document.body,function(a){return!m.contains(a,"dijitHidden")&&
"hidden"!=e.get(a,"visibility")})},isNodeOnscreen:function(b){return a.isChildOf(b,document.body,function(a){return!m.contains(a,"esriGEOffscreen")})},enableContent:function(a,b,g){if(a){g=g||{};var f=a.children.length-1;if(!(0>f)){f=a.children[f];m.contains(f,"esriGEDisabledContent")||(f=null);if(b)f&&a.removeChild(f);else if(f=f||d.create("div",{"class":"esriGEDisabledContent"+(g.overlayClass?" "+g.overlayClass:"")},a),g.textContent&&(f.textContent=g.textContent),!1!==g.fitParent&&(a=c[g.marginBox?
"getMarginBox":"getContentBox"](a).h))a=a.toString()+"px",e.set(f,{height:a,marginTop:"-"+a});return f}}},enableContentAbsolute:function(b,c,d){if(b){d=d||{};var f=e.get(b,"position");"relative"!==f&&"absolute"!==f&&e.set(b,"position","relative");return a.enableContent(b,c,{overlayClass:"esriGEAbsoluteStretched "+(d.overlayClass||"")+(d.isTransparent?" esriGEDisabledContentTransparent ":""),fitParent:!1,textContent:d.textContent})}}},b;a.hideNodeInBackground=function(a,c){if(a){if(a._hideNodeInBackgroundUndoController)return a._hideNodeInBackgroundUndoController;
var f=d.create("div",null,a,"after"),e=d.create("div",{style:"position: absolute; left: 0px; top: 0px;"},h());d.place(a,e);c="DomUtil.hideNodeInBackground"+(c?"."+c:"");k.set(f,"_bg_memo_node",c);k.set(e,"_bg_temp_node",c);c={undo:function(){f&&(f.parentNode&&d.place(a,f,"replace"),d.destroy(f),d.destroy(e),b.children.length||(d.destroy(b),b=null),f=null,delete a._hideNodeInBackgroundUndoController)},remove:function(){this.undo()}};return a._hideNodeInBackgroundUndoController=c}};a.showNodeFromBackground=
function(a){a&&a._hideNodeInBackgroundUndoController&&a._hideNodeInBackgroundUndoController.undo()};a.noTransformPosition=function(a){function b(a){for(var b={x:0,y:0};a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent,b.x+=e.get(a,"borderLeftWidth"),b.y+=e.get(a,"borderTopWidth");return b}function f(a){return e.get(a,"width")+e.get(a,"paddingLeft")+e.get(a,"paddingRight")+e.get(a,"borderLeftWidth")+e.get(a,"borderRightWidth")}function c(a){return e.get(a,"height")+e.get(a,"paddingTop")+
e.get(a,"paddingBottom")+e.get(a,"borderTopWidth")+e.get(a,"borderBottomWidth")}if(a){var d;if(a instanceof SVGElement&&a.getBBox)return d=(d=a.ownerSVGElement&&a.ownerSVGElement.parentNode)&&b(d),a=a.getBBox(),{x:(a.x||0)+d.x,y:(a.y||0)+d.y,w:a.width||0,h:a.height||0};d=b(a);return{x:d.x,y:d.y,w:f(a),h:c(a)}}};a.uniteNodeBoxes=function(b,c){var f=1E6,e=1E6,d=-1E6,g=-1E6;b.forEach(function(b){b=a.noTransformPosition(b);f=Math.min(f,b.x);e=Math.min(e,b.y);d=Math.max(d,b.x+b.w);g=Math.max(g,b.y+b.h)});
b={x:f,y:e,w:d-f,h:g-e};c&&(c=a.noTransformPosition(c),b.x-=c.x,b.y-=c.y);return b};a.getNodesBox=function(b,e){if(!b||!b.length)return null;for(var f=1E6,d=-1E6,g=1E6,h=-1E6,n=0;n<b.length;n++)var u=b[n],u=e&&e.ignoreTranformation?a.noTransformPosition(u):c.position(u),f=Math.min(f,u.x),g=Math.min(g,u.y),d=Math.max(d,u.x+u.w),h=Math.max(h,u.y+u.h);return{x:f,y:g,w:d-f,h:h-g}};a.traverseChildren=function(a,b){function f(a){if(a&&a.children)for(var c=0;c<a.children.length;c++){var e=a.children[c];
if(b(e))break;f(e)}}f(a)};a.scrollToListNode=function(a,b,c){var f=b.offsetTop+b.clientHeight,e=f-(a.scrollTop+a.clientHeight);0<e&&(a.scrollTop+=e);c&&(f-=b.clientHeight-c.offsetTop,e=a.scrollTop-f,0<e&&(a.scrollTop-=e))};var n;a.getScrollbarSize=function(){if(!n){var a=d.create("div",null,document.body);a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";a.style.position="absolute";a.style.top="9999px";n={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight};d.destroy(a)}return n};
a.hasScrollbars=function(a){var b=e.getComputedStyle(a);return{w:"scroll"===b.overflowX||a.offsetWidth>a.clientWidth&&"auto"===b.overflowX,h:"scroll"===b.overflowY||a.offsetHeight>a.clientHeight&&"auto"===b.overflowY}};a.getMeasureContext=function(a){a=a||{};a.style=a.style?a.style+" ":"";a.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:d.create("div",a,document.body),measureText:function(a){this.div.innerHTML=a;a=c.getMarginBox(this.div);delete a.l;delete a.t;return a},
destroy:function(){d.destroy(this.div)}}};a.getTextBox=function(b,c){c=a.getMeasureContext(c);b=c.measureText(b);c.destroy();return b};a.getNodeFontFamily=function(a){return(a=e.get(a,"fontFamily")||e.getComputedStyle(a)["font-family"])?a.replace(/'|"/g,"").split(",")[0]:a};a.getNodeFontSize=function(a){return e.toPixelValue(a,e.get(a,"fontSize"))};a.stealFocus=function(){var a=new g;try{var b=d.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});d.place(b,document.body);
b.select();d.destroy(b)}catch(p){}setTimeout(a.resolve,0);return a.promise};a.getWindowBox=function(){for(var b=[],c=0,e=document.body.children.length;c<e;c++){var d=document.body.children[c];a.isHidden(d)||(a.hide(d),b.push(d))}c={w:document.body.clientWidth,h:document.body.clientHeight};b.forEach(function(b){a.show(b)});return c};a.getBorder=function(a){return{t:e.toPixelValue(a,e.get(a,"borderTopWidth")),r:e.toPixelValue(a,e.get(a,"borderRightWidth")),b:e.toPixelValue(a,e.get(a,"borderBottomWidth")),
l:e.toPixelValue(a,e.get(a,"borderLeftWidth"))}};return a})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],function(l){return l})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil".split(" "),function(l,k,m,d,c,e,g,h){return l(d,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(a,
b,d){var f=h.isMobileDevice()?"touchstart":"click";b=b||{};var n=b["class"];b["class"]=(n?n+" ":"")+"esriTriStateCheckBoxIcon";if(n=b.label){if(a instanceof HTMLLabelElement)a.innerHTML="\x26nbsp;"+n;else{var k=b.labelAttrs||{};k.innerHTML="\x26nbsp;"+n;k=e.create("label",k);a&&e.place(k,a);a=k}b=m.mixin({},b);delete b.label;delete b.labelAttrs}this.checkboxNode=e.create("div",b,a,a instanceof HTMLLabelElement?"first":d);this._currentClass=this._composeClass();g.add(this.checkboxNode,this._currentClass);
a instanceof HTMLLabelElement?(c(a,f,m.hitch(this,this._onClick)),g.add(a,"esriTriStateCheckBoxLabel")):c(this.checkboxNode,f,m.hitch(this,this._onClick));this.domNode=n?a:this.checkboxNode},postscript:function(){},_onClick:function(a){this.disabled||(this.autoToggle&&this.toggle(),a.checked=this.checked,this.onClick(k.fix(a)))},onClick:function(a){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(a){a!==this.checked&&(this.checked="mixed"===a?
a:this._lastChecked=!!a,this._updateClass())},_disabledSetter:function(a){this.disabled=!!a;this._updateClass()},_updateClass:function(){var a=this._composeClass();a!==this._currentClass&&(g.replace(this.checkboxNode,a,this._currentClass),this._currentClass=a)},_composeClass:function(){var a="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?a+"Disabled":a}})})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff"],function(l){var k=
{},m=function(){var d=window,c=document,e=d.navigator.platform,g=d.navigator.userAgent,h={ios:!1,android:!1,androidChrome:!1,desktop:!1,windowsPhone:!1,iphone:!1,iphoneX:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!d.cordova&&!d.phonegap),phonegap:!(!d.cordova&&!d.phonegap)},a=d.screen.width,b=d.screen.height,n=g.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),f=g.match(/(Android);?[\s\/]+([\d.]+)?/),k=g.match(/(iPad).*OS\s([\d_]+)/),p=g.match(/(iPod)(.*OS\s([\d_]+))?/),m=
!k&&g.match(/(iPhone\sOS|iOS)\s([\d_]+)/),a=m&&(375===a&&812===b||414===a&&896===b),b=0<=g.indexOf("MSIE ")||0<=g.indexOf("Trident/"),l=0<=g.indexOf("Edge/"),r=0<=g.indexOf("Gecko/")&&0<=g.indexOf("Firefox/"),y="MacIntel"===e,e="Win32"===e;h.ie=b;h.edge=l;h.firefox=r;n&&(h.os="windows",h.osVersion=n[2],h.windowsPhone=!0);f&&!e&&(h.os="android",h.osVersion=f[2],h.android=!0,h.androidChrome=0<=g.toLowerCase().indexOf("chrome"));if(k||m||p)h.os="ios",h.ios=!0;m&&!p&&(h.osVersion=m[2].replace(/_/g,"."),
h.iphone=!0,h.iphoneX=a);k&&(h.osVersion=k[2].replace(/_/g,"."),h.ipad=!0);p&&(h.osVersion=p[3]?p[3].replace(/_/g,"."):null,h.iphone=!0);h.ios&&h.osVersion&&0<=g.indexOf("Version/")&&"10"===h.osVersion.split(".")[0]&&(h.osVersion=g.toLowerCase().split("version/")[1].split(" ")[0]);h.webView=!(!(m||k||p)||!g.match(/.*AppleWebKit(?!.*Safari)/i)&&!d.navigator.standalone)||d.matchMedia&&d.matchMedia("(display-mode: standalone)").matches;h.standalone=h.webView;h.desktop=!(h.os||h.android||h.webView);h.desktop&&
(h.macos=y,h.windows=e);h.os&&"ios"===h.os&&(g=h.osVersion.split("."),c=c.querySelector('meta[name\x3d"viewport"]'),h.minimalUi=!h.webView&&(p||m)&&(7===1*g[0]?1<=1*g[1]:7<1*g[0])&&c&&0<=c.getAttribute("content").indexOf("minimal-ui"));h.needsStatusbarOverlay=function(){return(h.webView||h.android&&h.cordova)&&d.innerWidth*d.innerHeight===d.screen.width*d.screen.height?!h.iphoneX||90!==d.orientation&&-90!==d.orientation?!0:!1:!1};h.statusbar=h.needsStatusbarOverlay();h.pixelRatio=d.devicePixelRatio||
1;return h}();k.device=m;k.isMobileDevice=function(){return!m.desktop&&!m.ipad};k.isPCWithTouchScreen=function(){return m.desktop&&l("touch")};k.isLandscape=function(){return 90===Math.abs(window.orientation)};k.press=m.desktop?"mousedown":"touchstart";k.release=m.desktop?"mouseup":"touchend";k.click=m.desktop?"click":"touchend";k.clickOrRelease=m.desktop?"click, mouseup":"touchend";k.move=m.desktop?"mousemove":"touchmove";return k})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DgridUtil":function(){define(["dojo/aspect",
"dojo/dom-class","dojo/query","../../utils/ArrayUtil"],function(l,k,m,d){function c(a,b,c){if(void 0===c){var f=a._rowIdToObject[b.id];f&&(c=(a=a.store)&&a.isOdd&&a.isOdd(f))}0!==c&&1!==c||k.replace(b,h[c],h[1-c])}function e(a,b,e){var f=a.store;if(f&&f.updateExpand){e=f.updateExpand(b.data,e,!0,a.getSortingFunction());for(var d in e)b=a.row(f.get(d)),b.element&&c(a,b.element,e[d])}}var g=["ui-icon-triangle-1-e","ui-icon-triangle-1-se"],h=["dgrid-row-even","dgrid-row-odd"];return{createExpando:function(a){k.add(a,
"dgrid-expando-icon ui-icon ui-icon-triangle-1-e esriMapsAnalystXClickable");return{expando:a,update:function(b){b=b?1:0;k.replace(a,g[b],g[1-b])}}},oddEvenFix:function(a){a.expand&&(a.getSortingFunction=function(){var a=this.get("sort");return a&&a.length?d.getSorting(a):null},l.after(a,"insertRow",function(b){c(a,b);return b}),l.before(a,"refresh",function(){var b=a.store;b&&b.updateExpandedNodes&&b.updateExpandedNodes(a._expanded,a.getSortingFunction())}),l.around(a,"expand",function(b){return function(c,
f){var d=c.element?c:a.row(c);void 0===f&&(f=!a._expanded[d.id]);!0===f&&e(a,d,!0);var g=b.apply(this,arguments);!1===f&&e(a,d,!1);return g}}),l.around(a,"adjustRowIndices",function(b){return function(){var c=a.store;c&&c.updateExpandedNodes&&c.updateExpand&&c.isOdd||b.apply(this,arguments)}}))},makeContentNeverGoUnderScroll:function(a){function b(){var b=a.headerNode.firstChild,c=a.contentNode;c&&b&&b.offsetWidth!==c.offsetWidth&&(c.style.width="",b.style.width="",b.style.width=c.offsetWidth+"px")}
l.after(a,"resize",b);l.after(a,"refresh",b);l.after(a,"expand",function(a){setTimeout(b,100);setTimeout(b,300);return a})},inlineSortArrow:function(a,b,c){b=d.arrayToObject(d.listToArray(b));l.after(a,"updateSortArrow",function(f,e){if((e=f[0]&&f[0].attribute)&&b[e]){var d=(e=a._sortNode||a._findSortArrowParent(e))&&m(".dgrid-sort-arrow",e)[0];f=f[0].descending;if(d){d.remove();k.remove(e,"dgrid-sort-down dgrid-sort-up");var g=c?m(c,e)[0]:e.lastChild.append?e.lastChild:e;g.append||(g=e);k.add(g,
f?"dgrid-sort-down":"dgrid-sort-up");g.append(d)}}},!0)}}})},"widgets/BusinessAnalyst/esriAnalystX/utils/ArrayUtil":function(){define("require exports ../../baUtil/array dojo/store/util/SimpleQueryEngine ./ObjectUtil esri/dijit/geoenrichment/utils/ArrayUtil".split(" "),function(l,k,m,d,c,e){function g(a,c){a.some(function(b,e){c.func(b,e,c,a);if(c.stop)return!0});return c}function h(a){var b=a.split(" "),f=b[1];a={};switch(b[0]){case "max":a.result=-Infinity;b=function(a,b,e){e.result=Math.max(e.result,
c.getObject(a,f))};break;case "min":a.result=Infinity;b=function(a,b,e){e.result=Math.min(e.result,c.getObject(a,f))};break;case "sum":a.result=0;b=function(a,b,e){e.result+=c.getObject(a,f)};break;case "random":a.result=void 0;b=function(a,b,c,f){c.result=f[Math.round((f.length-1)*Math.random())];c.stop=!0};break;default:throw Error("Unsupported query.");}a.func=b;return a}var a={getSorting:function(a,e){if(!a)return c.compare;if("function"===typeof a)return a;var b;b=Array.isArray(a)?a:a.sort||
[a];var d={};"string"===typeof e&&(e=[e]);Array.isArray(e)?e.forEach(function(a){d[a]=c.compareNames}):e&&(d=e);return function(a,f){for(var e=void 0,g=0;e=b[g];g++){var h=a[e.attribute],n=f[e.attribute];if(h=(d[e.attribute]||(d["*"]?d["*"].bind(null,e.attribute):c.compare))(h,n,!1,!1,a,f))return e.descending?-h:h}return 0}},sort:function(b,c,f){return b.sort(a.getSorting(c,f))},sortIndices:function(b,c,f){b=m.map(b,function(a,b){return{value:a,index:b}});var e=a.getSorting(c,f);b.sort(function(a,
b){return e(a.value,b.value)});return m.map(b,function(a){return a.index})},getQueryEngine:function(b,c){return function(f,e){e&&e.sort&&(e=Object.assign({},e),e.sort=a.getSorting(e.sort,b));return(c||d)(f,e)}},objectToArray:function(a,c){void 0===c&&(c=null);var b=[],e=c?function(b){return a[b]?a[b][c]:void 0}:function(b){return a[b]},d;for(d in a){var g=e(d);"undefined"!==typeof g&&b.push(g)}return b},arrayToObject:function(a,c){var b={},d=e.composeIdentityFunction(c);m.forEach(a,function(a){b[d(a)]=
a});return b},composeIdentityFunction:e.composeIdentityFunction,removeDuplicates:e.removeDuplicates,splitArrayToBunches:e.splitArrayToBunches,contains:function(a,c){return-1!==m.indexOfLoose(a,c)},remove:function(a,c){c=m.indexOfLoose(a,c);-1!==c&&a.splice(c,1);return-1!==c},merge:function(a,c){a=a||[];null!=c&&Array.prototype.push.apply(a,c);return a},listToArray:function(a,c){if(null==a)return[];void 0===c&&(c=",");a="string"===typeof a?a.split(c):a.slice();for(c=0;c<a.length;c++)"string"===typeof a[c]&&
(a[c]=a[c].trim());return a},reorderArray:function(a,c){var b=a.length,e=0,d=Array(b),g={},h={},n;for(n in c){var k=Math.round(n);if(0<=k&&k<b&&!g[k]){var m=Math.round(c[n]);0<=m&&m<b&&!h[m]&&(d[m]=a[k],g[k]=1,h[m]=1,e++)}}e!==b&&(d=d.filter(function(a,b){return h[b]}),a.forEach(function(a,b){!g[b]&&d.push(a)}));return d},mapIndices:function(a,c,e,d){d=null==d?null:d;if(1===a)e.call(d,0,Math.floor(c/2));else{c=(c-1)/(a-1);for(var b=0;b<a;b++)e.call(d,b,Math.floor(.5+b*c))}},moveElement:function(a,
c,e,d){var b=Array.isArray(c)?c:[c];if(-1!==b.indexOf(e))return a.slice();var f=[];a.forEach(function(a){-1===b.indexOf(a)&&(a==e?"before"===d?(b.forEach(function(a){f.push(a)}),f.push(e)):"after"===d&&(f.push(e),b.forEach(function(a){f.push(a)})):f.push(a))});return f},min:function(a,c){var b=a.length;switch(b){case 0:return null;case 1:return a[0];default:for(var e=a[0],d=c(e),g=0,h=1;h<b;h++){var k=c(a[h]);d>k&&(e=a[h],d=k,g=h)}return{key:g,value:e,comparisonValue:d}}},max:function(a,c){var b=
a.length;switch(b){case 0:return null;case 1:return a[0];default:for(var e=a[0],d=c(e),g=0,h=1;h<b;h++){var k=c(a[h]);d<k&&(e=a[h],d=k,g=h)}return{key:g,value:e,comparisonValue:d}}},query:function(a,c){if("object"===typeof c)return g(a,c);if("string"===typeof c)return c=h(c),g(a,c).result},everyEqualProperty:function(a,c){if(2>a.length)return!0;var b;return!a.some(function(a,e){if(0===e)b=a[c];else if(b!==a[c])return!0})}};return a})},"widgets/BusinessAnalyst/baUtil/array":function(){define(["require",
"exports"],function(l,k){var m=Array.prototype,d={every:function(c,e,d){return null==c?!0:"string"===typeof c?m.every.call(c.split(""),e,d):m.every.call(c,e,d)},some:function(c,e,d){return null==c?!1:"string"===typeof c?m.some.call(c.split(""),e,d):m.some.call(c,e,d)},forEach:function(c,e,d){if(null!=c)return"string"===typeof c?m.forEach.call(c.split(""),e,d):m.forEach.call(c,e,d)},map:function(c,e,d){return null==c?[]:"string"===typeof c?m.map.call(c.split(""),e,d):m.map.call(c,e,d)},filter:function(c,
e,d){return null==c?[]:"string"===typeof c?m.filter.call(c.split(""),e,d):m.filter.call(c,e,d)},indexOf:function(c,e){return null==c?-1:"string"===typeof c?m.indexOf.call(c.split(""),e):m.indexOf.call(c,e)},indexOfLoose:function(c,e){if(null==c||void 0===c.length)return-1;if("string"===typeof c)return d.indexOfLoose(c.split(""),e);for(var g=0,h=c.length;g<h;g++)if(c[g]==e)return g;return-1},lastIndexOf:function(c,e){return null==c?-1:"string"===typeof c?m.lastIndexOf.call(c.split(""),e):m.lastIndexOf.call(c,
e)},lastIndexOfLoose:function(c,e){if(null==c||void 0===c.length)return-1;if("string"===typeof c)return d.lastIndexOfLoose(c.split(""),e);for(var g=c.length-1;0<=g;g--)if(c[g]==e)return g;return-1}};return d})},"widgets/BusinessAnalyst/esriAnalystX/utils/ObjectUtil":function(){define(["../../baUtil/ObjectUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/utils/SortUtil"],function(l,k,m){var d=Object.assign({},l,k,m);d.getPrototypeOf=function(c){try{return Object.getPrototypeOf?
Object.getPrototypeOf(c):c.__proto__||c.constructor&&c.constructor.prototype}catch(e){return null}};d.isJson=function(c){return"object"===typeof c&&d.getPrototypeOf(c)===Object.prototype};d.copyJson=function(c){return void 0===c||null===c?null:JSON.parse(JSON.stringify({object:c})).object};d.convert=function(c,e,g){var h=e||function(){};e=h(c);if("undefined"!==typeof e)return e;if(Array.isArray(c)){var a=[];c.forEach(function(b){a.push(d.convert(b,h,g))},this);return a}if(!d.isJson(c))return c;e=
{};for(var b in c){var k=c[b],f=g?h(b):b;"undefined"==typeof f&&(f=b);e[f]=d.convert(k,h,g)}return e};d.getDeepCopy=function(c){return d.convert(c)};d.getRange=function(c,e,d){e="function"===typeof e?e.bind(null==d?null:d):null;var g,a,b;for(b in c)d=c[b],d=Number(null===e?d:e(d,b)),isNaN(d)||(void 0===g?g=a=d:(g=Math.min(g,d),a=Math.max(a,d)));return void 0===g?{}:{min:g,max:a}};d.removeEmptyObjects=function(c){function e(c){c&&"object"===typeof c&&Object.keys(c).forEach(function(a){var b=c[a];!b||
"object"!==typeof b||Array.isArray(b)||Object.keys(b).length?e(b):(d=!0,delete c[a])})}for(var d=!0;d;)d=!1,e(c);return c};d.removeValues=function(c,e){function d(c){c&&"object"===typeof c&&Object.keys(c).forEach(function(a){e(a,c[a])?d(c[a]):delete c[a]})}d(c);return c};d.isEqual=function(c,e){if(null===c||"object"!==typeof c||null===e||"object"!==typeof e)return c===e;if(Object.keys(c).length!=Object.keys(e).length)return!1;var g={},h;for(h in c)g[h]=!0;for(h in e)if(void 0!==g[h])delete g[h];else return!1;
for(h in c)if(!d.isEqual(c[h],e[h]))return!1;return!0};d.getObject=function(c,e){if(!e)return c;e=e.split(".");for(var d=0;d<e.length;d++)c=c&&c[e[d]];return c};d.formatNumber=function(c,e){e="number"===typeof e?{places:e}:e||{};if(null==e.places||0>e.places)e.places=d.getPlaces(c,!0),e.maxPlaces&&e.places>e.maxPlaces&&(e.places=e.maxPlaces);return k.formatNumber(c,e)};d.getPlaces=function(c,e){function d(b,e){var d=c.indexOf(b,h);if(0>d)return a;b=c.charAt(d+b.length);return!b||0>e.indexOf(b)?a:
d-h}c=+c;if(isNaN(c))return-1;c+="";var h=c.indexOf(".")+1,a=h?c.length-h:0;if(2>=a||!e)return a;e=0;if(!+c.substr(0,h-1))for(;"0"===c.charAt(h);)h++,e++,a--;for(var b=a-1;2<=b;b--){var k=Math.min(d("000000000000000".substr(0,b),"01234"),d("999999999999999".substr(0,b),"56789"));if(k!==a){a=k;break}}return a+e};return d})},"widgets/BusinessAnalyst/baUtil/ObjectUtil":function(){define(["require","exports"],function(l,k){function m(d,c){for(var e=0,g=Object.keys(c);e<g.length;e++){var h=g[e];"object"!==
typeof d[h]||null===d[h]||"object"!==typeof c[h]||null===c[h]?d[h]=c[h]:Array.isArray(d[h])?Array.isArray(c[h])?d[h].concat(c[h]):d[h]=c[h]:Array.isArray(c[h])?d[h]=c[h]:m(d[h],c[h])}}return{map:function(d,c,e){void 0!==e&&(c=c.bind(e));if("object"!==typeof d)throw Error("Object or array expected");if(Array.isArray(d)){e=[];for(var g=0,h=d.length;g<h;g++)e.push(c(d[g],g));return e}e={};g=0;for(h=Object.keys(d);g<h.length;g++){var a=h[g];Object.hasOwnProperty.call(d,a)&&(e[a]=c(d[a],a))}return e},
deepAssign:function(d){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];for(e=0;e<c.length;e++)m(d,c[e]);return d}}})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number"],function(l){var k={};Math.log10=Math.log10||function(d){return Math.log(d)*Math.LOG10E};k.populateObject=function(d,c,e){function g(c,a){function b(b){var d=c[b],f=a[b],h=d&&"object"===typeof d;void 0!==d&&(void 0===f?a[b]=d:f&&"object"===typeof f&&h?g(d,f):e&&(h?(f=a[b]={},g(d,f)):a[b]=c[b]))}
if(c&&a&&!(Array.isArray(c)&&!Array.isArray(a)||Array.isArray(a)&&!Array.isArray(c)))if(Array.isArray(c))c.forEach(function(a,c){b(c)});else for(var d in c)b(d)}g(c,d);return d};k.filterByPattern=function(d,c){function e(c,a,b){for(var d in c){var f=c[d],g=a[d];if(Array.isArray(f)){var h=f[0];if(g&&Array.isArray(g)){var k=b[d]=[];g.forEach(function(a){if(a&&"object"===typeof a){var b=Array.isArray(a)?[]:{};e(h,a,b);k.push(b)}})}}else if("object"===typeof f){if(g&&"object"===typeof g){var m=b[d]={};
e(f,g,m)}}else void 0!==g&&(b[d]=g)}}var g={};e(c,d,g);return g};k.traverseObject=function(d,c){for(var e in d){var g=d[e];c(g);g&&"object"===typeof g&&k.traverseObject(g,c)}};k.copyOwnJsonProperties=function(d,c,e){c=c||{};for(var g in d){var h=d[g];d.hasOwnProperty(g)&&"function"!=typeof h&&(h&&"object"==typeof h&&e&&(h=e(g,h)),void 0!==h&&(c[g]=h))}return c};k.removeUndefinedProperties=function(d){d&&Object.keys(d).forEach(function(c){void 0===d[c]&&delete d[c]});return d};k.getValue=function(d,
c){if("string"!==typeof c)return d;c=c.split(".");for(var e=0;e<c.length;e++)d=d&&d[c[e]];return d};k.setValue=function(d,c,e){if("string"===typeof c&&(c=c.split("."),c.length)){for(var g=0;g<c.length-1;g++)d=d&&d[c[g]];d&&(d[c[c.length-1]]=e)}};k.isNumber=function(d){return!isNaN(parseFloat(d))&&isFinite(d)};k.roundNumber=function(d,c){return"number"!==typeof d?d:parseFloat(d.toFixed(void 0!==c?c:0))};k.getBestPrecision=function(d){return 0===d?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(d))))};
k.getPlaces=function(d,c){function e(a,b){var c=d.indexOf(a,g);if(0>c)return h;a=d.charAt(c+a.length);return!a||0>b.indexOf(a)?h:c-g}d=+d;if(isNaN(d))return-1;d+="";var g=d.indexOf(".")+1,h=g?d.length-g:0;if(2>=h||!c)return h;c=0;if(!+d.substr(0,g-1))for(;"0"===d.charAt(g);)g++,c++,h--;for(var a=h-1;2<=a;a--){var b=Math.min(e("000000000000000".substr(0,a),"01234"),e("999999999999999".substr(0,a),"56789"));if(b!==h){h=b;break}}return h+c};k.formatNumber=function(d,c){c="number"===typeof c?{places:c}:
c||{};var e=c.places,g={};0<=e?g.places=e:e=-1;d=l.format(d,g);if(c.noSeparator){void 0===m&&(m=l.format(9999,{places:0}).replace(/9/g,""));var g=m,h;if(g)for(;0<=(h=d.indexOf(g));)d=d.substr(0,h)+d.substr(h+1)}if(c.preserveTrailingZeroes||0>=e||!d)return d;for(c=d.length;0<e&&"0"==d.charAt(c-1);)c--,--e||c--;return d.substr(0,c)};k.formatNumberAsCurrency=function(d,c,e){return c?c.split(";")[0>d?1:0].replace("0",k.formatNumber(Math.abs(d),e)):k.formatNumber(d,e)};var m;k.parseNumber=function(d,c,
e,g){if(""===d)return"undefined"!==typeof e?e:NaN;if(null==d||"string"!==typeof d&&isNaN(d))return NaN;d=String(d);if(!d.trim())return void 0!==e?e:NaN;e=l.parse(d,{strict:g});isNaN(e)&&d.trim().length&&(e=g?l.parse(d,{strict:g,locale:"en-US"}):Number(d));return isNaN(e)||void 0===c||0>c?e:l.round(e,c)};k.parsePercentOrCurrency=function(d,c,e,g,h){"string"===typeof d&&(d=d.replace("%",""),c&&(c=c.split(";")[0].replace("0",""),d=d.replace(c,"")));return k.parseNumber(d,e,g,h)};k.compareEqual=function(d,
c,e){return void 0===e?d===c:Number(Number(d).toFixed(e))===Number(Number(c).toFixed(e))};k.objectToTime=function(d){if(!d)return null;d="string"===typeof d?new Date(d):d;return d.getTime?d.getTime():Number(d)||null};k.objectToDate=function(d){return d?d.getTime?d:new Date(d):null};return k})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function l(c,d,g,h){c=void 0===c||null===c;return c!=(void 0===d||null===d)?(d=c?-1:1,(void 0===h?g:h)?-d:d):c?0:null}function k(c){var d=
/^(.+)\s([1-9]\d*)$/.exec(c);return d?{base:d[1],number:d[2]}:/^[1-9]\d*$/.test(c)?{base:"",number:+c}:{base:c,number:0}}var m={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(c,d,g,h){h=l(c,d,g,h);if(null!==h)return h;c=Number(c);d=Number(d);h=c>d?1:c<d?-1:0;return g?-h:h},compareString:function(c,d,g,h){h=l(c,d,g,h);if(null!==h)return h;c=String(c);d=String(d);h=c.localeCompare(d);return g?-h:h}},d=/^(.+)\s([1-9]\d*)(\D*)$/;m.compareNames=
function(c,e,g,h){var a=k("string"===typeof c?c.toLowerCase():c),b=k("string"===typeof e?e.toLowerCase():e),n=null;if(a.base===b.base)n=m.compareNumeric(a.number,b.number,g,h);else{var f=d.exec(a.base);if(f){var l=d.exec(b.base);l&&f[1]===l[1]&&f[3]===l[3]&&(n=m.compareNumeric(f[2],l[2],g,h))}null===n&&(n=m.compareString(a.base,b.base,g,h))}return n||m.compareString(c,e,g,h)};m.compare=function(c,d,g,h){var a=l(c,d,g,h);if(null!==a)return a;a=typeof c;typeof d!=a&&(a="");switch(a){case "number":case "boolean":break;
case "object":c=c.valueOf();d=d.valueOf();break;default:return m.compareString(c,d,g,h)}a=c>d?1:c<d?-1:0;return g?-a:a};return m})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],function(l){var k={},m={}.toString();k.arraysEqual=function(d,c){if(!d&&!c)return!0;if(!d||!c||d.length!==c.length)return!1;for(var e=0;e<d.length;e++)if(d[e]!==c[e])return!1;return!0};k.composeIdentityFunction=function(d,c){var e="function"===typeof d?d:d?function(c){return c[d]}:function(c){return c};
return function(d){return(d=e(d))&&d.toString?d.toString():c&&void 0===d?d:String(d)}};k.removeDuplicates=function(d,c){var e=[],g={};c=k.composeIdentityFunction(c,!0);l.forEach(d,function(d,a){var b=c(d);b===m&&(void 0===d["__ArrayUtil.js_uniqueKey__"]&&(d["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+a),b=d["__ArrayUtil.js_uniqueKey__"]);void 0===b||b in g||(g[b]=d,e.push(d))});return e};k.splitArrayToBunches=function(d,c){c=c||100;for(var e=[],g,h=0,a=d.length;h<a;h++)g&&g.length!==
c||(g=[],e.push(g)),g.push(d[h]);return e};return k})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DomUtil":function(){define("dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on ../../utils/ObjectUtil esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(l,k,m,d,c,e,g){var h=Object.assign({},g);h.select=function(a){return h.addTag(a,"selected")};h.unselect=function(a){return h.removeTag(a,"selected")};h.floatStart=function(a){return h.addTag(a,"esriMapsAnalystXFloatStart")};
h.floatEnd=function(a){return h.addTag(a,"esriMapsAnalystXFloatEnd")};h.addSpacer=function(a,b){a=l.create("div",{"class":"esriMapsAnalystXSpacer",innerHTML:"\x26nbsp;"},a);if(b)h[b](a);return a};h.getAndUpdateNumber=function(a,b){if(!a)return NaN;var c=a.get&&a.set;void 0===b&&(b=0);var d=e.parseNumber(c?a.get("value"):a.value,b);isNaN(d)||(c?a.set("value",e.formatNumber(d,b)):a.value=e.formatNumber(d,b));return d};h.getAndUpdateString=function(a){if(!a)return null;if(a.get&&a.set){var b=a.get("value").trim();
a.set("value",b)}else b=a.value.trim(),a.value=b;return b};h.getScreenScaleFactor=function(){return h.getTextBox("",{style:"width: 72pt; height: 72pt"}).w/96};h.positionAtCenter=function(a,b){if(a&&b){var c=k.position(a);b=k.position(b);c.w&&c.h&&b.w&&b.h&&m.set(a,{left:(b.w-c.w)/2+"px",top:(b.h-c.h)/2+"px"})}};h.showAroundOverlay=function(a,b){b=b||{};h.removeAroundOverlay(a);var d={w:"width",h:"height",l:"left",t:"top",r:"right",b:"bottom"},e=k.position(a);if(b.viewPortContainer){var g=k.position(b.viewPortContainer),
p=e.x,q=e.y;e.x=Math.max(e.x,g.x);e.w-=e.x-p;e.y=Math.max(e.y,g.y);e.h-=e.y-q;e.w=Math.min(e.w,g.x+g.w-e.x);e.h=Math.min(e.h,g.y+g.h-e.y)}a.__aroundOverlays=(b.placeInNode?[{l:0,t:-e.y,w:e.w,h:e.y},{l:e.w,t:-e.y,w:document.body.clientWidth-(e.x+e.w),h:document.body.clientHeight},{l:0,t:e.h,w:e.w,h:document.body.clientHeight-(e.y+e.h)},{l:-e.x,t:-e.y,w:e.x,h:document.body.clientHeight}]:[{l:e.x,t:0,w:e.w,h:e.y},{w:document.body.clientWidth-(e.x+e.w),r:0,t:0,b:0},{l:e.x,h:document.body.clientHeight-
(e.y+e.h),w:e.w,b:0},{l:0,t:0,w:e.x,b:0}]).map(function(c){var e=l.create("div",{"class":b.overlayClass||"esriMapsAnalystXNodeAroundOverlay"},b.placeInNode?a:document.body),f={position:"absolute"},g;for(g in d)void 0!==c[g]&&(f[d[g]]=Math.round(c[g])+"px");m.set(e,f);return e});e=function(){h.removeAroundOverlay(a)};b.removeOnClick&&(a.__aroundOverlaysRemoveHandle=c.once(document.body,"click",e));a.__aroundOverlaysResizeHandle=c(window,"resize",function(){h.showAroundOverlay(a,b)});var t;a.__aroundOverlaysSetIntervalHandle=
setInterval(function(){if(t){var c=k.position(a);c.x==t.x&&c.y==t.y&&c.w==t.w&&c.h==t.h||h.showAroundOverlay(a,b)}else t=k.position(a)},50);return{remove:e}};h.removeAroundOverlay=function(a){a.__aroundOverlays&&a.__aroundOverlays.forEach(function(a){l.destroy(a)});delete a.__aroundOverlays;a.__aroundOverlaysRemoveHandle&&a.__aroundOverlaysRemoveHandle.remove();delete a.__aroundOverlaysRemoveHandle;a.__aroundOverlaysResizeHandle&&a.__aroundOverlaysResizeHandle.remove();delete a.__aroundOverlaysResizeHandle;
clearInterval(a.__aroundOverlaysSetIntervalHandle);delete a.__aroundOverlaysSetIntervalHandle};h.getDocumentStyleDeclaration=function(a){function b(c){var d;try{d=c.rules||c.cssRules}catch(t){d=null}if(d)for(c=0;c<d.length;c++){var e=d[c];if(e.styleSheet){if(e=b(e.styleSheet))return e}else if(e.selectorText==a)return e.style}}for(var c=0;c<document.styleSheets.length;c++){var d=b(document.styleSheets[c]);if(d)return d}return null};h.getNodeFontFamily=function(a){return(a=m.get(a,"fontFamily")||m.getComputedStyle(a)["font-family"])?
a.replace(/'|"/g,"").split(",")[0]:a};h.getNodeFontSize=function(a){return m.toPixelValue(a,m.get(a,"fontSize"))};h.listenToNodeAdded=function(a,b,c){if(h.isNodeInLayout(a))b();else{a.__listenToNodeAddedHandle&&a.__listenToNodeAddedHandle.remove();var d=setInterval(function(){h.isNodeInLayout(a)&&(a.__listenToNodeAddedHandle&&a.__listenToNodeAddedHandle.remove(),b())},c||100);a.__listenToNodeAddedHandle={remove:function(){clearInterval(d);delete a.__listenToNodeAddedHandle}};return a.__listenToNodeAddedHandle}};
h.isNodeVisible=function(a){return h.isChildOf(a,document.body,function(a){return!d.contains(a,"dijitHidden")&&"hidden"!=m.get(a,"visibility")})};h.enableHyperlink=function(a,b){b?d.replace(a,"esriMapsAnalystXLink","esriMapsAnalystXLinkDisabled"):d.replace(a,"esriMapsAnalystXLinkDisabled","esriMapsAnalystXLink")};return h})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/MouseUtil":function(){define(["dojo/dom-geometry","esri/dijit/geoenrichment/utils/MouseUtil"],function(l,k){var m;k.unitTesting_setCursorOverNode=
function(d){d=l.position(d);k.unitTesting_setCursorPosition(d.x+d.w/2,d.y+d.h/2)};k.unitTesting_setCursorPosition=function(d,c){k._latestEvent={clientX:d,pageX:d,clientY:c,pageY:c}};k.unitTesting_lockPosition=function(d){m=d};k.unitTesting_shiftMousePosition=function(d,c){k.unitTesting_setCursorPosition(k._latestEvent.clientX+(d||0),k._latestEvent.clientY+(c||0))};k._setLatestEvent=function(d){m||(k._latestEvent=d)};return k})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),
function(l,k,m,d,c,e){var g={_latestEvent:null,_setLatestEvent:function(a){g._latestEvent=a}};m("touch")?(k(document.body,d.press,function(a){g._setLatestEvent(g.fixTouchEvent(a,!0))}),k(document.body,d.move,function(a){g._setLatestEvent(g.fixTouchEvent(a,!0))})):k(document.body,"mousemove",function(a){g._setLatestEvent(g.fixTouchEvent(a,!0))});var h;k(document.body,"mousedown",function(){h||(h=!0,k.once(document.body,"mouseup, click",function(){h=!1}))});g.getCursorPosition=function(){return g._latestEvent};
g.isMouseOver=function(a,b){var d=b&&b.event||g._latestEvent;if(!(a&&a.parentNode&&a.getBoundingClientRect&&d))return!1;if(b&&b.checkAllChildren){b=l.mixin({},b);delete b.checkAllChildren;var f=!1;e.traverseChildren(a,function(a){if(g.isMouseOver(a,b))return f=!0});return f}return g.isMouseOverBox(c.position(a),b)};g.isMouseOverBox=function(a,b){if(!a)return!1;var c=b&&b.event||g._latestEvent;b&&b.ignoreBorderTolerance&&(b=b.ignoreBorderTolerance,a=l.mixin({},a),a.x+=b,a.y+=b,a.w-=2*b,a.h-=2*b);return a.x<=
c.clientX&&a.x+a.w>=c.clientX&&a.y<=c.clientY&&a.y+a.h>=c.clientY};g.fixTouchEvent=function(a,b){a=b?l.mixin({},a):a;a.touches&&1===a.touches.length?(b=a.touches[0],a.clientX=b.clientX,a.clientY=b.clientY,a.pageX=b.pageX,a.pageY=b.pageY):a.changedTouches&&1===a.changedTouches.length&&(b=a.changedTouches[0],a.clientX=b.clientX,a.clientY=b.clientY,a.pageX=b.pageX,a.pageY=b.pageY);return a};g.isBeingDragged=function(){return h};g.addOverOutHandler=function(a){function b(){clearTimeout(d);c&&c.remove()}
var c,d,e=k(a.node,"mouseover",function(e){function f(){g.isMouseOver(a.node)&&(a.onMouseOver(e),c=k(document.body,"mousemove",function(c){g.isMouseOver(a.node)||(b(),a.onMouseOut(c))}))}b();a.delayTimeout?d=setTimeout(f,a.delayTimeout):f()});return{remove:function(){e.remove();b()}}};g.addOutHandler=function(a,b){return k(document.body,"mousemove",function(c){g.isMouseOver(a,{checkAllChildren:!0})||b(c)})};return g})},"widgets/BusinessAnalyst/esriAnalystX/dijit/tooltips/TooltipUtil":function(){define("dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/dom-class dojo/query dojo/on dojox/gfx dojo/sniff dojo/aspect dojox/uuid/generateRandomUuid dijit/Tooltip ../utils/DomUtil ../utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/domReady!".split(" "),
function(l,k,m,d,c,e,g,h,a,b,n,f,u,p){function q(){x&&(x.isMultilineContainer?w.hideTooltipForNode(x):(clearInterval(x.__autoTooltipInLayoutCheckHandle),delete x.__autoTooltipInLayoutCheckHandle,n.hide(x)),x=null)}function t(a,b){b=b||"";var c=l.create("div",{class:"esriMapsAnalystXValidationTooltip"+b},document.body);!b&&l.create("div",{class:"esriMapsAnalystXValidationTooltipTip"+b},c);l.create("div",{innerHTML:a,class:"esriMapsAnalystXValidationTooltipBody"+b},c);k.set(c,"position","fixed");return c}
function r(a,b){function c(){a&&(document.body.removeChild(a),g.forEach(function(a){a.remove()}),a=g=null)}b=b.textbox||b;var d=m.getMarginBox(a),f=m.position(b);"rtl"===document.dir?k.set(a,{left:f.x-d.w+"px",top:f.y+f.h/2-d.h/2+"px"}):k.set(a,{left:f.x+f.w+"px",top:f.y+f.h/2-d.h/2+"px"});var g=[e(document.body,"mousedown, keydown",c),e(b,"blur",c)];return{remove:c}}function y(a,c,e){function f(){var a=l.create("div",{class:"esriMapsAnalystXClosableTooltipTip"},h);d.add(a,"right"===e?"esriMapsAnalystXClosableTooltipTipRight":
"esriMapsAnalystXClosableTooltipTipLeft")}function g(){m=l.create("div",{class:"esriMapsAnalystXClosableTooltipBody"},h);l.create("div",{innerHTML:a,class:"esriMapsAnalystXClosableTooltipLabel"},m);n=l.create("div",{class:"esriMapsAnalystXClosableTooltipCloseButton esriMapsAnalystXCloseWindow esriMapsAnalystXCloseWindowWhite"},m)}c={class:"esriMapsAnalystXClosableTooltip "+(c||"")};c.id=b();var h=l.create("div",c,document.body),m,n;"right"!==e?(g(),f()):(f(),g());k.set(h,"position","fixed");return{tooltip:h,
body:m,closeButton:n}}function B(a,b,c,d){var g=m.getMarginBox(a.tooltip),h=m.position(b);"rtl"===document.dir&&"right"!==d||"rtl"!==document.dir&&"right"===d?k.set(a.tooltip,{left:h.x+h.w+"px",top:h.y+h.h/2-g.h/2+"px"}):k.set(a.tooltip,{left:h.x-g.w+"px",top:h.y+h.h/2-g.h/2+"px"});var l,n,v,p=function(){l&&clearTimeout(l);n&&clearInterval(n);v&&v.remove();a.tooltip.parentNode===document.body&&document.body.removeChild(a.tooltip)};n=setInterval(function(){f.isNodeInLayout(b)||p();f.isNodeVisible(b)?
f.show(a.tooltip):f.hide(a.tooltip)},300);c&&(l=setTimeout(p,c));v=e(a.closeButton,"click",function(){p()});a.tooltip._removeFunc=p;return a.tooltip}var w={},A={};w.hideTooltipForNode=p.hideTooltipForNode;w.setTooltipToNode=p.setTooltipToNode;w.createTooltip=function(a,c,d){var f={orientation:m.isBodyLtr(document)?"right":"left",offset:{x:15,y:0}};c&&(f.innerHTML=c);d&&(f=Object.assign(f,d));f.id=b();f.toMouseCursor&&(f.mouseEvent=u.getCursorPosition(),delete f.toMouseCursor);c=f.mouseEvent;delete f.mouseEvent;
d=f.htmlFragment;delete f.htmlFragment;var g=f.widget;delete f.widget;var h=f.orientation;delete f.orientation;var n=f.offset;delete f.offset;var p=f.horizontalOffset;delete f.horizontalOffset;var v=l.create("div",f,a?a.container:document.body);d?l.place(d,v):g&&g.placeAt(v);k.set(v,"position","fixed");var q=m.getMarginBox(v),z=function(a,b){var c=a.touches?event.touches[0].clientX:a.clientX;a=a.touches?event.touches[0].clientY:a.clientY;var d,e,f=n.x,g=n.y;"left"===h?0>c-q.w-f&&(d="right"):c+q.w+
f>document.body.clientWidth&&(d="left");a+q.h+g>document.body.clientHeight&&(e="above");d=d||h;k.set(v,{left:b?b+"px":c+("left"===d?-q.w-f:f)+"px",top:a+("above"===e?-q.h-g:g)+"px"});v.style.display=""};c&&z(c,p);f=[];f.push(e(a?a:document.body,a?"mouse-move, mousemove":"mousemove, touchmove",function(a){z(a,p)}));f.push(e(a?a:document.body,a?"mouse-out, mouseout":"mouseout, touchend",function(a){v.style.display="none"}));a={};a.handlers=f;a.tooltip=v;A[v.id]=a;return v};w.removeTooltip=function(a){if(a){a=
"string"===typeof a?a:a.id;var b=A[a];delete A[a];b&&(b.handlers.forEach(function(a){a.remove()}),l.destroy(b.tooltip))}};var z={};w.registerTooltipForSlider=function(c,d,f,g){var h={offsetX:0,offsetY:0,class:"esriMapsAnalystXTooltip"};d&&(h=Object.assign(h,d));h.id=b();var n=l.create("div",h,document.body);n.style.display="none";k.set(n,"position","fixed");var p=!1,q=function(b,d){if(!p){p=!0;n.style.display="";n.innerHTML=d();var f=m.getMarginBox(n),g=m.position(b);k.set(n,{left:g.x+g.w/2-f.w/2+
h.offsetX+"px",top:g.y-f.h-5+h.offsetY+"px"});var l=[];l.push(a.after(c,"onChange",function(){n.innerHTML=d();g=m.position(b);k.set(n,{left:g.x+g.w/2-f.w/2+"px",top:g.y-f.h-5+"px"})}));var q=function(){n.style.display="none";l.forEach(function(a){a.remove()});p=!1},v=!1;l.push(e(b,"mousedown, mouseDown, mouse-down",function(){v=!0;l.push(e(document,"mouseup, mouseUp, mouse-up",function(){q()}))}));l.push(e(b,"mouseout, mouseOut, mouse-out",function(){v||q()}))}};d=[];d.push(e(c.sliderHandle,"mouseover, mouseOver, mouse-over",
function(){g&&c.isSliderDisabled&&c.isSliderDisabled()||q(c.sliderHandle,function(){var a=g?c.get("value")[0]:c.get("value");return f?f(a):a})}));g&&d.push(e(c.sliderHandleMax,"mouseover, mouseOver, mouse-over",function(){c.isSliderDisabled&&c.isSliderDisabled()||q(c.sliderHandleMax,function(){return f?f(c.get("value")[1]):c.get("value")[1]})}));d.push(a.before(c,"destroy",function(){w.unregisterTooltipForSlider(c)}));c.tooltipId=n.id;var v={};v.tooltip=n;v.handlers=d;z[n.id]=v};w.unregisterTooltipForSlider=
function(a){var b=z[a.tooltipId];b&&(b.handlers.forEach(function(a){a.remove()}),l.destroy(b.tooltip));delete z[a.tooltipId];delete a.tooltipId};var x=null;w.autoTooltip=function(a,b,c){"string"===typeof b&&(b=b.split(" ").filter(function(a){return a&&!!a.trim().length}));b=b||[];b.push("TrimWithEllipses");c=c||[];c.push("esriMapsAnalystXInfoIcon");for(var d=0;d<b.length;d++)e(a,"."+b[d]+":mouseover, "+b[d]+":touchstart, ",function(a){this!==x&&this.offsetWidth<this.scrollWidth&&!this.noAutoTooltip&&
(a=getComputedStyle(this).width,a=Number(a.substr(0,a.length-2)),0>a-Math.round(a)&&this.offsetWidth==this.scrollWidth-1||(q(),x=this,a=x.autoTooltip||x.textContent||x.value,x.title&&(a+=" ("+x.title+")"),a&&n.show(a,x,["above","below"]),e.once(x,"mouseout, touchstart, touchout",function(){q()}),x.__autoTooltipInLayoutCheckHandle=setInterval(function(){f.isNodeInLayout(x)||q()},500)))});if(h("touch"))for(d=0;d<c.length;d++)e(a,"."+c[d]+":touchstart ",function(a){this!==x&&(x=this,x.title&&(n.show(x.title,
x,["above","below"]),e.once(x,"touchstart, touchout",function(){n.hide(x);x=null})))})};w.addAutoTooltipsToTabContainer=function(a){c(".tabLabel",a.domNode).forEach(function(a){d.add(a,"TrimWithEllipses")});w.autoTooltip(a)};w.setMultilineText=function(a,b,c,e){c=c||2;b=b.trim();e=e||["above","below"];d.remove(a,"TrimWithEllipses");a.style.overflow="hidden";a.innerHTML="";for(var f=b,g=!1;f;){c--;var h=l.create("div",null,a);h.style.overflow="hidden";h.style.whiteSpace="nowrap";for(var k=f;k;)if(h.textContent=
k,h.offsetWidth<h.scrollWidth-1)k=(k=k.match(/^(.*[^\s]+)\s+[^\s]+$/))&&k[1]||"";else break;!k||!c&&k!==f?(h.textContent=f,f="",h.style.textOverflow="ellipsis",g=!0):f=f.substr(k.length).trim()}g&&w.setTooltipToNode(a,function(){q();x=a;x.isMultilineContainer=!0;return b},{position:e})};w.showErrorTip=function(a,b){return r(t(b),a.domNode||a)};w.showNewStyleErrorTip=function(a,b,c){return r(t(b,"NewStyle"+(c?" esriMapsAnalystXWarningStyle":"")),a.domNode||a)};w.showAlertTooltip=function(a){a&&a.node&&
a.message&&(n.show(a.message,a.node,a.position||["above","below"]),setTimeout(function(){n.hide(a.node)},a.timeout||5E3))};w.showClosableTooltip=function(a){var b=y(a.message,a.tooltipClass,a.position);return B(b,a.component,a.timeout,a.position)};w.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};w.showClosableTooltipOnVerticalBracket=function(a){var b=a.below||a.above,c=m.position(a.above,!0),d=m.position(b,!0),h="rtl"!==document.dir?"start"===a.direction:"end"===a.direction,
n=c.x+c.w*(h?0:1),c=c.y,p=d.y+d.h,q=l.create("div",{class:"esriMapsAnalystFlexibleTooltip_tooltip esriMapsAnalystXNonSelectable"},document.body),z=l.create("div",{class:"esriMapsAnalystFlexibleTooltip_surfaceContainer"},q),d={},n={top:c-2,left:n+(h?-3:3),height:p-c+4,width:10},t;for(t in n)d[t]=n[t]+"px";k.set(q,d);var u=g.createSurface(z,n.width,n.height);u.clear();u.createPolyline([{x:h?n.width:0,y:0},{x:h?0:n.width,y:0},{x:h?0:n.width,y:n.height},{x:h?n.width:0,y:n.height}]).setStroke({color:"#6E6E6E",
width:6});a.component=q;var h=y(a.message,a.tooltipClass,a.position),r=function(){clickHandler&&clickHandler.remove();v&&clearInterval(v);u&&u.clear();l.destroy(z);l.destroy(q)},v=setInterval(function(){f.isNodeInLayout(b)||r();f.isNodeVisible(b)?k.set(q,"visibility","visible"):k.set(q,"visibility","hidden")},300);a.timeout&&setTimeout(r,a.timeout);clickHandler=e(h.closeButton,"click",r);tooltip=B(h,a.component,a.timeout,a.position);var w=tooltip._removeFunc;tooltip._removeFunc=function(){w();r()};
return tooltip};return w})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function l(){for(var c=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>c.length;)c="0"+c;return c}var k=l(),m=l(),m=m.substring(0,4)+"-4"+m.substring(5,8),d=l(),d="8"+d.substring(1,4)+"-"+d.substring(4,8),c=l();return(k+"-"+m+"-"+d+c).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],
function(l){l.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(k,m){if(!k)throw m||(m="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(m);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=
function(k){k=k.toString();var m=l.isString(k)&&36==k.length&&k==k.toLowerCase();if(m){k=k.split("-");var m=5==k.length&&8==k[0].length&&4==k[1].length&&4==k[2].length&&4==k[3].length&&12==k[4].length,d;for(d in k)var c=parseInt(k[d],16),m=m&&isFinite(c)}return m};dojox.uuid.getVariant=function(k){if(!dojox.uuid._ourVariantLookupTable){var m=dojox.uuid.variant,d=[];d[0]=m.NCS;d[1]=m.NCS;d[2]=m.NCS;d[3]=m.NCS;d[4]=m.NCS;d[5]=m.NCS;d[6]=m.NCS;d[7]=m.NCS;d[8]=m.DCE;d[9]=m.DCE;d[10]=m.DCE;d[11]=m.DCE;
d[12]=m.MICROSOFT;d[13]=m.MICROSOFT;d[14]=m.UNKNOWN;d[15]=m.UNKNOWN;dojox.uuid._ourVariantLookupTable=d}k=k.toString();k=k.charAt(19);k=parseInt(k,16);dojox.uuid.assert(0<=k&&16>=k);return dojox.uuid._ourVariantLookupTable[k]};dojox.uuid.getVersion=function(k){dojox.uuid.assert(dojox.uuid.getVariant(k)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");k=k.toString();k=k.charAt(14);return parseInt(k,16)};dojox.uuid.getNode=function(k){dojox.uuid.assert(dojox.uuid.getVersion(k)==
dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");k=k.toString();return k.split("-")[4]};dojox.uuid.getTimestamp=function(k,m){dojox.uuid.assert(dojox.uuid.getVersion(k)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");k=k.toString();m||(m=null);switch(m){case "string":case String:return dojox.uuid.getTimestamp(k,Date).toUTCString();case "hex":var d=k.split("-");k=d[0];m=d[1];d=d[2];d=d.slice(1);k=d+m+k;dojox.uuid.assert(15==
k.length);return k;case null:case "date":case Date:return d=k.split("-"),k=parseInt(d[0],16),m=parseInt(d[1],16),d=(parseInt(d[2],16)&4095)<<16,d=4294967296*(d+m),d+=k,new Date(d/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+m)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil dojo/domReady!".split(" "),
function(l,k,m,d,c,e,g,h,a,b,n,f,u,p,q){function t(){}var r={},y=l(b._MasterTooltip,{_customClasses:null,addCustomClasses:function(a){a&&(m.add(this.domNode,a),this._customClasses=a)},show:function(a,c,e,f,g,h,m){if(!this.aroundNode||this.aroundNode!==c||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof a?this.containerNode.innerHTML=a:(this.containerNode.innerHTML="",d.place(a.domNode,this.containerNode));g&&this.set("textDir",g);this.containerNode.align=
f?"right":"left";var l=n.around(this.domNode,c,e&&e.length?e:b.defaultPosition,!f,k.hitch(this,"orient")),p=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=p.y+(p.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=p.x+(p.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");
this.domNode.style.opacity="0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=c;this.onMouseEnter=h||t;this.onMouseLeave=m||t}},orient:function(b,d,e,f,g){this.connectorNode.style.top="";var h=f.h;f=f.w;b.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight",
"BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[d+"-"+e];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var k=c.position(this.domNode);if(a("ie")||a("trident"))k.w+=2;c.setMarginBox(this.domNode,{w:Math.min(Math.max(f,1),k.w)});"B"==e.charAt(0)&&"B"==d.charAt(0)?(b=c.position(b),d=this.connectorNode.offsetHeight,b.h>h?(this.connectorNode.style.top=h-(g.h+d>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(g.h/2-d/2,
0),b.h-d)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,k.w-f)}}),B={show:function(a,b,c,d){"string"===typeof c&&(c=[c]);c=c&&c.map(function(a){return{after:"after-centered",before:"before-centered"}[a]||a});var e=new y;e.addCustomClasses(d);e.show(a,b,c);return e}};r.setTooltipToNode=function(a,b,c){function d(){!e&&r.showTooltipForNode(a,b,c)}c=c||{};if(a&&(r.hideTooltipForNode(a),a.__setTooltipToNodeMouseEnterHandle&&
a.__setTooltipToNodeMouseEnterHandle.remove(),b)){var e=!1;f.isMobileDevice()?a.__setTooltipToNodeMouseEnterHandle=u.addNoDragClickHandler(a,d):a.__setTooltipToNodeMouseEnterHandle=g(a,h.enter,d);c.showTooltip&&d();return{remove:function(){b=null;r.hideTooltipForNode(a)},suspend:function(){r.hideTooltipForNode(a);e=!0},resume:function(){e=!1},refresh:function(){a._shownTooltip&&d()}}}};r.showTooltipForNode=function(a,b,c){function d(){r.hideTooltipForNode(a);var b=Array.isArray(c.classes)?c.classes.join(" "):
c.classes,b=(b||"")+" esriGETooltip";c.notRestricted&&(b+=" notRestricted");a._shownTooltip=k=B.show(e,a,c.position||["after","before"],b)}if(a){r.hideTooltipForNode(a);var e="function"==typeof b?b():b;if(e){c.textAlign&&(e="\x3cdiv class\x3d'"+("start"===c.textAlign?"esriGEStart":"end"===c.textAlign?"esriGEEnd":"")+"'\x3e"+e+"\x3c/div\x3e");m.add(a,"esriGESimpleTextTooltip");var k;d();var l=r.hideTooltipForNode.bind(r,a);f.isMobileDevice()?a.__setTooltipToNodeMouseLeaveHandle=g(document.body,"touchstart",
function(b){q.isMouseOver(a,{event:b})||l()}):a.__setTooltipToNodeMouseLeaveHandle=g.once(a,h.leave,function(){!c.stayOnHover&&l()});c.ignoreNodeRemoval||(a.__setTooltipToNodeInLayoutHandle=setInterval(function(){!p.isNodeInLayout(a)&&l()},300));f.isMobileDevice()||(a.__setTooltipToNodeMouseOverHandle=setInterval(function(){c.stayOnHover&&q.isMouseOver(k.domNode)||q.isMouseOver(a)||l()},300),a.__setTooltipToNodeClickHandle=g(a,"click",function(b){c.hideOnClick?l():!a._shownTooltip&&d()}),c.stayOnHover&&
(a.__setTooltipToNodeMouseLeaveMasterHandle=g(k.domNode,h.leave,l)));return a._shownTooltip}}};r.hideTooltipForNode=function(a){a&&(delete a.title,m.remove(a,"esriGESimpleTextTooltip"),a._shownTooltip&&a._shownTooltip.destroy(),delete a._shownTooltip,a.__setTooltipToNodeMouseLeaveHandle&&a.__setTooltipToNodeMouseLeaveHandle.remove(),clearInterval(a.__setTooltipToNodeInLayoutHandle),clearInterval(a.__setTooltipToNodeMouseOverHandle),a.__setTooltipToNodeClickHandle&&a.__setTooltipToNodeClickHandle.remove(),
a.__setTooltipToNodeMouseLeaveMasterHandle&&a.__setTooltipToNodeMouseLeaveMasterHandle.remove())};var w,A;r.autoTooltip=function(a){g(a,".TrimWithEllipses:mouseover",function(){if(this!==w&&this.offsetWidth<this.scrollWidth){var a=function(){w=null;A&&(A.tooltip.destroy(),A.mouseOutH.remove(),A.mouseMoveH.remove(),A=null)};a();w=this;A={tooltip:B.show(w.textContent,w,["above","below"]),mouseOutH:g.once(w,"mouseout, mousedown, touchstart",a),mouseMoveH:g(document.body,"mousemove",function(){q.isMouseOver(w)||
a()})}}})};r.showClosableTooltip=function(a){var b=r._createClosableTooltip(a.message,a.tooltipClass,a.position);return r._placeClosableTooltip(b,a.node,a.timeout,a.position,a.onClosed)};r.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};r._createClosableTooltip=function(a,b,c){function e(){var a=d.create("div",{"class":"esriGEClosableTooltipTip"},g);m.add(a,"right"===c?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}function f(){h=d.create("div",{"class":"esriGEClosableTooltipBody"},
g);d.create("div",{innerHTML:a,"class":"esriGEClosableTooltipLabel"},h);k=d.create("div",{"class":"esriGEClosableTooltipCloseButton"},h)}var g=d.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable "+(b||"")},document.body),h,k;"right"!==c?(f(),e()):(e(),f());g.style.position="fixed";return{tooltip:g,body:h,closeButton:k}};r._placeClosableTooltip=function(a,b,d,f,h){function k(){var d=c.position(b),f=d.x+";"+d.y+";"+d.w+";"+d.h;f!==m&&(m=f,f=c.getMarginBox(a.tooltip),e.set(a.tooltip,{left:(l?
d.x+d.w:d.x-f.w)+"px",top:d.y+d.h/2-f.h/2+"px"}))}var l="rtl"===document.dir&&"right"!==f||"rtl"!==document.dir&&"right"===f,m;k();var n,q,t,u,r,w=function(){n&&clearTimeout(n);q&&clearInterval(q);t&&clearInterval(t);u&&u.remove();a.tooltip.parentNode&&a.tooltip.parentNode.removeChild(a.tooltip)};q=setInterval(function(){p.isNodeInLayout(b)||(r=!1,w());p.isNodeVisible(b)&&p.isNodeOnscreen(b)?(r=!0,p.show(a.tooltip)):(r=!1,p.hide(a.tooltip))},300);t=setInterval(function(){r&&k()},0);d&&(n=setTimeout(w,
d));u=g(a.closeButton,"click",function(){w();h&&h()});a.tooltip._removeFunc=w;return a.tooltip};return r})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil","./KeyboardUtil"],function(l,k,m,d){var c={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(d,g,h){h=h||{};return m.isMobileDevice()?c._addMobile(d,g,h):c._addPC(d,g,h)},_addPC:function(c,g,h){var a=h.tolerance||0,b,e,f=l(c,"mousedown",function(c){e&&e.remove();var f=c.clientX,
h=c.clientY,k;b=l(document.body,"mousemove",function(a){if(!a.shiftKey&&!d.isCtrl(a)){var b=a.clientY;if(0<Math.abs(a.clientX-f)||0<Math.abs(b-h))k=!0}});e=l.once(document.body,"mouseup",function(c){b.remove();var d=c.clientX,e=c.clientY;!k&&Math.abs(d-f)<=a&&Math.abs(e-h)<=a&&g(c)})});return{remove:function(){b&&b.remove();e&&e.remove();f&&f.remove()}}},_addMobile:function(d,g,h){function a(){f&&f.remove();k&&k.remove();m&&m.remove();clearTimeout(q)}var b=h.tolerance||c.MOBILE_TOLERANCE,e,f,k,m,
q;e=l(d,"touchstart",function(e){function n(a){return Math.abs(e.clientX-a.clientX)<b&&Math.abs(e.clientY-a.clientY)<b}a();var p;if(h.detectLongPress){var u;k=l(d,"touchmove",function(a){u=a});q=setTimeout(function(){n(u||e)&&(h.ignoreReleaseIfLongPressHappened&&(p=!0),h.longPressCallback(e))},h.longPressTimeout||c.LONG_PRESS_TIMEOUT)}f=l.once(d,"touchend",function(b){!p&&n(b)&&g(b);a()});m=l.once(d,"touchcancel",a)});return{remove:function(){e&&e.remove();a()}}},addGlobalDragHanlder:function(c){function e(){h&&
h.remove();a&&a.remove();b&&b.remove();n&&n.remove();f&&c.destroyDnDBox&&c.destroyDnDBox(f)}c.tolerance=0<c.tolerance?c.tolerance:5;var h,a,b,n,f;return l(c.node,c.downEventName||m.press,function(g){e();if(!c.onMouseDown||c.onMouseDown(g)){var p=g.clientX,q=g.clientY,t=p,u=q;h=l(document.body,m.move,function(g){g.shiftKey||d.isCtrl(g)||!(Math.abs(p-g.clientX)>=c.tolerance||Math.abs(q-g.clientY)>=c.tolerance)||(h.remove(),c.dragStarted&&!c.dragStarted(g,g.clientX-t,g.clientY-u))||(t=g.clientX,u=g.clientY,
f=c.createDnDBox&&c.createDnDBox(),a=l(document.body,m.move,function(a){c.dragMoved&&c.dragMoved(a,a.clientX-t,a.clientY-u);t=a.clientX;u=a.clientY}),b=l.once(document.body,k("ie")||k("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){e();c.dragEnded&&c.dragEnded()}),n=l(document.body,"keyup",function(a){27==a.keyCode&&(e(),c.dragCanceled&&c.dragCanceled())}))});l.once(document.body,k("ie")||k("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){h.remove()})}})}};
return c})},"widgets/BusinessAnalyst/utils/GEUtil":function(){define("dojo/_base/array dojo/when esri/request ./GeocodeUtil esri/geometry/webMercatorUtils esri/dijit/geoenrichment/utils/FileUtil jimu/portalUtils".split(" "),function(l,k,m,d,c,e,g){return{getAvailableCountries:function(){return g.getPortal(portalUrl).loadSelfInfo().then(function(c){return m({url:(c&&c.helperServices&&c.helperServices.geoenrichment&&c.helperServices.geoenrichment.url?c.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+
"/Geoenrichment/Countries",content:{appID:"webappbuilder",f:"json",langCode:"en-us"},handleAs:"json"})})},createRingOrDriveTimes:function(c){return g.getPortal(portalUrl).loadSelfInfo().then(function(a){return m({url:(a&&a.helperServices&&a.helperServices.geoenrichment&&a.helperServices.geoenrichment.url?a.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",
useData:JSON.stringify({sourceCountry:c.sourceCountry}),studyAreasOptions:JSON.stringify(c.studyAreasOptions),dataCollections:JSON.stringify(["GlobalIntersect"]),returnGeometry:!0,outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:c.geometry}]),token:esri.id.credentials[0].token},handleAs:"json"})})},createReport:function(c){var a={appID:"webappbuilder",langCode:"en-us",report:"string"===typeof c.report?c.report:JSON.stringify(c.report),format:"pdf",f:"bin",token:esri.id.credentials[0].token,
useData:JSON.stringify({sourceCountry:c.sourceCountry}),studyAreas:JSON.stringify(c.studyAreas),reportFields:JSON.stringify({locationname:c.locationName,latitude:c.lat,longitude:c.long,subtitle:"Prepared by Esri",areadesc2:c.areadesc2})};return g.getPortal(portalUrl).loadSelfInfo().then(function(b){return m({url:(b&&b.helperServices&&b.helperServices.geoenrichment&&b.helperServices.geoenrichment.url?b.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+
"/Geoenrichment/createReport",content:a,handleAs:"blob"}).then(function(a){return e.saveAs(a,c.reportDownloadName+".pdf")}).otherwise(function(a){alert("Error: "+a)})})},hasGEPrivilege:function(c){return g.getPortal(portalUrl).loadSelfInfo().then(function(a){var b=!1,d=!1,e=a&&a.user&&a.user.privileges,g=a&&a.helperServices&&a.helperServices.geoenrichment&&a.helperServices.geoenrichment.url?a.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";
if(!window.isBuilder&&!c.mode&&c.appProxies&&0<c.appProxies.length&&l.some(c.appProxies,function(a){if(g.toLowerCase()===a.sourceUrl.toLowerCase())return!0}))return!0;l.forEach(e,function(a){"premium:user:geoenrichment"==a?b=!0:"premium:user:networkanalysis"==a&&(d=!0)});return b&&d})},getCountryForPolygon:function(e,a,b){return g.getPortal(portalUrl).loadSelfInfo().then(function(g){return m({url:(g&&g.helperServices&&g.helperServices.geoenrichment&&g.helperServices.geoenrichment.url?g.helperServices.geoenrichment.url:
"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",dataCollections:JSON.stringify(["GlobalIntersect"]),outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:e.toJson()}]),token:esri.id.credentials[0].token},handleAs:"json"}).then(function(f){if(f&&f.results&&1==f.results.length&&1==f.results[0].value.FeatureSet[0].features.length)return f.results[0].value.FeatureSet[0].features[0].attributes.sourceCountry;
if(f&&f.results&&1==f.results.length&&1<f.results[0].value.FeatureSet[0].features.length){var g=e.getCentroid(),g=c.xyToLngLat(g.x,g.y),h=function(c){var d="";l.forEach(c,function(a){a.attributes.sourceCountry==b&&(d=b)});if(d)return d;l.forEach(c,function(b){b.attributes.sourceCountry==a.defaultCountryID&&(d=defaultCountryID)});return d?d:c[0].attributes.sourceCountry};return k(d.reverseGeocode({x:g[0],y:g[1]})).then(function(a){return a&&a.address&&a.address.CountryCode?a.address.CountryCode:h(f.results[0].value.FeatureSet[0].features)}).otherwise(function(){return h(f.results[0].value.FeatureSet[0].features)})}return a.defaultCountryID})})},
getGEProxyUrl:function(c){var a=!1;return g.getPortal(portalUrl).loadSelfInfo().then(function(b){geUrl=b&&b.helperServices&&b.helperServices.geoenrichment&&b.helperServices.geoenrichment.url?b.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!c.mode&&c.appProxies&&0<c.appProxies.length&&l.forEach(c.appProxies,function(b){geUrl.toLowerCase()===b.sourceUrl.toLowerCase()&&(a=b.proxyUrl)});return a})}}})},"widgets/BusinessAnalyst/utils/GeocodeUtil":function(){define(["esri/request",
"jimu/portalUtils"],function(l,k){return{reverseGeocode:function(m){return k.getPortal(portalUrl).loadSelfInfo().then(function(d){return l({url:(d&&d.isPortal&&d.helperServices&&d.helperServices.geocode&&0<d.helperServices.geocode.length?d.helperServices.geocode[0].url:"https://geocode.arcgis.com//arcgis/rest/services/World/GeocodeServer")+"/reverseGeocode",content:{appID:"webappbuilder",f:"json",langCode:"en-us",location:JSON.stringify({x:m.x,y:m.y}),distance:250},handleAs:"json"})})}}})},"esri/dijit/geoenrichment/utils/FileUtil":function(){define(["esri/dijit/geoenrichment/Deferred",
"./DataUtil","./ImageUtil"],function(l,k,m){function d(){return new l.reject(Error("Saving not supported."))}var c=d,e=/[\\/:*?"<>|]/g,g={savingSupported:function(){return void 0!==window.Blob},saveTextFile:function(a,c,e){return g.savingSupported()?g.saveAs(new Blob([a],{type:e||"text/plain"}),c||"text.txt"):d()},saveImageFile:function(a,c){if(g.savingSupported()){var b;"string"===typeof a?(b=m.base64DataFromDataURL(a),b=k.binaryStringToByteArray(atob(b)).buffer):a instanceof ArrayBuffer&&(b=a);
return g.saveAs(b?k.arrayBuffersToBlob([b],"image/png"):a,c)}d()},saveAs:function(a,d){return c(a,g.validateName(d||"download"))},validateName:function(a){return String(a).trim().replace(e,"")}};if(!g.savingSupported())return g;if(window.navigator&&window.navigator.msSaveOrOpenBlob)return c=function(a,c){var b=new l;window.navigator.msSaveOrOpenBlob(a,c)?b.resolve():b.reject(Error("Failed to save or open downloaded file."));return b.promise},g;var h=window.URL||window.webkitURL;if("download"in window.document.createElement("a")){var a=
function(a){var b;void 0!==window.MouseEvent?b=new MouseEvent("click",{bubbles:!0,cancelable:!1}):(b=document.createEvent("MouseEvent"),b.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null));a.dispatchEvent(b)},c=function(b,c){var d=new l,e=h.createObjectURL(b);b=window.document.createElement("a");b.href=e;b.download=c;a(b);setTimeout(function(){h.revokeObjectURL(e);d.resolve()},1E3);return d.promise};return g}c=function(a,c){var b=new l;a=new File([a],c,{type:a.type});var d=h.createObjectURL(a);
window.open(d,"_blank");setTimeout(function(){h.revokeObjectURL(d);b.resolve()},1E3);return b.promise};return g})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(l,k){function m(c){return"string"==typeof c?{source:c,getLength:function(){return this.source.length},getByte:function(c){return this.source.charCodeAt(c)&255}}:window.ArrayBuffer&&c instanceof ArrayBuffer?{source:new Uint8Array(c),getLength:function(){return this.source.byteLength},
getByte:function(c){return this.source[c]}}:c}function d(c){for(var d=c.length,a=new Uint8Array(c.length),b=0;b<d;b++)a[b]=c.charCodeAt(b);return a}function c(c,d){c=new Uint8Array(c);d=Math.min(d,c.byteLength);for(var a="",b=0;b<d;b++)a+=String.fromCharCode(c[b]);return a}var e={arrayBufferFromBlob:function(c){var d=new l,a=new FileReader;a.onloadend=function(){a.error?d.reject(a.error):d.resolve(a.result)};a.readAsArrayBuffer(c);return d.promise},arrayBuffersToBlob:function(c,d){return new Blob(c,
{type:d||"application/octet-stream"})},binaryStringFromByteSource:function(c){if("string"==typeof c)return c;c=m(c);for(var d=c.getLength(),a=d%4,d=d-a,b="",e=0,f,g,k,l;e<d;)f=c.getByte(e++),g=c.getByte(e++),k=c.getByte(e++),l=c.getByte(e++),b+=String.fromCharCode(f,g,k,l);1==a?b+=String.fromCharCode(c.getByte(e)):2==a?b+=String.fromCharCode(c.getByte(e),c.getByte(e+1)):3==a&&(b+=String.fromCharCode(c.getByte(e),c.getByte(e+1),c.getByte(e+2)));return b},base64FromByteSource:function(c){c=m(c);for(var d=
c.getLength(),a=d%3,d=d-a,b,e,f,g,k="",l=0;l<d;l+=3)g=c.getByte(l)<<16|c.getByte(l+1)<<8|c.getByte(l+2),b=g>>18&63,e=g>>12&63,f=g>>6&63,g&=63,k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g];1==a?(g=c.getByte(l),k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>
2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g<<4&63]+"\x3d\x3d"):2==a&&(g=c.getByte(l)<<8|c.getByte(l+1),k+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g<<2&63]+"\x3d");return k}};e.binaryStringToByteArray=d;e.base64ToByteArray=function(c){return d(atob(c))};e.getFirstBytes=function(d,e){var a;if("string"==
typeof d)a=d.substr(0,e);else if(window.ArrayBuffer&&d instanceof ArrayBuffer)a=c(d,e);else if(window.Blob&&d instanceof Blob){a=new l;var b=new FileReader;b.onloadend=function(){b.error?a.resolve(""):a.resolve(c(b.result,e))};b.readAsArrayBuffer(d.slice(0,e))}return k(a||"")};e.isBase64=function(c){return c&&0==c.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(c.replace(/={0,2}$/,""))};e.getContentType=function(c){var d=c.lastIndexOf(".")+1;if(!d)return null;
switch(c.substr(d).toLowerCase()){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};return e})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","dojo/dom-construct","esri/dijit/geoenrichment/when"],function(l,k,m){var d={base64DataToDataURL:function(c,e){if(/^data:image/.test(c))return c;
e||(e=atob(c.substr(0,16)),e=d.getImageContentType(e));return"data:"+(e||"image/png")+";base64,"+c},getImageContentType:function(c){if("\u00ff\u00d8\u00ff"==c.substr(0,3)&&"JFIF"==c.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"==c.substr(0,8))return"image/png";if("GIF89a"==c.substr(0,6)||"GIF87a"==c.substr(0,6))return"image/gif"},base64DataFromDataURL:function(c){0==c.indexOf("data:")&&(c=c.substr(c.indexOf(",")+1));return c},getBase64DataIndex:function(c){c=0==c.indexOf("data:")?c.indexOf(";base64,"):
-1;return 0<c?c+8:0},getContentType:function(c){var e=d.getBase64DataIndex(c);return e?c.substring(5,e-8):null},checkBase64FileSize:function(c,e){return d.getBase64FileSize(c)<=e},getBase64FileSize:function(c){return.75*c.length},imageToDataURL:function(c,d){d=d||{};var e=document.createElement("canvas"),h=e.getContext("2d");e.width=d.width||c.width;e.height=d.height||c.height;var a=d.opacity;null!=a&&!isNaN(a)&&0<=a&&1>a&&(h.globalAlpha=+a,d.format="image/png");(a=d.pos)?h.drawImage(c,a.x||0,a.y||
0):h.drawImage(c,0,0,e.width,e.height);return e.toDataURL(d.format)},imageFromUrl:function(c){var d=new l,g=new Image;0!==c.indexOf("data:")&&g.setAttribute("crossOrigin","anonymous");g.onload=function(){g.width&&g.height?d.resolve(g):d.reject(Error("Error of reading an image from URL."));k.destroy(g)};g.onerror=function(c){d.reject(c);k.destroy(g)};g.src=require.toUrl(c);return d.promise},scaleImage:function(c,e){if("string"===typeof c)var g=d.base64DataToDataURL(c),h=d.getContentType(g),g=d.imageFromUrl(g);
return m(g||c).then(function(a){var b=1,c=a.width,f=a.height;if(e.factor)b=e.factor;else if(e.maxDim)b=e.maxDim/Math.max(c,f);else if(e.imageDim){var g=e.imageDim.w,k=e.imageDim.h;e.imageDim.preserveRatio?(b=Math.min(g/c,k/f),e.imageDim.reduceOnly&&1<b&&(b=1)):e.imageDim.reduceOnly?(c=Math.min(c,g),f=Math.min(f,k)):(c=g,f=k)}return d.imageToDataURL(a,{width:c*b,height:f*b,format:e.format||h,opacity:e.opacity})})}};return d})},"widgets/BusinessAnalyst/utils/ReportUtil":function(){define("dojo/Deferred dojo/promise/all dojo/when dojo/_base/array esri/request jimu/portalUtils dojo/i18n!../nls/strings".split(" "),
function(l,k,m,d,c,e,g){STANDARD_INFOGRAPHIC_TYPEKEYWORD="esriReportPlayerStandardInfographic";var h=[];h.US=["LANDSCAPESUMMARYREPORT"];return{_ownedCachedCustomReports:null,_sharedCachedCustomReports:null,_cachedCountryClassicReports:[],_cachedInfographicReports:null,_countryInitDfds:[],getAvailableClassicReports:function(a,b){var c=this,e=[],k=new l,p;b&&d.forEach(b.countryConfig,function(b){a==b.countryID&&(p=b)});p||(p={countryID:a,allowEsriReports:!0,allowEsriInfographics:!0,allowMyReports:!0,
allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,disabledReports:[],disabledInfographics:[]});var q=null,t=null,r=null;p.allowEsriReports&&(q=e.length,e.push({value:"esriReports",label:g.esriReports,children:[]}));p.allowMyReports&&(t=e.length,e.push({value:"myReports",label:g.myReports,children:[]}));p.allowSharedReports&&(r=e.length,e.push({value:"sharedReports",label:g.sharedReports,children:[]}));m(this._initReports(a),function(){p.allowEsriReports&&c._cachedCountryClassicReports[a]&&
0<c._cachedCountryClassicReports[a].length&&d.forEach(c._cachedCountryClassicReports[a],function(b){p.disabledReports.includes(b.reportID)||h[a]&&h[a].includes(b.reportID.toUpperCase())||e[q].children.push(c._formatClassicReportsForDropDown(b))});var b=["esriWebInfographicReport","esriWebSingleInfographic","esriWebBlankInfographic","esriWebHiddenInfographic","esriWebComparisonReport"];p.allowMyReports&&d.forEach(c._ownedCachedCustomReports,function(d){d.properties.countries.includes(a)&&!p.disabledReports.includes(d.id)&&
(d.typeKeywords.some(function(a){return 0<=b.indexOf(a)})||e[t].children.push(c._formatClassicReportsForDropDown(d)))});p.allowSharedReports&&d.forEach(c._sharedCachedCustomReports,function(d){d.properties.countries.includes(a)&&!p.disabledReports.includes(d.id)&&(d.typeKeywords.some(function(a){return 0<=b.indexOf(a)})||e[r].children.push(c._formatClassicReportsForDropDown(d)))});var f=function(a,b){a=a.label.toUpperCase();b=b.label.toUpperCase();var c=0;a>b?c=1:a<b&&(c=-1);return c};0<e.length&&
e[0].children.sort(f);1<e.length&&e[1].children.sort(f);2<e.length&&e[2].children.sort(f);k.resolve(e)});return k},_formatClassicReportsForDropDown:function(a){return a.metadata?{label:a.metadata.title,value:a.reportID,reportType:a.metadata.type}:{label:a.title,value:a.id,reportType:a.properties.type,item:{itemid:a.id,url:portalUrl,token:esri.id.credentials[0].token}}},getAvailableInfographicReports:function(a,b){var c=this,e=[],h=new l,k;b&&d.forEach(b.countryConfig,function(b){a==b.countryID&&(k=
b)});k||(k={countryID:a,allowEsriReports:!0,allowEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,disabledReports:[],disabledInfographics:[]});var q=null,t=null,r=null;k.allowEsriInfographics&&(q=e.length,e.push({value:"esriReports",label:g.esriInfographics,children:[]}));k.allowMyInfographics&&(t=e.length,e.push({value:"myReports",label:g.myInfographics,children:[]}));k.allowSharedInfographics&&(r=e.length,e.push({value:"sharedReports",
label:g.sharedInfographics,children:[]}));m(this._initReports(a),function(){k.allowEsriInfographics&&d.forEach(c._cachedInfographicReports,function(b){b.properties.countries.includes(a)&&!k.disabledInfographics.includes(b.id)&&e[q].children.push(c._formatInfographicReportsForDropDown(b))});k.allowMyInfographics&&d.forEach(c._ownedCachedCustomReports,function(b){b.properties.countries.includes(a)&&!k.disabledInfographics.includes(b.id)&&(b.typeKeywords.includes("esriWebInfographicReport")||c._isOldPortalInfographic(b))&&
e[t].children.push(c._formatInfographicReportsForDropDown(b))});k.allowSharedInfographics&&d.forEach(c._sharedCachedCustomReports,function(b){b.properties.countries.includes(a)&&!k.disabledInfographics.includes(b.id)&&(b.typeKeywords.includes("esriWebInfographicReport")||c._isOldPortalInfographic(b))&&e[r].children.push(c._formatInfographicReportsForDropDown(b))});var b=function(a,b){a=a.label.toUpperCase();b=b.label.toUpperCase();var c=0;a>b?c=1:a<b&&(c=-1);return c};0<e.length&&e[0].children.sort(b);
1<e.length&&e[1].children.sort(b);2<e.length&&e[2].children.sort(b);h.resolve(e)});return h},_isOldPortalInfographic:function(a){return a.properties&&a.properties.isHidden&&"true"==a.properties.isHidden?!1:a.properties&&a.properties.isGraphicReport&&"true"==a.properties.isGraphicReport?!0:!1},_formatInfographicReportsForDropDown:function(a){return{label:a.title,value:a.id}},_initReports:function(a){var b=[],g=this;if(this._countryInitDfds[a])return this._countryInitDfds[a];this._countryInitDfds[a]=
new l;e.getPortal(portalUrl).loadSelfInfo().then(function(e){e=e&&e.helperServices&&e.helperServices.geoenrichment&&e.helperServices.geoenrichment.url?e.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";g._cachedCountryClassicReports[a]||b.push(c({url:e+"/Geoenrichment/reports/"+a,content:{appID:"webappbuilder",f:"json",langCode:"en-us"}}).then(function(b){g._cachedCountryClassicReports[a]=b.reports},function(a){alert(a)}));g._cachedInfographicReports||
(g._cachedInfographicReports=[],b.push(c({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:"typekeywords:(esriReportPlayerStandardInfographic jsapiVersion3.30)"}}).then(function(a){d.forEach(a.results,function(a){g._cachedInfographicReports.push(a)})},function(a){alert(a)})));g._ownedCachedCustomReports||(g._ownedCachedCustomReports=[],b.push(c({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",
start:1,num:100,sortField:"modified",sortOrder:"desc",q:'type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) owner:'+esri.id.credentials[0].userId}}).then(function(a){d.forEach(a.results,function(a){g._ownedCachedCustomReports.push(a)})},function(a){alert(a)})));g._sharedCachedCustomReports||(g._sharedCachedCustomReports=[],b.push(c({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:shared type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+
esri.id.credentials[0].userId}}).then(function(a){d.forEach(a.results,function(a){g._sharedCachedCustomReports.push(a)})},function(a){alert(a)})),b.push(c({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:org type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}}).then(function(a){d.forEach(a.results,function(a){g._sharedCachedCustomReports.push(a)})},
function(a){alert(a)})));0===b.length?g._countryInitDfds[a].resolve():k(b).then(function(){g._countryInitDfds[a].resolve()})});return this._countryInitDfds[a]}}})},"widgets/BusinessAnalyst/utils/ValidationUtil":function(){define(["dojo/dom-class"],function(l){return{MIN_RINGS_VALUE:0,MAX_RINGS_VALUE:1E3,MIN_DTWT_VALUE:0,MAX_DTWT_VALUE:300,validateInvalidValues:function(k,m,d,c,e){var g=k.get("value"),h=m.get("value"),a=d.get("value"),b=!0;0<g.length&&null===this._tryParseFloat(g)?(b=!1,l.remove(c,
"hidden"),c.innerHTML=e,l.add(k.domNode,"invalidValue")):l.remove(k.domNode,"invalidValue");0<h.length&&null===this._tryParseFloat(h)?(b=!1,l.remove(c,"hidden"),c.innerHTML=e,l.add(m.domNode,"invalidValue")):l.remove(m.domNode,"invalidValue");0<a.length&&null===this._tryParseFloat(a)?(b=!1,l.remove(c,"hidden"),c.innerHTML=e,l.add(d.domNode,"invalidValue")):l.remove(d.domNode,"invalidValue");b&&l.add(c,"hidden");return b},validateMinMaxValues:function(k,m,d,c,e,g,h){var a=k.get("value"),b=m.get("value"),
n=d.get("value"),f=!0;0<a.length?(a=parseFloat(a),a<c||a>e?(f=!1,l.remove(g,"hidden"),g.innerHTML=h,l.add(k.domNode,"invalidValue")):l.remove(k.domNode,"invalidValue")):l.remove(k.domNode,"invalidValue");0<b.length?(a=parseFloat(b),a<c||a>e?(f=!1,l.remove(g,"hidden"),g.innerHTML=h,l.add(m.domNode,"invalidValue")):l.remove(m.domNode,"invalidValue")):l.remove(m.domNode,"invalidValue");0<n.length?(a=parseFloat(n),a<c||a>e?(f=!1,l.remove(g,"hidden"),g.innerHTML=h,l.add(d.domNode,"invalidValue")):l.remove(d.domNode,
"invalidValue")):l.remove(d.domNode,"invalidValue");f&&l.add(g,"hidden");return f},_tryParseFloat:function(k){var l=null;null!==k&&0<k.length&&(isNaN(k)||(l=parseFloat(k)));return l}}})},"widgets/BusinessAnalyst/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/templates/SelectableTreeGrid.html":'\x3cdiv class\x3d"esriMapsAnalystXNonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"selectionCounter" class\x3d"esriMapsAnalystXSelectableTreeCounter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/Setting.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"reportInfographicTabContainer" style\x3d"width: 100%; height: 520px;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"infographicsContentPane" title\x3d"${nls.infographics}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledInfographicsOption"\r\n                        data-dojo-attach-point\x3d"disabledInfographicsOption"\x3e\r\n                    \x3clabel for\x3d"disabledInfographicsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountryOrRegion}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerInfographics"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv\x3e${nls.defineWhichInfographics}\x3c/div\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"infographicTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportsContentPane" title\x3d"${nls.reports}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledReportsOption"\r\n                        data-dojo-attach-point\x3d"disabledReportsOption"\x3e\r\n                    \x3clabel for\x3d"disabledReportsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountryOrRegion}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerReports"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv\x3e${nls.defineWhichReports}\x3c/div\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"reportTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"ringsContentPane" title\x3d"${nls.rings}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.radius}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 1"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 3"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"ringsBufferUnits"\x3e\r\n                    \x3coption value\x3d"esriMiles" selected\x3d"selected"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"ringValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledRingsOption"\r\n                        data-dojo-attach-point\x3d"disabledRingsOption"\x3e\r\n                    \x3clabel for\x3d"disabledRingsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"driveTimeContentPane" title\x3d"${nls.driveTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"driveTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"driveTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"disabledDriveTimeOption"\r\n                        id\x3d"disabledDriveTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledDriveTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"walkTimeContentPane" title\x3d"${nls.walkTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"walkTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"walkTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledWalkTimeOption"\r\n                        data-dojo-attach-point\x3d"disabledWalkTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledWalkTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/css/style.css":'.widget-setting-page .esriMapsAnalystXSelectableTreeGrid.dgrid {position: absolute; top: 33px; right: 0; left: 0px; bottom: 0; height: auto; width: auto;}.jimu-widget-business-analyst-setting .tabs {font-family: "Avenir Light"; color: #000000; height: 100%;} .jimu-widget-business-analyst-setting .tabs .tab-description {margin: 10px 0;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab{background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color:#898989; font-family: "Avenir Medium"; font-size: 14px;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 3px solid #24b5cc; font-family: "Avenir Heavy"; color: #000000;} .jimu-widget-business-analyst-setting .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 14px; margin: 20px 0 10px 0;} .jimu-widget-business-analyst-setting .tabs .hide{display: none;} .jimu-widget-business-analyst-setting .tabs .indent{margin-left: 20px; margin-top: 10px;} .jimu-widget-business-analyst-setting .tabs .unit-item{margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;} .jimu-widget-business-analyst-setting .tabs .clearFix {*overflow: hidden; *zoom: 1;} .jimu-widget-business-analyst-setting .tabs .clearFix:after {display: table; content: ""; width: 0; clear: both;} .jimu-widget-business-analyst-setting .tabs .view{height: 100%; overflow-y: auto;} .jimu-widget-business-analyst-setting .tabs .jimu-tab\x3e.jimu-viewstack{padding-bottom: 30px;} .jimu-widget-business-analyst-setting .validationErrorMessage {color: #FF0000; margin-top: 10px;} .jimu-widget-business-analyst-setting .validationErrorMessage.hidden {display: none;} .jimu-widget-business-analyst-setting .invalidValue {outline: 3px solid #FF0000;}',
"*now":function(l){l(['dojo/i18n!*preload*widgets/BusinessAnalyst/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/on jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin esri/dijit/geoenrichment/SelectableTree ../esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid ../utils/GEUtil ../utils/ReportUtil ../utils/ValidationUtil jimu/dijit/formSelect jimu/dijit/TabContainer dijit/form/CheckBox dijit/layout/ContentPane".split(" "),function(l,k,m,d,c,e,g,h,a,b,n,f,u){return k([c,e],{baseClass:"jimu-widget-business-analyst-setting",selectedCountryID:"",
postCreate:function(){this.inherited(arguments);this.tab=new u({tabs:[{title:this.nls.infographics,content:this.infographicsContentPane},{title:this.nls.reports,content:this.reportsContentPane},{title:this.nls.rings,content:this.ringsContentPane},{title:this.nls.driveTime,content:this.driveTimeContentPane},{title:this.nls.walkTime,content:this.walkTimeContentPane}],selected:this.nls.infographics});this.tab.placeAt(this.reportInfographicTabContainer);this.tab.startup()},startup:function(){this._started||
(this.inherited(arguments),this.setConfig(this.config))},setConfig:function(b){var c=this;a.getAvailableCountries().then(function(a){var b=[];l.forEach(a.countries,function(a){b.push({label:a.name,value:a.id,selected:a.id==c.config.defaultCountryID?"selected":""})});c.countryDropDownInfographics=(new f({options:b})).placeAt(c.countryDropDownContainerInfographics);c.countryDropDownInfographics.startup();c.selectedCountryID=c.countryDropDownInfographics.get("value");d(c.countryDropDownInfographics,
"change",function(){c._countryChangeInfographics()});c.countryDropDownReports=(new f({options:b})).placeAt(c.countryDropDownContainerReports);c.countryDropDownReports.startup();c.selectedCountryID=c.countryDropDownReports.get("value");d(c.countryDropDownReports,"change",function(){c._countryChangeReports()});c._loadConfigForCountry(c.selectedCountryID)});this._loadRingDTWTConfig()},getConfig:function(){if(!this._validateRingDTWT())return!1;this._setConfigForCountry(this.selectedCountryID);this._setRingDTWTConfig();
this.config.defaultCountryID=this.selectedCountryID;return this.config},_countryChangeInfographics:function(){this.countryDropDownReports.get("value")!=this.countryDropDownInfographics.get("value")&&(this.countryDropDownReports.set("value",this.countryDropDownInfographics.get("value")),this._countryChange())},_countryChangeReports:function(){this.countryDropDownInfographics.get("value")!=this.countryDropDownReports.get("value")&&(this.countryDropDownInfographics.set("value",this.countryDropDownReports.get("value")),
this._countryChange())},_countryChange:function(){this._setConfigForCountry(this.selectedCountryID);this.selectedCountryID=this.countryDropDownInfographics.get("value");this._loadConfigForCountry(this.selectedCountryID)},_setConfigForCountry:function(a){var b=null;l.forEach(this.config.countryConfig,function(c){c.countryID==a&&(b=c)});b||(b={countryID:a,allowEsriReports:!0,allowEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,disabledReports:[],
disabledInfographics:[]});b.allowEsriInfographics=0<this.infographicsTreeGrid.tree.data[0].leafCount?0!=this.infographicsTreeGrid.tree.data[0].selectCount:!0;b.allowMyInfographics=0<this.infographicsTreeGrid.tree.data[1].leafCount?0!=this.infographicsTreeGrid.tree.data[1].selectCount:!0;b.allowSharedInfographics=0<this.infographicsTreeGrid.tree.data[2].leafCount?0!=this.infographicsTreeGrid.tree.data[2].selectCount:!0;var c=this.infographicsTreeGrid.tree.data[0].children.concat(this.infographicsTreeGrid.tree.data[1].children).concat(this.infographicsTreeGrid.tree.data[2].children);
b.disabledInfographics=this._getDisabledReports(c);b.allowEsriReports=0<this.reportsTreeGrid.tree.data[0].leafCount?0!=this.reportsTreeGrid.tree.data[0].selectCount:!0;b.allowMyReports=0<this.reportsTreeGrid.tree.data[1].leafCount?0!=this.reportsTreeGrid.tree.data[1].selectCount:!0;b.allowSharedReports=0<this.reportsTreeGrid.tree.data[2].leafCount?0!=this.reportsTreeGrid.tree.data[2].selectCount:!0;c=this.reportsTreeGrid.tree.data[0].children.concat(this.reportsTreeGrid.tree.data[1].children).concat(this.reportsTreeGrid.tree.data[2].children);
b.disabledReports=this._getDisabledReports(c);var d=-1;l.forEach(this.config.countryConfig,function(b,c){b.countryID==a&&(d=c)});-1!=d?this.config.countryConfig[d]=b:this.config.countryConfig.push(b)},_loadConfigForCountry:function(a){var c=this;b.getAvailableInfographicReports(a).then(function(b){l.forEach(b,function(a){l.forEach(a.children,function(a){a.selected=!0})});c.infographicsTreeGrid||(c.infographicsTreeGrid=new h({tree:new g(b),showHeader:!1},c.infographicTreeGridContainer));var d=-1;l.forEach(c.config.countryConfig,
function(b,c){b.countryID==a&&(d=c)});-1!=d&&l.forEach(c.config.countryConfig[d].disabledInfographics,function(a){l.forEach(b,function(b){l.forEach(b.children,function(b){a==b.value&&(b.selected=!1)})})});c.infographicsTreeGrid.tree.clear();c.infographicsTreeGrid.tree.addNodes(b)});b.getAvailableClassicReports(a).then(function(b){l.forEach(b,function(a){l.forEach(a.children,function(a){a.selected=!0})});c.reportsTreeGrid||(c.reportsTreeGrid=new h({tree:new g(b),showHeader:!1},c.reportTreeGridContainer));
var d=-1;l.forEach(c.config.countryConfig,function(b,c){b.countryID==a&&(d=c)});-1!=d&&l.forEach(c.config.countryConfig[d].disabledReports,function(a){l.forEach(b,function(b){l.forEach(b.children,function(b){a==c._getClassicReportId(b)&&(b.selected=!1)})})});c.reportsTreeGrid.tree.clear();c.reportsTreeGrid.tree.addNodes(b)})},_getClassicReportId:function(a){return a.value&&a.value.itemid?a.value.itemid:a.value},_getDisabledReports:function(a){var b=[];l.forEach(a,function(a){a.selected||(a.value&&
a.value.itemid?b.push(a.value.itemid):b.push(a.value))});return b},_setRingDTWTConfig:function(){this.config.ringDefaults=this._getRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3);this.config.driveTimeDefaults=this._getRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3);this.config.walkTimeDefaults=this._getRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3);this.config.ringUnitDefault=this.ringsBufferUnits.get("value");
this.config.driveTimeUnitDefault=this.driveTimeBufferUnits.get("value");this.config.walkTimeUnitDefault=this.walkTimeBufferUnits.get("value");this.config.ringDisabled=this.disabledRingsOption.checked;this.config.driveTimeDisabled=this.disabledDriveTimeOption.checked;this.config.walkTimeDisabled=this.disabledWalkTimeOption.checked;this.config.infographicsDisabled=this.disabledInfographicsOption.checked;this.config.reportsDisabled=this.disabledReportsOption.checked},_loadRingDTWTConfig:function(){this._setRadii(this.ringsBufferRadii1,
this.ringsBufferRadii2,this.ringsBufferRadii3,this.config.ringDefaults);this.ringsBufferUnits.set("value",this.config.ringUnitDefault);this.disabledRingsOption.setChecked(this.config.ringDisabled);this._setRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.config.driveTimeDefaults);this.driveTimeBufferUnits.set("value",this.config.driveTimeUnitDefault);this.disabledDriveTimeOption.setChecked(this.config.driveTimeDisabled);this._setRadii(this.walkTimeBufferRadii1,
this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.config.walkTimeDefaults);this.walkTimeBufferUnits.set("value",this.config.walkTimeUnitDefault);this.disabledWalkTimeOption.setChecked(this.config.walkTimeDisabled);this.disabledInfographicsOption.setChecked(this.config.infographicsDisabled);this.disabledReportsOption.setChecked(this.config.reportsDisabled)},_getRadii:function(a,b,c){a=a.get("value");b=b.get("value");c=c.get("value");var d=[];""!=a&&d.push(a);""!=b&&d.push(b);""!=c&&d.push(c);
return d},_setRadii:function(a,b,c,d){0<d.length?a.set("value",d[0]):a.set("value","");1<d.length?b.set("value",d[1]):b.set("value","");2<d.length?c.set("value",d[2]):c.set("value","")},_validateRingDTWT:function(){var a=!0,b=!0,c=!1,b=a=n.validateInvalidValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,this.ringValidationErrorMessage,this.nls.thisEntryIsNotValid);a||(this.tab.selectTab(this.nls.rings),c=!0);a=n.validateInvalidValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,
this.driveTimeBufferRadii3,this.driveTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);b=b&&a;a||c||(this.tab.selectTab(this.nls.driveTime),c=!0);a=n.validateInvalidValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.walkTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);b=b&&a;a||c||(this.tab.selectTab(this.nls.walkTime),c=!0);if(!b)return b;tabChange=!1;b=a=n.validateMinMaxValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,
n.MIN_RINGS_VALUE,n.MAX_RINGS_VALUE,this.ringValidationErrorMessage,this.nls.invalidValueRing);a||(this.tab.selectTab(this.nls.rings),c=!0);a=n.validateMinMaxValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,n.MIN_DTWT_VALUE,n.MAX_DTWT_VALUE,this.driveTimeValidationErrorMessage,this.nls.invalidValueDTWT);b=b&&a;a||c||(this.tab.selectTab(this.nls.driveTime),c=!0);a=n.validateMinMaxValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,
n.MIN_DTWT_VALUE,n.MAX_DTWT_VALUE,this.walkTimeValidationErrorMessage,this.nls.invalidValueDTWT);b=b&&a;a||c||(this.tab.selectTab(this.nls.walkTime),c=!0);return b}})});